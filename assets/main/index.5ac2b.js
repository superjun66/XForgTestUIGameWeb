System.register("chunks:///_virtual/app.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts","./handle.ts"],(function(n){var t,e,i,s,c,u,o,r;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){i=n.cclegacy,s=n.game,c=n.Game},function(n){u=n.default},function(n){o=n.cccInited,r=n.appInited}],execute:function(){i._RF.push({},"121dfhPYx1FV4MaGWQefe6o","app",void 0);var a=n("App",function(n){function i(){return n.call(this)||this}return t(i,n),e(i,null,[{key:"inst",get:function(){return this._inst||(this._inst=new i),this._inst}}]),i}(u));a._inst=null;var l=n("app",a.inst);o&&s.once(c.EVENT_ENGINE_INITED,(function(){})),r&&l.once(a.EventType.EVENT_APPINIT_FINISHED,(function(){})),i._RF.pop()}}}));

System.register("chunks:///_virtual/AppInit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseAppInit.ts"],(function(t){var e,n,i,r,o,p,a,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,p=t._decorator,a=t.Sprite},function(t){c=t.default}],execute:function(){var l,s,u,f,h;o._RF.push({},"598f2EhUohEebUzsqwXHool","AppInit",void 0);var y=p.ccclass,b=p.property;t("AppInit",(l=y("AppInit"),s=b(a),l((h=e((f=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),p=0;p<n;p++)o[p]=arguments[p];return e=t.call.apply(t,[this].concat(o))||this,i(e,"bg",h,r(e)),e}n(e,t);var o=e.prototype;return o.onLoad=function(){},o.onFinish=function(){},e}(c)).prototype,"bg",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=f))||u));o._RF.pop()}}}));

System.register("chunks:///_virtual/Audio.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,u,o;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,u=t.AudioSource,o=t.Node}],execute:function(){i._RF.push({},"a40e7emzaxEXKUMqM7SQR28","Audio",void 0);t("default",function(){function t(){this.volume=1,this.volumeScale=1,this.mute=!1,this.endedCallback=null,this.startedCallback=null,this._playing=!1,this._paused=!1,this.audioSource=null;var t=new o("audio");this.audioSource=t.addComponent(u),t.on(u.EventType.ENDED,this.onAudioEnded,this),t.on(u.EventType.STARTED,this.onAudioStarted,this)}var i=t.prototype;return i.onAudioEnded=function(){if(this.endedCallback){var t=this.endedCallback;this.endedCallback=null,t()}},i.onAudioStarted=function(){if(this.startedCallback){var t=this.startedCallback;this.startedCallback=null,t()}},i.play=function(t,e,i){return void 0===e&&(e=null),void 0===i&&(i=null),this.audioSource.clip=t,this.endedCallback=e,this.startedCallback=i,this.audioSource.play(),this.playing=!0,this.paused=!1,this},i.stop=function(){return this.playing=!1,this.paused=!1,this.audioSource.stop(),this.audioSource.node.emit(u.EventType.ENDED),this},i.pause=function(){return this.playing?(this.paused=!0,this.audioSource.pause(),this):this},i.resume=function(){return this.playing&&this.paused?(this.paused=!1,this.audioSource.play(),this):this},i.setVolume=function(t,e){return void 0===t&&(t=1),this.volume=t,"number"==typeof e&&(this.volumeScale=e),this.audioSource.volume=t*this.volumeScale*(this.mute?0:1),this},i.getVolume=function(){return this.volume},i.setVolumeScale=function(t){return void 0===t&&(t=1),this.volumeScale=t,this.audioSource.volume=this.volume*t*(this.mute?0:1),this},i.getVolumeScale=function(){return this.volumeScale},i.setLoop=function(t){return this.audioSource.loop=t,this},i.getLoop=function(){return this.audioSource.loop},i.setMute=function(t){return void 0===t&&(t=!0),this.mute=t,this.setVolume(this.volume),this},i.getMute=function(){return this.mute},i.onEnded=function(t){return this.endedCallback=t,this},i.clear=function(){return this.volume=1,this.volumeScale=1,this.mute=!1,this.paused=!1,this.endedCallback=null,this.startedCallback=null,this.audioSource&&(this.audioSource.stop(),this.audioSource.volume=1,this.audioSource.clip=null,this.audioSource.loop=!1),this},i.destroy=function(){this.clear(),this.audioSource.destroy(),this.audioSource.node.destroy(),this.audioSource=null},e(t,[{key:"playing",get:function(){return this._playing},set:function(t){this._playing=t}},{key:"paused",get:function(){return this._paused},set:function(t){this._paused=t}}]),t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/AudioEngine.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(t){var e,u,s;return{setters:[function(t){e=t.createClass},function(t){u=t.cclegacy},function(t){s=t.default}],execute:function(){u._RF.push({},"7a6389cgB9OaYjMP8cuG+mF","AudioEngine",void 0),t("default",function(){function t(){this.audioID=1,this.endedCallbackMap=new Map,this.effectMap=new Map,this.music=null,this.musicMute=!1,this.musicVolumeScale=1,this.effectMute=!1,this.effectVolumeScale=1}var u=t.prototype;return u.playEffect=function(t,e,u,i,c){var n=this;void 0===e&&(e=1),void 0===u&&(u=!1),void 0===i&&(i=null),void 0===c&&(c=null),this.audioID>1e5&&(this.audioID=1);var f=this.audioID++,l=s.inst.getAudio();return this.effectMap.set(f,l),c&&this.endedCallbackMap.set(f,c),l.setLoop(u).setMute(this.effectMute).setVolume(e,this.effectVolumeScale).play(t,(function(){s.inst.putAudio(l),n.effectMap.delete(f);var t=n.endedCallbackMap.get(f);t&&(n.endedCallbackMap.delete(f),t())}),(function(){i&&i(f)})),f},u.stopEffect=function(t){var e;return!(null==(e=this.effectMap.get(t))||!e.stop())},u.stopAllEffects=function(){this.effectMap.forEach((function(t){t.stop()}))},u.pauseEffect=function(t){var e;return!(null==(e=this.effectMap.get(t))||!e.pause())},u.pauseAllEffects=function(){this.effectMap.forEach((function(t){t.pause()}))},u.resumeEffect=function(t){var e;return!(null==(e=this.effectMap.get(t))||!e.resume())},u.resumeAllEffects=function(){this.effectMap.forEach((function(t){t.resume()}))},u.setEffectMute=function(t,e){var u;return!(null==(u=this.effectMap.get(t))||!u.setMute(e))},u.getEffectMute=function(t){var e;return!(null==(e=this.effectMap.get(t))||!e.getMute())},u.setEffectVolume=function(t,e){var u;return!(null==(u=this.effectMap.get(t))||!u.setVolume(e))},u.getEffectVolume=function(t){var e;return(null==(e=this.effectMap.get(t))?void 0:e.getVolume())||0},u.setAllEffectsVolume=function(t){this.effectMap.forEach((function(e){e.setVolume(t)}))},u.setEffectVolumeScale=function(t,e){var u;return!(null==(u=this.effectMap.get(t))||!u.setVolumeScale(e))},u.getEffectVolumeScale=function(t){var e;return(null==(e=this.effectMap.get(t))?void 0:e.getVolumeScale())||0},u.setGlobalEffectsVolumeScale=function(t){this.effectVolumeScale=t,this.effectMap.forEach((function(e){e.setVolumeScale(t)}))},u.getGlobalEffectsVolumeScale=function(){return this.effectVolumeScale},u.setGlobalEffectsMute=function(t){this.effectMute=t,this.effectMap.forEach((function(e){e.setMute(t)}))},u.getGlobalEffectsMute=function(){return this.effectMute},u.playMusic=function(t,e,u){return void 0===e&&(e=1),void 0===u&&(u=null),this.stopMusic(),this.music=s.inst.getAudio(),this.music.setLoop(!0).setMute(this.musicMute).setVolume(e,this.musicVolumeScale).play(t,null,u),0},u.stopMusic=function(){return!!this.music&&(this.music.destroy(),this.music=null,!0)},u.pauseMusic=function(){return!!this.music&&(this.music.pause(),!0)},u.resumeMusic=function(){return!!this.music&&(this.music.resume(),!0)},u.setMusicVolume=function(t){return!!this.music&&(this.music.setVolume(t),!0)},u.getMusicVolume=function(){return this.music?this.music.getVolume():-1},u.setMusicVolumeScale=function(t){var e;return this.musicVolumeScale=t,null==(e=this.music)||e.setVolumeScale(t),!0},u.getMusicVolumeScale=function(){return this.musicVolumeScale},u.setMusicMute=function(t){var e;return this.musicMute=t,null==(e=this.music)||e.setMute(t),!0},u.getMusicMute=function(){return this.musicMute},u.setEndedCallback=function(t,e){var u;return 0===t?!(null==(u=this.music)||!u.onEnded(e)):!!this.effectMap.has(t)&&(this.endedCallbackMap.set(t,e),!0)},u.stop=function(t){return 0===t?this.stopMusic():this.stopEffect(t)},u.pause=function(t){return 0===t?this.pauseMusic():this.pauseEffect(t)},u.resume=function(t){return 0===t?this.resumeMusic():this.resumeEffect(t)},u.pauseAll=function(){this.pauseMusic(),this.pauseAllEffects()},u.resumeAll=function(){this.resumeMusic(),this.resumeAllEffects()},u.stopAll=function(){this.stopMusic(),this.stopAllEffects()},u.setVolume=function(t,e){return 0===t?this.setMusicVolume(e):this.setEffectVolume(t,e)},u.getVolume=function(t){return 0===t?this.getMusicVolume():this.getEffectVolume(t)},u.setVolumeScale=function(t,e){return 0===t?this.setMusicVolumeScale(e):this.setEffectVolumeScale(t,e)},u.getVolumeScale=function(t){return 0===t?this.getMusicVolumeScale():this.getEffectVolumeScale(t)},e(t,null,[{key:"inst",get:function(){return this._inst||(this._inst=new t),this._inst}}]),t}())._inst=null,u._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Audio.ts"],(function(t){var n,i,u;return{setters:[function(t){n=t.createClass},function(t){i=t.cclegacy},function(t){u=t.default}],execute:function(){i._RF.push({},"5902c7PSWZGdZWpqw8PJxhX","AudioManager",void 0),t("default",function(){function t(){this.audioArray=[]}var i=t.prototype;return i.getAudio=function(){return this.audioArray.length?this.audioArray.pop():new u},i.putAudio=function(t){t.clear(),this.audioArray.push(t)},n(t,null,[{key:"inst",get:function(){return this._inst||(this._inst=new t),this._inst}}]),t}())._inst=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/BaseAppInit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts","./BaseManager.ts"],(function(n){var e,t,i,s,r,a,o,u,f,l,c,d,_,p;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass},function(n){i=n.cclegacy,s=n._decorator,r=n.settings,a=n.Settings,o=n.assetManager,u=n.Button,f=n.Node,l=n.isValid,c=n.EventTouch,d=n.Component},function(n){_=n.default},function(n){p=n.default}],execute:function(){var h;i._RF.push({},"2110bB6HGxDDrnZkm2wbIsw","BaseAppInit",void 0);var g=s.ccclass,m="app-admin",b="app-model",T="app-control",y="app-controller",v="app-manager";n("default",g("BaseAppInit")(h=function(n){function i(){var e;return(e=n.call(this)||this)._base_mgr_completed=0,e._base_user_completed=0,e._base_inited=!1,e._base_finished=!1,e}e(i,n);var s=i.prototype;return s.startInit=function(){var n=this,e=r.querySettings(a.Category.ASSETS,"projectBundles");_.inst.lib.task.createAny().add([function(n,t){if(-1===e.indexOf(T))return n();o.preloadAny({url:T},{ext:"bundle"},null,(function(e){if(e)return t(.1);n()}))},function(n,t){if(-1===e.indexOf(y))return n();o.preloadAny({url:y},{ext:"bundle"},null,(function(e){if(e)return t(.1);n()}))},function(n,t){if(-1===e.indexOf(b))return n();o.preloadAny({url:b},{ext:"bundle"},null,(function(e){if(e)return t(.1);n()}))},function(n,t){if(-1===e.indexOf(m))return n();o.preloadAny({url:m},{ext:"bundle"},null,(function(e){if(e)return t(.1);n()}))},function(n,t){if(-1===e.indexOf(v))return n();o.preloadAny({url:v},{ext:"bundle"},null,(function(e){if(e)return t(.1);n()}))}]).add((function(n,t){if(-1===e.indexOf(T))return n();o.loadBundle(T,(function(e){if(e)return t(.1);n()}))})).add((function(n,t){if(-1===e.indexOf(y))return n();o.loadBundle(y,(function(e){if(e)return t(.1);n()}))})).add((function(n,t){if(-1===e.indexOf(b))return n();o.loadBundle(b,(function(e){if(e)return t(.1);n()}))})).add((function(n,t){if(-1===e.indexOf(m))return n();o.loadBundle(m,(function(e){if(e)return t(.1);n()}))})).add((function(n,t){if(-1===e.indexOf(v))return n();o.loadBundle(v,(function(e){if(e)return t(.1);n()}))})).start((function(){n._base_inited=!0,n.onProgress(0,n._base_total),p.init(o.getBundle(v),(function(){n.innerNextInit()}),(function(){n.onUserInit(),n._base_completed<n._base_total||n.innerFinished()}))}))},s.innerFinished=function(){var n=this;if(!this._base_finished){if(this._base_finished=!0,_.emit(_.EventType.EVENT_APPINIT_FINISHED),_.inst.Manager.Sound.setting.defaultEffectName){var e=function(n){!1!==n.target.useDefaultEffect&&_.inst.manager.ui.onceUserInterface(f.EventType.TOUCH_END,(function(n){n.target.getComponent(u)&&setTimeout((function(){l(_.inst.manager.sound)&&n.eventPhase!==c.CAPTURING_PHASE&&_.inst.manager.sound.playDefaultEffect()}))}),null,!0)},t=u.prototype.onEnable;u.prototype.onEnable=function(){t.call(this),this.node.on(f.EventType.TOUCH_START,e)};var i=u.prototype.onDisable;u.prototype.onDisable=function(){this.node.off(f.EventType.TOUCH_START,e),i.call(this)}}return _.inst.manager.ui.showDefault((function(){if(n.onFinish(),_.inst.Manager.Sound.setting.defaultMusicName){var e=function n(){var e=this;l(_.inst.manager.sound)&&(_.inst.manager.sound.isMusicPlaying&&!_.inst.manager.sound.isMusicPaused?_.inst.manager.sound.replayMusic((function(){_.inst.manager.ui.offUserInterface(f.EventType.TOUCH_START,n,e,!0)})):_.inst.manager.ui.offUserInterface(f.EventType.TOUCH_START,n,this,!0))};_.inst.manager.ui.onUserInterface(f.EventType.TOUCH_START,e,n,!0),_.inst.manager.sound.playDefaultMusic((function(){_.inst.manager.ui.offUserInterface(f.EventType.TOUCH_START,e,n,!0)}))}}))}},s.innerNextInit=function(){this._base_mgr_completed+=1,this.onProgress(this._base_completed,this._base_total)},s.nextInit=function(){if(!this._base_finished){if(!this._base_inited)return this._base_user_completed+=1,void this.onProgress(this._base_completed,this._base_total);this._base_user_completed+=1,this.onProgress(this._base_completed,this._base_total),this._base_completed>=this._base_total&&this.innerFinished()}},s.start=function(){this.startInit()},s.getUserAssetNum=function(){return 0},s.onUserInit=function(){return 0},s.onProgress=function(n,e){return n/e},s.onFinish=function(){},t(i,[{key:"_base_mgr_total",get:function(){return Math.max(0,p.getTotalAssetNum(o.getBundle(v)))}},{key:"_base_user_total",get:function(){return Math.max(0,this.getUserAssetNum())}},{key:"_base_total",get:function(){return this._base_mgr_total+this._base_user_total}},{key:"_base_completed",get:function(){return this._base_mgr_completed+Math.min(this._base_user_total,this._base_user_completed)}}]),i}(d))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/BaseControl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){i=t.cclegacy}],execute:function(){t("default",(function(t){var i;return(i=function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),e(i,null,[{key:"inst",get:function(){return null===this._base_inst&&(this._base_inst=new this),this._base_inst}}]),i}(a)).Event=t,i._base_inst=null,i})),i._RF.push({},"fb103m5F/JDta0mjXTmkbT1","BaseControl",void 0);var s=function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=!1),this.callback=null,this.target=null,this.once=!1,this.callback=t,this.target=n,this.once=e},l=function(){function t(){this.callbacks=[]}var n=t.prototype;return n.size=function(){return this.callbacks.length},n.add=function(t,n,e){void 0===n&&(n=null),void 0===e&&(e=!1),this.callbacks.push(new s(t,n,e))},n.emit=function(t){for(var n=0;n<this.callbacks.length;n++){var e=this.callbacks[n];e.once&&(this.callbacks.splice(n,1),--n),e.callback&&e.callback.apply(e.target,t)}},n.call=function(t){if(0!==this.callbacks.length){var n=this.callbacks[0];if(n.once&&this.callbacks.splice(0,1),n.callback)return n.callback.apply(n.target,t)}},n.remove=function(t,n){void 0===n&&(n=null);for(var e=this.callbacks.length-1;e>=0;e--){var i=this.callbacks[e];i.callback===t&&i.target===n&&this.callbacks.splice(e,1)}},n.removeByCallback=function(t){for(var n=this.callbacks.length-1;n>=0;n--){this.callbacks[n].callback===t&&this.callbacks.splice(n,1)}},n.removeByTarget=function(t){for(var n=this.callbacks.length-1;n>=0;n--){this.callbacks[n].target===t&&this.callbacks.splice(n,1)}},t}(),r=function(){function t(){this.listeners={}}var n=t.prototype;return n.on=function(t,n,e){t.toString()&&n&&(this.listeners[t]||(this.listeners[t]=new l),this.listeners[t].add(n,e))},n.once=function(t,n,e){t.toString()&&n&&(this.listeners[t]||(this.listeners[t]=new l),this.listeners[t].add(n,e,!0))},n.off=function(t,n,e){t.toString()&&n&&this.listeners[t]&&this.listeners[t].remove(n,e)},n.targetOff=function(t){if(t)for(var n in this.listeners){if(Object.prototype.hasOwnProperty.call(this.listeners,n))this.listeners[n].removeByTarget(t)}},n.emit=function(t,n){t.toString()&&this.listeners[t]&&this.listeners[t].emit(n)},n.call=function(t,n){if(t.toString()&&this.listeners[t])return this.listeners[t].call(n)},t}(),a=function(){function t(){this.e=void 0,this.t=void 0,this.event=new r}var n=t.prototype;return n.call=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];return this.event.call.call(this.event,t,e)},n.emit=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),i=1;i<n;i++)e[i-1]=arguments[i];return this.event.emit.call(this.event,t,e)},n.on=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return this.event.on.apply(this.event,n)},n.once=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return this.event.once.apply(this.event,n)},n.off=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return this.event.off.apply(this.event,n)},n.targetOff=function(t){return this.event.targetOff.call(this.event,t)},t}();i._RF.pop()}}}));

System.register("chunks:///_virtual/BaseController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./logger.ts"],(function(t){var e,n,r,i,s;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass,r=t.assertThisInitialized},function(t){i=t.cclegacy},function(t){s=t.Logger}],execute:function(){t("default",(function(){var t;return(t=function(t){function i(){var e;return e=t.call(this)||this,i._base_inst=r(e),e}return e(i,t),n(i,null,[{key:"inst",get:function(){return this._base_inst}}]),i}(o)).Event=new Proxy({},{get:function(t,e){return t[e]?t[e]:(t[e]=e,e)}}),t._base_inst=null,t})),i._RF.push({},"a7da7CB5gRIfo4MfUWP27NW","BaseController",void 0);var l=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1),this.callback=null,this.target=null,this.once=!1,this.callback=t,this.target=e,this.once=n},a=function(){function t(){this.callbacks=[]}var e=t.prototype;return e.size=function(){return this.callbacks.length},e.add=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1),this.callbacks.push(new l(t,e,n))},e.emit=function(t){for(var e=0;e<this.callbacks.length;e++){var n=this.callbacks[e];n.once&&(this.callbacks.splice(e,1),--e),n.callback&&n.callback.apply(n.target,t)}},e.call=function(t){if(0!==this.callbacks.length){var e=this.callbacks[0];if(e.once&&this.callbacks.splice(0,1),e.callback)return e.callback.apply(e.target,t)}},e.remove=function(t,e){void 0===e&&(e=null);for(var n=this.callbacks.length-1;n>=0;n--){var r=this.callbacks[n];r.callback===t&&r.target===e&&this.callbacks.splice(n,1)}},e.removeByCallback=function(t){for(var e=this.callbacks.length-1;e>=0;e--){this.callbacks[e].callback===t&&this.callbacks.splice(e,1)}},e.removeByTarget=function(t){for(var e=this.callbacks.length-1;e>=0;e--){this.callbacks[e].target===t&&this.callbacks.splice(e,1)}},t}(),c=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e,n){t.toString()&&e&&(this.listeners[t]||(this.listeners[t]=new a),this.listeners[t].add(e,n))},e.once=function(t,e,n){t.toString()&&e&&(this.listeners[t]||(this.listeners[t]=new a),this.listeners[t].add(e,n,!0))},e.off=function(t,e,n){t.toString()&&e&&this.listeners[t]&&this.listeners[t].remove(e,n)},e.targetOff=function(t){if(t)for(var e in this.listeners){if(Object.prototype.hasOwnProperty.call(this.listeners,e))this.listeners[e].removeByTarget(t)}},e.emit=function(t,e){t.toString()&&this.listeners[t]&&this.listeners[t].emit(e)},e.call=function(t,e){if(t.toString()&&this.listeners[t])return this.listeners[t].call(e)},t}(),o=function(){function t(){this.t=void 0,this.event=new c}var e=t.prototype;return e.call=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.event.call.call(this.event,t,n)},e.emit=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.event.emit.call(this.event,t,n)},e.on=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.event.on.apply(this.event,e)},e.once=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.event.once.apply(this.event,e)},e.off=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.event.off.apply(this.event,e)},e.targetOff=function(t){return this.event.targetOff.call(this.event,t)},n(t,[{key:"log",get:function(){return s.create("log","#4682b4","["+this.constructor.name+"] [LOG]")}},{key:"warn",get:function(){return s.create("warn","#ff7f50","["+this.constructor.name+"] [WARN]")}},{key:"error",get:function(){return s.create("error","#ff4757","["+this.constructor.name+"] [ERROR]")}}]),t}();i._RF.pop()}}}));

System.register("chunks:///_virtual/BaseData.ts",["cc"],(function(a){var t;return{setters:[function(a){t=a.cclegacy}],execute:function(){t._RF.push({},"a2323bci8dJJoAJATXa72lu","BaseData",void 0);a("default",(function(){console.log("Load BaseData")}));t._RF.pop()}}}));

System.register("chunks:///_virtual/BaseManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts","./logger.ts"],(function(n){var e,t,a,i,r,o,s,c,u,g,f,d,l,h;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass,a=n.assertThisInitialized},function(n){i=n.cclegacy,r=n._decorator,o=n.Widget,s=n.EventTarget,c=n.js,u=n.Prefab,g=n.path,f=n.instantiate,d=n.Component},function(n){l=n.default},function(n){h=n.Logger}],execute:function(){var _;i._RF.push({},"302056smx5PRICBe3D/jWxS","BaseManager",void 0);var m=r.ccclass,E=new(function(){function n(){this.index=0}return n.prototype.create=function(){return this.index++>1e7&&(this.index=0),Date.now()+"-"+this.index},n}()),v=(h.create("log","#32cd32","[BaseManager] [下载开始]"),h.create("log","#00ae9d","[BaseManager] [下载完成]"),h.create("log","#ff4757","[BaseManager] [下载失败]"));h.create("log","#3e4145","[BaseManager] [初始化开始]"),h.create("log","#008080","[BaseManager] [初始化完成]"),n("default",m("BaseManager")(_=function(n){function i(){var e;if((e=n.call(this)||this)._base_event=new s,e._base_manager_name=c.getClassName(a(e)),"Manager"!==e._base_manager_name&&"Manager"===e._base_manager_name.slice(-7)){var t=e._base_manager_name.slice(0,-7);l.inst.Manager[t]=e.constructor,l.inst.manager[t.toLocaleLowerCase()]=a(e)}return e}e(i,n);var r=i.prototype;return r.resetInEditor=function(){var n=this.node.getComponent(o)||this.node.addComponent(o);n.isAlignBottom=!0,n.isAlignLeft=!0,n.isAlignRight=!0,n.isAlignTop=!0,n.top=0,n.left=0,n.right=0,n.bottom=0,n.alignMode=o.AlignMode.ON_WINDOW_RESIZE},r.onInited=function(){},r.onFinished=function(){},r.init=function(n){n&&n()},r.createUUID=function(){return E.create()},r.emit=function(n){for(var e,t=arguments.length,a=new Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];(e=this._base_event).emit.apply(e,[n].concat(a))},r.on=function(n,e,t){this._base_event.on(n,e,t)},r.once=function(n,e,t){this._base_event.once(n,e,t)},r.off=function(n,e,t){this._base_event.off(n,e,t)},r.targetOff=function(n){this._base_event.targetOff(n)},i.getTotalAssetNum=function(n){var e=this.sysMgrCount;return n?(n.getDirWithPath("/",u).forEach((function(n){n.path.endsWith("Manager")&&e++})),e):e},i.getUserAssetUrls=function(n){var e=[];return n?(n.getDirWithPath("/",u).forEach((function(n){n.path.endsWith("Manager")&&e.push(n.path)})),e):e},i.init=function(n,e,t){var a=this.getUserAssetUrls(n),r=a.length+this.sysMgrCount,o=0,s=function(n,t){return function(){t.onInited(),e&&e(++o,r),n()}},c=[],d=[l.inst.manager.event,l.inst.manager.timer,l.inst.manager.loader,l.inst.manager.ui,l.inst.manager.sound],h=l.inst.lib.task.createASync();d.forEach((function(n){h.add((function(e){n.init(s(e,n))}))}));var _=l.inst.lib.task.createASync(),m=l.inst.manager.ui.root.getChildByPath("UserManager");a.forEach((function(e){_.add((function(t,a){n.load(e,u,(function(n,r){if(n||!r)v(g.basename(e),"重试..."),a(1);else{var o=f(r);o.parent=m,o.active=!0,c.push(o.getComponent(i)),t()}}))}))})),l.inst.lib.task.createAny().add([function(n){return h.start(n)},function(n){return _.start(n)}]).add((function(n){l.emit(l.EventType.EVENT_SYS_MANAGER_INITED),n()})).add((function(n){var e=l.inst.lib.task.createASync();c.forEach((function(n){e.add((function(e){n.init(s(e,n))}))})),e.start(n)})).add((function(n){l.emit(l.EventType.EVENT_USER_MANAGER_INITED),l.emit(l.EventType.EVENT_MANAGER_INITED),n()})).add((function(n){d.forEach((function(n){n.onFinished()})),c.forEach((function(n){n.onFinished()})),n()})).start((function(){l.emit(l.EventType.EVENT_MANAGER_FINISHED),t&&t(r)}))},t(i,[{key:"managerName",get:function(){return this._base_manager_name}},{key:"log",get:function(){return window.console.log.bind(window.console,"["+this._base_manager_name+"] [LOG] ["+(new Date).toLocaleString()+"]")}},{key:"warn",get:function(){return window.console.warn.bind(window.console,"["+this._base_manager_name+"] [WARN] ["+(new Date).toLocaleString()+"]")}},{key:"error",get:function(){return window.console.error.bind(window.console,"["+this._base_manager_name+"] [ERROR] ["+(new Date).toLocaleString()+"]")}}],[{key:"sysMgrCount",get:function(){return 5}}]),i}(d))||_);i._RF.pop()}}}));

System.register("chunks:///_virtual/BaseModel.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"7a377zr4IZOcZm99E2rQNJP","BaseModel",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/BaseView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts","./logger.ts"],(function(e){var t,i,n,s,o,r,a,u,h,c,l,_,d,p,f,w,g,b,v,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.assertThisInitialized,s=e.initializerDefineProperty,o=e.createClass},function(e){r=e.cclegacy,a=e._decorator,u=e.Node,h=e.Enum,c=e.js,l=e.Scene,_=e.director,d=e.UITransform,p=e.Font,f=e.isValid,w=e.sp,g=e.SpriteFrame,b=e.Component},function(e){v=e.default},function(e){m=e.Logger}],execute:function(){var y,P,S,E,O,T,k,H,D,V,M,I,A,F,x;r._RF.push({},"eddc0QRQjlCPYcQd/35Kv/C","BaseView",void 0);var U=a.ccclass,R=a.property,C=a.disallowMultiple,N=[u.EventType.TOUCH_START,u.EventType.TOUCH_MOVE,u.EventType.TOUCH_END,u.EventType.TOUCH_CANCEL,u.EventType.MOUSE_DOWN,u.EventType.MOUSE_MOVE,u.EventType.MOUSE_UP,u.EventType.MOUSE_ENTER,u.EventType.MOUSE_LEAVE,u.EventType.MOUSE_WHEEL],B=h({destroy:1,active:2}),L=e("ViewType",function(e){return e.Page="Page",e.Paper="Paper",e.PaperAll="PaperAll",e.Pop="Pop",e.Top="Top",e}({})),z=function(e){return e[e.BeforeShow=0]="BeforeShow",e[e.Showing=1]="Showing",e[e.Showed=2]="Showed",e[e.BeforeHide=3]="BeforeHide",e[e.Hiding=4]="Hiding",e[e.Hid=5]="Hid",e}(z||{}),j={id:"BaseView",name:"Settings",displayOrder:-1/0,style:"section"},Q=new Map;e("default",(y=U("BaseView"),P=C(),S=R({group:j,type:B,tooltip:"何种模式隐藏节点\n1、destroy: 销毁UI并释放对应的所有资源\n2、active: 缓存UI并加速下次的打开速度"}),E=R({group:j,tooltip:"是否是单例模式\n1、单例模式: UI只会被创建一次(onShow会被重复触发)\n2、非单例模式: UI会被重复创建"}),O=R({group:j,tooltip:"是否捕获焦点<响应onLostFocus和onFocus>\n1、当一个捕获焦点的UI处于最上层并展示时\n下层的UI永远不会响应focus事件",visible:function(){return!this.is3D()}}),T=R({group:j,tooltip:"是否需要底层遮罩",visible:function(){return!this.is3D()&&!this.isPage()}}),k=R({group:j,tooltip:"是否禁止点击事件向下层传递",visible:function(){return!this.is3D()}}),y(H=P(((x=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this)._base_view_created=!1,t._base_view_state=z.Hid,t._base_view_name=c.getClassName(n(t)),t._base_touch_enable=!0,t._base_show_hide_delays=[],t._base_mini_show=new Set,s(t,"_hideEvent",V,n(t)),s(t,"_singleton",M,n(t)),s(t,"_captureFocus",I,n(t)),s(t,"_shade",A,n(t)),s(t,"_blockInput",F,n(t)),t.miniViews=[],t}i(t,e),t.BindControl=function(e){return function(t){function n(){return t.apply(this,arguments)||this}return i(n,t),o(n,[{key:"control",get:function(){return e?e.inst:null}}]),n}(t)},t.BindController=function(e){var n,s=C()(n=function(t){function n(){return t.apply(this,arguments)||this}return i(n,t),o(n,[{key:"controller",get:function(){return e?e.inst:null}}]),n}(t))||n;return s},t.isViewValid=function(e,t){e&&e(!0)},t.isPage=function(e){return 0===e.indexOf(L.Page)},t.isPaper=function(e){return 0===e.indexOf(L.Paper)},t.isPaperAll=function(e){return 0===e.indexOf(L.PaperAll)},t.isPop=function(e){return 0===e.indexOf(L.Pop)},t.isTop=function(e){return 0===e.indexOf(L.Top)};var r=t.prototype;return r.isPage=function(){return t.isPage(this._base_view_name)},r.isPaper=function(){return t.isPaper(this._base_view_name)},r.isPaperAll=function(){return t.isPaperAll(this._base_view_name)},r.isPop=function(){return t.isPop(this._base_view_name)},r.isTop=function(){return t.isTop(this._base_view_name)},r.is2D=function(){return!this.is3D()},r.is3D=function(){return this.node.parent instanceof l?this.node.parent.name===this.viewName:_.getScene().name===this.viewName},r.isMiniViewShow=function(e){return this._base_mini_show.has(e)},r.resetInEditor=function(){},r.setTouchEnabled=function(e){void 0===e&&(e=!0),this._base_touch_enable=!!e},r.blockPropagation=function(e){this.blockInput&&(e.propagationStopped=!0,e.type===u.EventType.TOUCH_START&&this.log("阻断触摸向下层传递"))},r.stopPropagation=function(e){this._base_touch_enable||(e.propagationStopped=!0,e.propagationImmediateStopped=!0,e.type===u.EventType.TOUCH_START&&this.log("屏蔽触摸"))},r.onBaseViewCreate=function(){var e=this;if(!this.is3D()){var t=this.getComponent(d);t&&(t.hitTest=function(){if(e.blockInput){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return d.prototype.hitTest.apply(t,n)}return!1});for(var i=0;i<N.length;i++)this.node.on(N[i],this.blockPropagation,this),this.node.on(N[i],this.stopPropagation,this,!0)}},r.hideAllMiniViews=function(e){this._base_mini_show.forEach((function(t){v.inst.manager.ui.hide({name:t,data:e})})),this._base_mini_show.clear()},r.hideMiniViews=function(e){var t=this,i=e.data,n=e.views;0!==this.miniViews.length&&0!==n.length&&(n.forEach((function(e){-1!==t.miniViews.indexOf(e)?t._base_mini_show.has(e)&&v.inst.manager.ui.hide({name:e,data:i}):t.warn("hideMiniViews",e+"不在miniViews中, 已跳过")})),v.inst.manager.ui.sortUserInterface("Paper"))},r.showMiniViews=function(e){var t=this,i=e.data,n=e.views,s=e.onShow,o=e.onHide,r=e.onFinish;if(0===n.length)return!1;if(this.typeName!==L.Page)return this.warn("showMiniViews","仅支持Page类型"),!1;for(var a=v.inst.lib.task.createSync(),u=function(){var e=n[h];e instanceof Array?a.add((function(n){t.createMixMiniViewsTask(e,i,s,o).start(n)})):a.add((function(n){t.createMixMiniViewsTask([e],i,s,o).start(n)}))},h=0;h<n.length;h++)u();return a.start(r&&function(){r()}),!0},r.createMixMiniViewsTask=function(e,i,n,s){var o=this;void 0===e&&(e=[]);var r=v.inst.lib.task.createSync();return this.typeName!==L.Page?(this.warn("showMiniViews","仅支持Page类型"),r):(0===(e=e.filter((function(e){return e?o._base_mini_show.has(e)?(o.warn("showMiniViews","重复融合"+e+", 已跳过"),!1):-1===o.miniViews.indexOf(e)?(o.warn("showMiniViews",e+"不在miniViews中, 已跳过"),!1):e.indexOf(o.baseName)!==L.Paper.length&&0!==e.indexOf(L.PaperAll)?(o.warn("showMiniViews",e+"不属于当前Page, 已跳过"),!1):(o._base_mini_show.add(e),!0):(o.warn("showMiniViews","name不能为空"),!1)}))).length||(r.add((function(t){var i=v.inst.lib.task.createASync();e.forEach((function(e){i.add((function(t,i){o.log("下载子页面: "+e),v.inst.manager.ui.load(e,(function(e){e?t():o.scheduleOnce(i,.1)}))}))})),i.start(t)})),r.add((function(r){var a=v.inst.lib.task.createASync();e.forEach((function(e){a.add((function(r){var a;if(null==(a=o._base_mini_show)||!a.has(e))return r();o.log("展示子页面: "+e),t.isPaperAll(e)&&Q.set(e,o.uuid),v.inst.manager.ui.show({name:e,data:i,silent:!0,attr:{zIndex:o.miniViews.indexOf(e)},onShow:function(t){n&&n(e,t),r()},onHide:function(i){var n;if(t.isPaperAll(e)){var r=Q.get(e);r&&r===o.uuid&&Q.delete(e)}null==(n=o._base_mini_show)||n.delete(e),s&&s(e,i)},onError:function(i,n){var s;if(n===v.inst.Manager.UI.ErrorCode.LoadError)return!0;if(t.isPaperAll(e)){var a=Q.get(e);a&&a===o.uuid&&(Q.delete(e),v.inst.manager.ui.hide({name:e}))}null==(s=o._base_mini_show)||s.delete(e),o.warn("忽略子页面",e,i),r()}})}))})),a.start((function(){v.inst.manager.ui.sortUserInterface("Paper"),r()}))}))),r)},r.setNodeAttr=function(e){e&&("number"==typeof e.zIndex&&this.node.setPosition(this.node.position.x,this.node.position.y,e.zIndex),"number"==typeof e.siblingIndex&&this.node.setSiblingIndex(e.siblingIndex))},r.show=function(e,t,i,n,s){var o=this;if(this._base_view_state===z.Showed||this._base_view_state===z.Hid){var r=this._base_view_state===z.Hid;r&&(this._base_view_state=z.BeforeShow);this.log("beforeShow");var a=!1;this.beforeShow((function(u){if(a)return o.error("beforeShow","next被重复调用");a=!0,function(a){if(a||o.isPaperAll()&&o.node.emit("onHide"),s&&s(a),a)r&&(o._base_view_state=z.Hid);else{r&&(o._base_view_state=z.Showing),n&&o.node.once("onHide",n),!1===o._base_view_created&&(o._base_view_created=!0,o.onBaseViewCreate()),o.setNodeAttr(t),!0!==o.node.active&&(o.node.active=!0),o.log("onShow");var u=null;try{u=o.onShow(e)}catch(e){o.onError(),console.error(e)}v.inst.manager.ui.refreshShade();try{i&&i(u),o.node.emit("onShow",u),v.inst.manager.ui.emit(o._base_view_name,{event:"onShow",result:u}),v.inst.manager.ui.emit("onShow",{name:o._base_view_name,result:u})}catch(e){console.error(e)}r&&(o._base_view_state=z.Showed)}o._base_show_hide_delays.length>0&&o._base_show_hide_delays.shift()()}(u||null)}),e)}else this._base_show_hide_delays.push(this.show.bind(this,e,t,i,n,s))},r.hide=function(e,t){if(this._base_view_state===z.Hid||this._base_view_state===z.Showed){var i,n=this._base_view_state===z.Showed;if(n&&(this._base_view_state=z.BeforeHide),this.log("beforeHide"),this.beforeHide(e))n&&(this._base_view_state=z.Showed);else{this.log("onHide"),n&&(this._base_view_state=z.Hiding),this.hideAllMiniViews(e);var s=null;try{s=this.onHide(e)}catch(i){console.error(i)}try{t&&t(s),this.node.emit("onHide",s),v.inst.manager.ui.emit(this._base_view_name,{event:"onHide",result:s}),v.inst.manager.ui.emit("onHide",{name:this._base_view_name,result:s})}catch(i){console.error(i)}n&&(this._base_view_state=z.Hid),this.hideEvent===B.active?this.node.active=!1:this.hideEvent===B.destroy&&v.inst.manager.ui.release(this),v.inst.manager.ui.refreshShade()}this._base_show_hide_delays.length>0&&this._base_show_hide_delays.shift()()}else this._base_show_hide_delays.push(this.hide.bind(this,e,t))},r.focus=function(e){var t=null,i="";e?(t=this.onFocus(),i="onFocus"):(t=this.onLostFocus(),i="onLostFocus"),this.node.emit(i,t),v.inst.manager.ui.emit(this._base_view_name,{event:i,result:t}),v.inst.manager.ui.emit(i,{name:this._base_view_name,result:t})},r.loadRes=function(e,t,i){v.inst.manager.ui.loadRes(this,e,t,i)},r.preloadRes=function(e,t){v.inst.manager.ui.preloadRes(this,e,t)},r.loadResDir=function(e,t,i){v.inst.manager.ui.loadResDir(this,e,t,i)},r.preloadResDir=function(e,t){v.inst.manager.ui.preloadResDir(this,e,t)},r.setFont=function(e,t,i){this.loadRes(t,p,(function(t){if(!t||!f(e))return i&&i(!1);e.font=t,i&&i(!0)}))},r.setSpine=function(e,t,i){this.loadRes(t,w.SkeletonData,(function(t){if(!t||!f(e))return i&&i(!1);e.skeletonData=t,i&&i(!0)}))},r.setSprite=function(e,t,i){this.loadRes(t,g,(function(t){if(!t||!f(e))return i&&i(!1);e.spriteFrame=t,i&&i(!0)}))},r.onShow=function(e){return e},r.onHide=function(e){return e},r.onLostFocus=function(){return!0},r.onFocus=function(){return!0},r.beforeShow=function(e,t){e(null)},r.beforeHide=function(e){return null},r.onError=function(){},r.onShade=function(){return{}},o(t,[{key:"hideEvent",get:function(){return this.is3D()?B.destroy:this._hideEvent},set:function(e){this.is3D()&&e!==B.destroy?this.log("3D模式下只能是destroy模式"):this._hideEvent=e}},{key:"singleton",get:function(){return!!this.isPage()||(!!this.isPaperAll()||(!!this.isPaper()||this._singleton&&this.constructor._singleton))},set:function(e){if(!e){if(this.isPage())return void this.log("Page只能是单例模式");if(this.isPaper())return void this.log("Paper只能是单例模式")}this._singleton=this.constructor._singleton=!!e}},{key:"captureFocus",get:function(){return!this.is3D()&&this._captureFocus},set:function(e){var t;e&&this.is3D()?this.log("只有2D模式下才可以捕获焦点"):this._captureFocus!==e?(this._captureFocus=e,null==(t=v.inst)||null==(t=t.manager)||null==(t=t.ui)||t.refreshShade()):this._captureFocus=e}},{key:"shade",get:function(){return!this.is3D()&&(!this.isPage()&&this._shade)},set:function(e){if(e){if(this.is3D())return void this.log("只有2D模式下才可以设置底层遮罩");if(this.isPage())return void this.log("Page不可以设置底层遮罩")}var t;this._shade!==e?(this._shade=e,null==(t=v.inst)||null==(t=t.manager)||null==(t=t.ui)||t.refreshShade()):this._shade=e}},{key:"blockInput",get:function(){return!this.is3D()&&this._blockInput},set:function(e){e&&this.is3D()?this.log("只有2D模式下才可以设置阻断点击事件"):this._blockInput=e}},{key:"viewName",get:function(){return this._base_view_name}},{key:"baseName",get:function(){return this._base_view_name.slice(this.typeName.length)}},{key:"typeName",get:function(){return 0===this._base_view_name.indexOf(L.Paper)?L.Paper:0===this._base_view_name.indexOf(L.Pop)?L.Pop:0===this._base_view_name.indexOf(L.Top)?L.Top:L.Page}},{key:"isSingleton",get:function(){return this.singleton}},{key:"isCaptureFocus",get:function(){return this.captureFocus}},{key:"isNeedShade",get:function(){return this.shade}},{key:"isShow",get:function(){return this._base_view_state!=z.Hid}},{key:"log",get:function(){return m.create("log","#1e90ff","["+this._base_view_name+"] [LOG]")}},{key:"warn",get:function(){return m.create("warn","#ff7f50","["+this._base_view_name+"] [WARN]")}},{key:"error",get:function(){return m.create("error","#ff4757","["+this._base_view_name+"] [ERROR]")}}]),t}(b))._singleton=!0,V=t((D=x).prototype,"_hideEvent",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.destroy}}),t(D.prototype,"hideEvent",[S],Object.getOwnPropertyDescriptor(D.prototype,"hideEvent"),D.prototype),M=t(D.prototype,"_singleton",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(D.prototype,"singleton",[E],Object.getOwnPropertyDescriptor(D.prototype,"singleton"),D.prototype),I=t(D.prototype,"_captureFocus",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(D.prototype,"captureFocus",[O],Object.getOwnPropertyDescriptor(D.prototype,"captureFocus"),D.prototype),A=t(D.prototype,"_shade",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(D.prototype,"shade",[T],Object.getOwnPropertyDescriptor(D.prototype,"shade"),D.prototype),F=t(D.prototype,"_blockInput",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(D.prototype,"blockInput",[k],Object.getOwnPropertyDescriptor(D.prototype,"blockInput"),D.prototype),H=D))||H)||H));r._RF.pop()}}}));

System.register("chunks:///_virtual/Core.ts",["./rollupPluginModLoBabelHelpers.js","cc","./debug.ts","./logger.ts","./storage.ts","./task.ts"],(function(t){var n,e,r,o,i,l,s,a,c,E;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy,r=t.EventTarget,o=t.director,i=t.Director,l=t.js},function(t){s=t},function(t){a=t.default},function(t){c=t.default},function(t){E=t.default}],execute:function(){e._RF.push({},"b4a49Ny+p5ESLkbKbyXAdn/","Core",void 0);var u=function(t){return t.EVENT_APPINIT_FINISHED="EVENT_APPINIT_FINISHED",t.EVENT_SYS_MANAGER_INITED="EVENT_SYS_MANAGER_INITED",t.EVENT_USER_MANAGER_INITED="EVENT_USER_MANAGER_INITED",t.EVENT_MANAGER_INITED="EVENT_MANAGER_INITED",t.EVENT_MANAGER_FINISHED="EVENT_MANAGER_FINISHED",t}(u||{}),f={task:E,storage:c,debug:s,logger:a},N={},_={},I={},g={},h={},A={},T={},p=new r,d={};o.on(i.EVENT_RESET,(function(){l.clear(N),l.clear(_),l.clear(I),l.clear(g),l.clear(h),l.clear(A),l.clear(T),d={}}));var R=t("default",function(){function t(){this.lib=f,this.config=null,this.data=null,this.store=null,this.Controller=null,this.controller=null,this.Manager=null,this.manager=null,this.config=N,this.data=_,this.store=I,this.Controller=h,this.controller=g,this.Manager=A,this.manager=T,this.constructor===t||l.getClassById("App")||l.setClassAlias(this.constructor,"App")}var e=t.prototype;return e.on=function(t,n,e){d[t]&&n.call(e),p.on(t,n,e)},e.once=function(t,n,e){d[t]?n.call(e):p.once(t,n,e)},e.off=function(t,n,e){p.off(t,n,e)},e.targetOff=function(t){p.targetOff(t)},t.emit=function(t){d[t]=!0;for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];p.emit.apply(p,[t].concat(e))},n(t,null,[{key:"inst",get:function(){return this._inst||(this._inst=new t),this._inst}}]),t}());R.EventType=u,R._inst=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/debug.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){e("unobservable",(function(e,n){if(!e)return;!function(){try{t=e,r="unobservable",u=function(){n?n():function(e){if(e)for(var n=0,t=Object.keys(e);n<t.length;n++)delete e[t[n]]}(e)}.bind(null,"debugger"),Object.defineProperty(t,r,{get:u,set:c,enumerable:!1,configurable:!1})}catch(e){}var t,r,u,c}()})),n._RF.push({},"c0d5do7I/BADoW7bHVLnAjr","debug",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseManager.ts"],(function(e){var t,n,r,a,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,a=e.EventTarget},function(e){s=e.default}],execute:function(){var c;n._RF.push({},"b4ea6NEN3hCPZiqp3hRVbvU","EventManager",void 0);var i=r.ccclass;e("default",i("EventManager")(c=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).events=new Map,t}t(n,e);var r=n.prototype;return r.clear=function(){return this.events.clear()},r.delete=function(e){return this.events.delete(e)},r.get=function(e){if(this.events.has(e))return this.events.get(e);var t=new a;return this.events.set(e,t),t},n}(s))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/handle.ts",["cc"],(function(c){var n;return{setters:[function(c){n=c.cclegacy}],execute:function(){c({appInited:function(c){},appReady:function(c){},cccInited:function(c){},cccReady:function(c){}}),n._RF.push({},"8afafha+81CE6rLLpM3km/u","handle",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/JmClickComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,n,e,i,s;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,i=t.Node,s=t.Component}],execute:function(){var c;n._RF.push({},"06a62vKeqxAibN42pWEgAjY","JmClickComponent",void 0);var r=e.ccclass;e.property,t("JmClickComponent",r(c=function(t){function n(){for(var o,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return(o=t.call.apply(t,[this].concat(e))||this).performClick=!1,o.startPos=void 0,o}o(n,t);var e=n.prototype;return e.onEnable=function(){t.prototype.onEnable&&t.prototype.onEnable.call(this),this.node.on(i.EventType.TOUCH_START,this.OnClickTouchEnd,this),this.node.on(i.EventType.TOUCH_MOVE,this.OnClickTouchEnd,this),this.node.on(i.EventType.TOUCH_END,this.OnClickTouchEnd,this)},e.onDisable=function(){t.prototype.onDisable&&t.prototype.onDisable.call(this),this.node.off(i.EventType.TOUCH_START,this.OnClickTouchEnd,this),this.node.off(i.EventType.TOUCH_MOVE,this.OnClickTouchEnd,this),this.node.off(i.EventType.TOUCH_END,this.OnClickTouchEnd,this)},e.onDestroy=function(){t.prototype.onDestroy&&t.prototype.onDestroy.call(this)},e.OnClickTouchEnd=function(t){switch(t.getType()){case i.EventType.TOUCH_START:this.performClick=!0,this.startPos=t.getLocation();break;case i.EventType.TOUCH_MOVE:var o=t.getLocation();this.startPos.subtract(o).length()>5&&(this.performClick=!1);break;case i.EventType.TOUCH_END:this.performClick&&this.onItemClick(this),this.performClick=!1}},e.onItemClick=function(t){},n}(s))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/JmHorizontalListView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JmRefreshFooter.ts","./RefreshOrLoadState.ts"],(function(t){var e,i,o,n,s,r,h,l,a,c,f,u,d,g,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,h=t.ScrollView,l=t.Prefab,a=t.UITransform,c=t.Node,f=t.Vec2,u=t.instantiate,d=t.Component},function(t){g=t.default},function(t){m=t.RefreshOrLoadState}],execute:function(){var w,p,V,y,C,L,T,v,S,O,_,b,E;s._RF.push({},"9ed167QEHxIIYDM3iH9Ml8L","JmHorizontalListView",void 0);var W=r.ccclass,I=r.property,D=r.menu,P=r.requireComponent;t("default",(w=W(),p=P(h),V=D("UI 组件/JmHorizontalListView"),y=I(l),w(C=p(C=V((T=e((L=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,o(e,"itemPrefab",T,n(e)),o(e,"itemWidth",v,n(e)),o(e,"spacing",S,n(e)),o(e,"leftOffset",O,n(e)),o(e,"rightOffset",_,n(e)),o(e,"pullLeftToLoadEnabled",b,n(e)),o(e,"footerOffset",E,n(e)),e.footerController=void 0,e.onPullLeftToLoad=void 0,e.hasMore=!0,e.scrollView=void 0,e.footer=void 0,e.footerWidth=100,e._touchStartX=0,e._touchStartFromLeft=!1,e.footerHolderWidth=0,e.isUserTouched=!1,e.loadingState=m.NONE,e.componentName="JmListViewItem",e.showingViews=new Map,e.recycledViews=new Array,e.itemViewDirty=new Map,e.itemViewWidths=new Array,e._data=new Array,e._dirty=!1,e._sizeDirty=!1,e._checkRight=!1,e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.scrollView=this.node.getComponent(h),this.scrollView.content.getComponent(a).anchorX=0,this.scrollView.content.getComponent(a).anchorY=.5},s.onEnable=function(){this.scrollView.node.on(c.EventType.TOUCH_START,this.onTouchStart,this),this.scrollView.node.on(c.EventType.TOUCH_END,this.onTouchEnd,this),this.scrollView.node.on(c.EventType.TOUCH_MOVE,this.onTouchMove,this),this.scrollView.node.on(c.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.onDisable=function(){this.scrollView.node.off(c.EventType.TOUCH_START,this.onTouchStart,this),this.scrollView.node.off(c.EventType.TOUCH_END,this.onTouchEnd,this),this.scrollView.node.off(c.EventType.TOUCH_MOVE,this.onTouchMove,this),this.scrollView.node.off(c.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.onTouchStart=function(t){this.isUserTouched=!0,this._touchStartX=t.getLocationX(),this._touchStartFromLeft=Math.floor(this.scrollView.getScrollOffset().x)<=1},s.onTouchMove=function(t){},s.onTouchEnd=function(){this.isUserTouched=!1},s.onTouchCancel=function(){this.isUserTouched=!1},s.getData=function(){return this._data},s.setData=function(t){this._data=t},s.setComponentName=function(t){this.componentName=t},s.updateSize=function(){!this.scrollView.vertical&&this.scrollView.horizontal?this.scrollView.content.getComponent(a).width=this.getNormalContentWidth():console.log("scroll orientation must set vertical in ListView!")},s.getNormalContentWidth=function(){var t=this.getContentWidth();return this.pullLeftToLoadEnabled&&(t+=this.footerWidth),t<this.scrollView.node.getComponent(a).width&&(this.footerHolderWidth=this.scrollView.node.getComponent(a).width-t,t=this.scrollView.node.getComponent(a).width),t},s.getContentWidth=function(){return this.getItemPosOffset(this.getItemCount())+this.leftOffset+this.rightOffset},s.getItemPosOffset=function(t){for(var e=0,i=0;i<t;i++)e+=this.getItemWidthWithSpacing(i);return e},s.getItemWidthWithSpacing=function(t){return null!=t?(this.itemViewWidths[t]||this.itemWidth)+this.spacing:this.itemWidth+this.spacing},s.getListLeftRightVisiblePos=function(){var t=-this.scrollView.getScrollOffset().x;return[t,t+this.scrollView.node.getComponent(a).width]},s.isVisible=function(t){var e=this.getListLeftRightVisiblePos(),i=e[0],o=e[1],n=this.getItemPosOffset(t),s=n+this.getItemWidthWithSpacing(t);return n>=i&&n<=o||s>=i&&s<=o||n<=i&&s>=o},s.update=function(t){var e=this;if(this._dirty){for(var i=this._data,o=0;o<this.getItemCount();++o)if(this.isVisible(o)&&this.itemViewDirty.get(o)){var n=this.getItemView(o),s=n.getComponent(this.componentName);if(null==s)throw"ERROR! item view must implements"+this.componentName+" component!!";s.updateItem(o,i[o],this),null==this.itemViewWidths[o]&&(this.itemViewWidths[o]=s.getItemWidth()||this.itemWidth);var r=this.getItemPosOffset(o)+this.getItemWidthWithSpacing(o)*n.anchorX+this.leftOffset;n.setPosition(r,0),this._sizeDirty=!0,this.itemViewDirty.set(o,!1),null==n.parent&&this.scrollView.content.addChild(n)}this.showingViews.forEach((function(t,i){e.isVisible(i)&&null!=e._data&&null!=e._data[i]||null!=t&&e.recycleChild(i,t)})),this.checkFooterView(),this._dirty=!1}if(this._sizeDirty){var h=!1;this._checkRight&&(h=this.isRight()),this.updateSize(),h&&(this.scrollView.scrollToOffset(new f(this.scrollView.getMaxScrollOffset().x,0)),this._dirty=!0),this._sizeDirty=!1}},s.checkFooterView=function(){if(null==this.footerController&&null!=this.footer&&this.pullLeftToLoadEnabled){var t=u(this.footer),e=t.getComponent(g);this.footerController=e,this.scrollView.content.addChild(t),e.setState(m.NONE)}if(null!=this.footerController){var i=-this.getContentWidth()-this.footerWidth/2,o=-this.scrollView.content.getComponent(a).width+this.footerWidth/2+this.footerOffset;this.footerController.node.setPosition(Math.min(i,o),0)}},s.recycleChild=function(t,e){e.removeFromParent(),this.showingViews.delete(t),this.recycledViews.push(e),this.itemViewDirty.set(t,!0)},s.getItemCount=function(){return this._data?this._data.length:0},s.getItemView=function(t){var e=this.showingViews.get(t);return null==e&&this.itemViewDirty.set(t,!0),null==e&&(e=this.recycledViews.pop()),null==e&&(this.itemViewDirty.set(t,!0),e=u(this.itemPrefab)),this.showingViews.set(t,e),e},s.onScrollEvent=function(t,e){switch(e){case h.EventType.SCROLLING:this.startPullLeftLoad(),this._dirty=!0}},s.markChildrenDirty=function(){for(var t=0;t<this.getItemCount();t++)this.itemViewDirty.set(t,!0)},s.isRight=function(){return this.scrollView.getScrollOffset().x>=this.scrollView.getMaxScrollOffset().x},s.notifyChange=function(t){this._sizeDirty=!0,this._checkRight=t,this.markChildrenDirty(),this._dirty=!0},s.notifyItemChange=function(t){this.itemViewDirty.set(t,!0),this._dirty=!0},s.updateHeight=function(t,e){this.itemViewWidths[t]=e,this.notifyChange()},s.setPullLeftToLoadListener=function(t){this.onPullLeftToLoad=t},s.startPullLeftLoad=function(){if(this.pullLeftToLoadEnabled&&this.hasMore&&this.loadingState!=m.REFRESHING&&!this.isUserTouched){var t=[this.scrollView.getScrollOffset().y,this.scrollView.getMaxScrollOffset().y],e=t[0],i=t[1];Math.ceil(e)>=Math.floor(i)&&(this.updateLoadingState(m.REFRESHING),this.onPullLeftToLoad&&this.onPullLeftToLoad())}},s.onLoadComplete=function(t){void 0===t&&(t=!0),this.hasMore=t,t?this.updateLoadingState(m.NONE):this.updateLoadingState(m.COMPLETE),this.notifyChange()},s.updateLoadingState=function(t){this.loadingState!=t&&(this.loadingState=t,this.onLoadingStateChange(t))},s.onLoadingStateChange=function(t){this.footerController&&this.footerController.setState(t)},e}(d)).prototype,"itemPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(L.prototype,"itemWidth",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=e(L.prototype,"spacing",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=e(L.prototype,"leftOffset",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=e(L.prototype,"rightOffset",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=e(L.prototype,"pullLeftToLoadEnabled",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),E=e(L.prototype,"footerOffset",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=L))||C)||C)||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/JmListView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JmRefreshHeader.ts","./JmRefreshFooter.ts","./RefreshOrLoadState.ts","./BaseView.ts"],(function(t){var e,i,o,n,s,r,h,l,a,c,u,f,d,p,g,m,w,V,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,h=t.Prefab,l=t.Node,a=t.Sprite,c=t.SpriteFrame,u=t.ScrollView,f=t.UITransform,d=t.Vec2,p=t.instantiate,g=t.sys},function(t){m=t.default},function(t){w=t.default},function(t){V=t.RefreshOrLoadState},function(t){y=t.default}],execute:function(){var C,S,T,E,R,b,v,H,D,N,L,O,I,P,_,M,F,U,z,k,A;s._RF.push({},"e0697BlxFpBKJPKFMedIN+s","JmListView",void 0);var B=r.ccclass,x=r.property;t("default",(C=B("JmListView"),S=x(h),T=x(l),E=x(a),R=x(c),b=x(c),C((D=e((H=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,o(e,"itemPrefab",D,n(e)),o(e,"itemHeight",N,n(e)),o(e,"emptyView",L,n(e)),o(e,"emptyPic",O,n(e)),o(e,"noNetworkImg",I,n(e)),o(e,"emptyImg",P,n(e)),o(e,"spacing",_,n(e)),o(e,"topMargin",M,n(e)),o(e,"bottomMargin",F,n(e)),o(e,"pullDownToRefreshEnabled",U,n(e)),e.headerController=void 0,e.onPullDownToRefresh=void 0,o(e,"pullUpToLoadEnabled",z,n(e)),o(e,"footerOffset",k,n(e)),o(e,"refreshFooterShow",A,n(e)),e.footerController=void 0,e.onPullUpToLoad=void 0,e.hasMore=!0,e.scrollView=void 0,e.header=void 0,e.headerHeight=300,e.footer=void 0,e.footerHeight=250,e._touchStartY=0,e._touchStartFromTop=!1,e.isUserTouched=!1,e.refreshState=V.NONE,e.loadingState=V.NONE,e.componentName="JmListViewItem",e.footerHolderHeight=0,e.showingViews=new Map,e.recycledViews=new Array,e.itemViewDirty=new Map,e.itemViewHeights=new Array,e._data=new Array,e._dirty=!1,e._sizeDirty=!1,e._checkBottom=!1,e.extraData={},e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.scrollView=this.node.getComponent(u),!this.scrollView.elastic&&this.scrollView.bounceDuration>0&&this.pullDownToRefreshEnabled&&console.log("set elastic true or pullRefresh Events will not work!!"),this.scrollView.cancelInnerEvents&&(this.scrollView.cancelInnerEvents=!1)},s.onEnable=function(){this.scrollView.node.on(l.EventType.TOUCH_START,this.onTouchStart,this),this.scrollView.node.on(l.EventType.TOUCH_MOVE,this.onTouchMove,this),this.scrollView.node.on(l.EventType.TOUCH_END,this.onTouchEnd,this),this.scrollView.node.on(l.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.onDisable=function(){this.scrollView.node.off(l.EventType.TOUCH_START,this.onTouchStart,this),this.scrollView.node.off(l.EventType.TOUCH_MOVE,this.onTouchMove,this),this.scrollView.node.off(l.EventType.TOUCH_END,this.onTouchEnd,this),this.scrollView.node.off(l.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.onDestroy=function(){},s.onTouchStart=function(t){this.isUserTouched=!0,this._touchStartY=t.getLocationY(),this._touchStartFromTop=Math.floor(this.scrollView.getScrollOffset().y)<=1},s.onTouchMove=function(t){if(this.pullDownToRefreshEnabled){var e=t.getLocationY()-this._touchStartY;this.isUserTouched&&(this.checkPullDownRefresh(e),this.headerController&&this.headerController.onScrollOffset(e))}},s.onTouchEnd=function(){this.startPullDownRefresh(),this.isUserTouched=!1},s.onTouchCancel=function(){this.startPullDownRefresh(),this.isUserTouched=!1},s.getData=function(){return this._data||[]},s.setData=function(t){this._data=t},s.updateSize=function(){if(!this.scrollView.horizontal&&this.scrollView.vertical){var t=this.scrollView.content.getComponent(f).height,e=this.getNormalContentHeight();this.scrollView.content.getComponent(f).height=e,t>e&&this.notifyChange()}else console.log("scroll orientation must set vertical in ListView!")},s.getNormalContentHeight=function(){var t=this.getContentHeight();return this.pullUpToLoadEnabled&&this.refreshFooterShow&&(t+=this.footerHeight),t<this.scrollView.node.getComponent(f).height&&(this.footerHolderHeight=this.scrollView.node.getComponent(f).height-t,t=this.scrollView.node.getComponent(f).height),t},s.setComponentName=function(t){this.componentName=t},s.setTopMargin=function(t){this.topMargin=t},s.getContentHeight=function(){return this.getItemPosOffset(this.getItemCount())+this.topMargin+this.bottomMargin},s.getItemPosOffset=function(t){for(var e=0,i=0;i<t;i++)e+=this.getItemHeightWithSpacing(i);return e},s.getItemHeightWithSpacing=function(t){return null!=t?(this.itemViewHeights[t]||this.itemHeight)+this.spacing:this.itemHeight+this.spacing},s.getListTopBottomVisiblePos=function(){var t=this.scrollView.content.position.y,e=this.scrollView.node.getComponent(f).height/2,i=t+e;return[t-e,i+=this.headerHeight]},s.isVisible=function(t){var e=this.getListTopBottomVisiblePos(),i=e[0],o=e[1],n=this.getItemPosOffset(t)+this.topMargin,s=n+this.getItemHeightWithSpacing(t);return n>=i&&n<=o||s>=i&&s<=o||n<=i&&s>=o},s.update=function(t){var e=this;if(this.pullDownToRefreshEnabled&&this.refreshState==V.REFRESHING&&this.scrollView.content.setPosition(this.scrollView.node.getComponent(f).width/2,this.scrollView.node.getComponent(f).height/2-this.headerHeight),this._dirty){for(var i=this._data,o=0;o<this.getItemCount();++o)if(this.isVisible(o)&&this.itemViewDirty.get(o)){var n=this.getItemView(o);if(null==n)return void console.log("JmListView Child Is Null! "+this.componentName);var s=n.getComponent(this.componentName);if(null==s)throw"ERROR! item view must implements"+this.componentName+" component!!";s.updateItem(o,i[o],this),null==this.itemViewHeights[o]&&(this.itemViewHeights[o]=this.itemHeight);var r=-this.getItemPosOffset(o)-this.getItemHeightWithSpacing(o)*(1-n.getComponent(f).anchorY)-this.topMargin;n.setPosition(0,r),this._sizeDirty=!0,this.itemViewDirty.set(o,!1),null==n.parent&&this.scrollView.content.addChild(n)}this.showingViews.forEach((function(t,i){(!e.isVisible(i)||null==e._data||e._data.length-1<i)&&null!=t&&e.recycleChild(i,t)})),this.checkHeaderView(),this.checkFooterView(),this._dirty=!1}if(this._sizeDirty){var h=!1;this._checkBottom&&(h=this.isBottom()),this.updateSize(),h&&(this.scrollView.scrollToOffset(new d(0,this.scrollView.getMaxScrollOffset().y)),this._dirty=!0),this._sizeDirty=!1}},s.checkHeaderView=function(){if(null==this.headerController&&null!=this.header&&this.pullDownToRefreshEnabled){var t=p(this.header);t.setPosition(0,this.headerHeight/2-this.topMargin),this.scrollView.content.addChild(t);var e=t.getComponent(m);e.setState(this.refreshState),this.headerController=e}},s.checkFooterView=function(){if(null==this.footerController&&null!=this.footer&&this.pullUpToLoadEnabled){var t=p(this.footer);this.scrollView.content.addChild(t);var e=t.getComponent(w);e.setState(V.NONE),this.footerController=e}if(null!=this.footerController){var i=-this.getContentHeight()-this.footerHeight/2,o=-this.scrollView.content.getComponent(f).height+this.footerHeight/2+this.footerOffset;this.footerController.node.setPosition(0,Math.min(i,o)+this.bottomMargin)}},s.recycleChild=function(t,e){e.removeFromParent(),this.showingViews.delete(t),this.recycledViews.push(e),this.itemViewDirty.set(t,!0)},s.getItemCount=function(){return this._data?this._data.length:0},s.getItemView=function(t){var e=this.showingViews.get(t);return null!=e||this.itemViewDirty.set(t,!0),null==e&&(e=this.recycledViews.pop()),null==e&&(e=p(this.itemPrefab),this.itemViewDirty.set(t,!0)),this.showingViews.set(t,e),e},s.onScrollEvent=function(t,e){4==e&&(this.pullUpToLoadEnabled&&this.checkPullUpLoad(),this._dirty=!0)},s.markChildrenDirty=function(){for(var t=0;t<this.getItemCount();t++)this.itemViewDirty.set(t,!0)},s.isBottom=function(){return this.scrollView.getScrollOffset().y>=this.scrollView.getMaxScrollOffset().y},s.notifyChange=function(t){0==this.getItemCount()?this.emptyView&&(this.emptyView.active=!0,g.getNetworkType()==g.NetworkType.NONE&&this.noNetworkImg?this.emptyPic.spriteFrame=this.noNetworkImg:this.emptyImg&&(this.emptyPic.spriteFrame=this.emptyImg),this.updateLoadingState(V.NONE)):(this.emptyView&&(this.emptyView.active=!1),this._sizeDirty=!0,this._checkBottom=t,this.markChildrenDirty()),this._dirty=!0},s.notifyItemChange=function(t){this.itemViewDirty.set(t,!0),this._dirty=!0},s.updateHeight=function(t,e){this.itemViewHeights[t]=e,this.notifyChange()},s.setPullUpToLoadListener=function(t){this.onPullUpToLoad=t},s.setPullDownToRefreshListener=function(t){this.onPullDownToRefresh=t},s.checkPullDownRefresh=function(t){this.pullDownToRefreshEnabled&&this.refreshState!=V.REFRESHING&&this.loadingState!=V.REFRESHING&&(this._touchStartFromTop&&t<1.5*-this.headerHeight?this.updateRefreshState(V.READY_TO_REFRESH):this.updateRefreshState(V.NONE))},s.checkPullUpLoad=function(){if(this.pullUpToLoadEnabled&&this.hasMore&&this.loadingState!=V.REFRESHING&&this.refreshState!=V.REFRESHING&&!this.isUserTouched){var t=[this.scrollView.getScrollOffset().y,this.scrollView.getMaxScrollOffset().y],e=t[0],i=t[1];Math.ceil(e)>=Math.floor(i)&&(this.updateLoadingState(V.REFRESHING),this.onPullUpToLoad&&this.onPullUpToLoad())}},s.pullDownRefresh=function(){var t=this;this.scrollView.stopAutoScroll(),this.scrollView.content.setPosition(this.scrollView.node.getComponent(f).width/2,this.scrollView.node.getComponent(f).height/2-this.headerHeight),this._dirty=!0,this.updateRefreshState(V.REFRESHING),this.scheduleOnce((function(){null!=t.onPullDownToRefresh&&t.onPullDownToRefresh()}),1.5)},s.startPullDownRefresh=function(){var t=this;this.pullDownToRefreshEnabled&&this.refreshState==V.READY_TO_REFRESH&&this.loadingState!=V.REFRESHING?(this.updateRefreshState(V.REFRESHING),this.scheduleOnce((function(){null!=t.onPullDownToRefresh&&t.onPullDownToRefresh()}),1.5)):this.headerController&&this.headerController.onScrollOffset(0)},s.onRefreshComplete=function(t){void 0===t&&(t=!0),(this.hasMore=this.getItemCount()>0)?this.updateLoadingState(V.NONE):this.updateLoadingState(V.EMPTY),t||this.updateRefreshState(V.NONE),this.notifyChange()},s.stopPullDownRefresh=function(){this.updateRefreshState(V.COMPLETING),this.headerController&&this.headerController.onScrollOffset(0),this.scrollView.content.setPosition(this.scrollView.node.getComponent(f).width/2,this.scrollView.node.getComponent(f).height/2)},s.onLoadComplete=function(t){void 0===t&&(t=!0),this.hasMore=t,t?this.updateLoadingState(V.NONE):this.updateLoadingState(V.COMPLETE),this.notifyChange()},s.updateRefreshState=function(t){this.refreshState!=t&&(this.refreshState=t,this.onRefreshStateChange(t))},s.onRefreshStateChange=function(t){this.headerController&&this.headerController.setState(t)},s.updateLoadingState=function(t){this.loadingState!=t&&(this.loadingState=t,this.onLoadingStateChange(t))},s.onLoadingStateChange=function(t){this.footerController&&this.footerController.setState(t)},s.setExtraData=function(t,e){this.extraData[t]=e},s.getExtraData=function(t){return this.extraData[t]},e.handleSuccess=function(t,e,i,o,n){if(void 0===n&&(n=!0),i.node.isValid){var s,r=i.getData();e?s=r.concat(t):Array.isArray(t)&&(s=t),i.setData(s),e?i.onLoadComplete(null==o?t.length>0:o):i.onRefreshComplete(n)}},e.handleFailure=function(t,e,i){void 0===i&&(i=!0),t.node.isValid&&(e?t.onLoadComplete(!0):t.onRefreshComplete(i))},e}(y)).prototype,"itemPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(H.prototype,"itemHeight",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=e(H.prototype,"emptyView",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(H.prototype,"emptyPic",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(H.prototype,"noNetworkImg",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(H.prototype,"emptyImg",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(H.prototype,"spacing",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=e(H.prototype,"topMargin",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),F=e(H.prototype,"bottomMargin",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=e(H.prototype,"pullDownToRefreshEnabled",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=e(H.prototype,"pullUpToLoadEnabled",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=e(H.prototype,"footerOffset",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=e(H.prototype,"refreshFooterShow",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=H))||v)),t("Orientation",function(t){return t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t}({}));s._RF.pop()}}}));

System.register("chunks:///_virtual/JmListViewItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts"],(function(t){var e,o,n,i,s;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,i=t.Node},function(t){s=t.default}],execute:function(){var c;o._RF.push({},"042dbWnrqpPIqHcYTDpkJsk","JmListViewItem",void 0);var h=n.ccclass;t("default",h(c=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).itemId=void 0,e.listView=void 0,e.performClick=!1,e.startPos=void 0,e}e(o,t);var n=o.prototype;return n.onLoad=function(){t.prototype.onLoad&&t.prototype.onLoad.call(this)},n.onEnable=function(){this.node.on(i.EventType.TOUCH_START,this.onTouchEvent,this),this.node.on(i.EventType.TOUCH_MOVE,this.onTouchEvent,this),this.node.on(i.EventType.TOUCH_END,this.onTouchEvent,this)},n.onDisable=function(){this.node.off(i.EventType.TOUCH_START,this.onTouchEvent,this),this.node.off(i.EventType.TOUCH_MOVE,this.onTouchEvent,this),this.node.off(i.EventType.TOUCH_END,this.onTouchEvent,this)},n.onTouchEvent=function(t){switch(t.getType()){case i.EventType.TOUCH_START:this.performClick=!0,this.startPos=t.getLocation();break;case i.EventType.TOUCH_MOVE:var e=t.getLocation(),o=Math.abs(this.startPos.x-e.x),n=Math.abs(this.startPos.y-e.y);(o>5||n>5)&&(this.performClick=!1);break;case i.EventType.TOUCH_END:this.performClick&&this.onItemClick(t),this.performClick=!1}},n.onItemClick=function(t){},n.updateItem=function(t,e,o){this.itemId=t,this.listView=o},n.getItemHeight=function(){},n.getItemWidth=function(){},o}(s))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/JmNodePoolMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var e,t,l,n,i,r;return{setters:[function(o){e=o.inheritsLoose,t=o.createClass},function(o){l=o.cclegacy,n=o.NodePool,i=o.instantiate,r=o.isValid}],execute:function(){l._RF.push({},"7c980D95kVPeofPOykG23qy","JmNodePoolMgr",void 0);var a=o("JmNodePool",function(o){function l(){for(var e,t=arguments.length,l=new Array(t),n=0;n<t;n++)l[n]=arguments[n];return(e=o.call.apply(o,[this].concat(l))||this)._cellPfb=void 0,e}return e(l,o),t(l,[{key:"cellPfb",get:function(){return this._cellPfb},set:function(o){this._cellPfb=o}}]),l}(n)),c=o("default",function(){function o(){}return o.InitNodePool=function(o,e,t){this.DestroyPool(o);var l=new a(t);l.cellPfb=e,this._nodePoolData.set(o,l)},o.GetCell=function(o){var e,t=this.GetPool(o);if(t)return(e=t.size()?t.get():i(t.cellPfb)).active=!0,e},o.PutCell=function(o,e){var t=this.GetPool(o);t&&(e.active=!1,t.put(e))},o.DestroyPool=function(o){var e=this._nodePoolData.get(o);if(e){for(var t=0;t<e.size();t++){var l=e.get();r(l,!0)&&(l.active=!1,l.destroy())}e.clear(),this._nodePoolData.delete(o)}},o.GetPool=function(o){var e=this._nodePoolData.get(o);if(e)return e;console.log("JmNodePoolMgr.GetPool!The pool is null! please instance it! "+o)},o}());c._nodePoolData=new Map,c.IdentityCellPool="IDENTITY_CELL_POOL",l._RF.pop()}}}));

System.register("chunks:///_virtual/JmRefreshFooter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RefreshOrLoadState.ts"],(function(e){var t,i,r,n,a,o,c,s,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.Label,s=e.Sprite,l=e.Component},function(e){u=e.RefreshOrLoadState}],execute:function(){var p,f,d,h,g,m;a._RF.push({},"c2fe1IKDFRCtLohnkWQ3mKu","JmRefreshFooter",void 0);var y=o.ccclass,v=o.property;e("default",(p=v(c),f=v(s),y((g=t((h=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"loading",g,n(t)),r(t,"emptyImg",m,n(t)),t}i(t,e);var a=t.prototype;return a.setState=function(e){switch(e){case u.NONE:case u.EMPTY:this.loading.node.active=!1,this.emptyImg.node.active=!1;break;case u.READY_TO_REFRESH:break;case u.REFRESHING:this.loading.node.active=!0,this.loading.string="加载数据中",this.emptyImg.node.active=!1;break;case u.COMPLETE:this.emptyImg.node.active=!0,this.loading.node.active=!1}},a.start=function(){},t}(l)).prototype,"loading",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(h.prototype,"emptyImg",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=h))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/JmRefreshHeader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RefreshOrLoadState.ts"],(function(e){var t,r,n,i,o,a,s,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Skeleton,c=e.Component},function(e){l=e.RefreshOrLoadState}],execute:function(){var f,u,p,h;o._RF.push({},"df9d9WVzIhEEp1PytXQ68l6","JmRefreshHeader",void 0);var d=a.ccclass,y=a.property;e("default",(f=y(s),d((h=t((p=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"refreshSpine",h,i(t)),t._state=l.NONE,t}r(t,e);var o=t.prototype;return o.start=function(){},o.onScrollOffset=function(e){e<-40&&(e=-40),this.refreshSpine.node.y=e-50},o.setState=function(e){this._state=e},t}(c)).prototype,"refreshSpine",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=p))||u));o._RF.pop()}}}));

System.register("chunks:///_virtual/JmRoomData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseData.ts"],(function(t){var o,a,n;return{setters:[function(t){o=t.inheritsLoose},function(t){a=t.cclegacy},function(t){n=t.default}],execute:function(){a._RF.push({},"f1d97XKzQFOQIrapJwyx2uo","JmRoomData",void 0);t("default",function(t){function a(){var o;return(o=t.call(this)||this)._roomData=void 0,o._roomData={},o}o(a,t);var n=a.prototype;return n.initRoomData=function(t){this.updateRoomData(t)},n.updateRoomProperty=function(t,o){this._roomData[t]=o},n.updateRoomData=function(t){for(var o in null==this._roomData&&(this._roomData={}),t)this.updateRoomProperty(o,t[o])},n.getIdentities=function(){return this._roomData.identities},n.getIdentity=function(){return this._roomData.identity},n.getRoomNum=function(){return this._roomData.roomNum},n.getSeats=function(){return this._roomData.seats},a}(n));a._RF.pop()}}}));

System.register("chunks:///_virtual/JmRoomDataMgr.ts",["cc","./JmRoomData.ts"],(function(t){var o,e;return{setters:[function(t){o=t.cclegacy},function(t){e=t.default}],execute:function(){o._RF.push({},"a2ef4VCWT1BFatm1wCYcUyM","JmRoomDataMgr",void 0);var n=t("default",function(){function t(){}return t.OnReceiveServerData=function(t){this.InitRoomsData(t)},t.InitRoomsData=function(t){for(var o=0,e=t.length;o<e;o++)this.InitRoomData(t[o])},t.InitRoomData=function(t){var o=t.recordId;o&&this.GetRoom(o).initRoomData(t)},t.CreateRoom=function(t){this.InitCurrentRoom(t)},t.CleanRooms=function(){this._offset=0,this._roomsData.clear(),this._roomCfg.clear(),this._roomsKeys=[],this._gameState=2},t.CleanRoom=function(t){var o=this._roomsData.get(t);o&&(o=null,this._roomsData.delete(t))},t.GetOffSet=function(){return this._offset||0},t.GetRoomByRoomKey=function(t){var o=this._roomsData.get(t);return o||null},t.GetRoomNum=function(){return this.GetRoomByRoomKey(this._currentRoomKey).getRoomNum()},t.GetRoomIdentities=function(){return this.GetRoomByRoomKey(this._currentRoomKey).getIdentities()},t.GetRoomIdentity=function(){return this.GetRoomByRoomKey(this._currentRoomKey).getIdentity()},t.GetRoomSeats=function(){return this.GetRoomByRoomKey(this._currentRoomKey).getSeats()},t.InitCurrentRoomProto=function(t){var o=t.recordId;this._roomCount=t.players,this.GetRoom(o).initRoomData(t),this._gameState=t.status,this._currentRoomData=t,this._currentRoomKey=o,this._joinRoomsList.unshift(t.roomNum)},t.InitCurrentRoom=function(t){console.log("JmRoomDataMgr.InitCurrentRoom "+JSON.stringify(t));var o=t.recordId;this._isOwner=t.judge,this._roomCount=t.players,this.GetRoom(o).initRoomData(t),this._gameState=t.status,this._currentRoomData=t,this._currentRoomKey=o,this._joinRoomsList.unshift(t.roomNum)},t.GetRoom=function(t){var o=this._roomsData.get(t);return o||(o=new e,this._roomsData.set(t,o),this._roomsKeys.push(t)),o},t.GetCurrentRoomInfo=function(){return this._currentRoomData},t.GetCurrentRoomKey=function(){return this._currentRoomKey||0},t.SetCurrentNullRoomKey=function(){this._currentRoomKey=null},t.SetRoomDayOrNight=function(t){this.currentType=t},t.GetRoomDayOrNight=function(){return this.currentType},t.delRoomCfg=function(t){this._roomCfg.delete(t)},t.setRoomCfg=function(t,o){this._roomCfg.set(t,o)},t.getRoomCfg=function(){return this._roomCfg},t.getRoomCount=function(){return this._roomCount},t.setRoomCount=function(t){this._roomCount=t},t.setGameState=function(t){this._gameState=t},t.getGameState=function(){return this._gameState},t.setGameDay=function(t){this._isDay=t},t.getGameDay=function(){return this._isDay},t.setOwner=function(t){this._isOwner=t},t.isOwner=function(){return this._isOwner},t.getLoadKey=function(){return this._loadKey},t.setLoadKey=function(t){this._loadKey=t},t}());n._roomsData=new Map,n._roomsKeys=[],n._joinRoomsList=[],n._offset=0,n._currentRoomData=void 0,n._currentRoomKey=void 0,n.currentType=0,n._roomCfg=new Map,n._roomCount=0,n._gameState=2,n._isDay=!0,n._isOwner=!1,n._loadKey=!0,o._RF.pop()}}}));

System.register("chunks:///_virtual/LoaderManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseManager.ts","./Core.ts"],(function(e){var n,o,t,r,a,l,s,i,u,p,c,d,f,m,h,g,C;return{setters:[function(e){n=e.extends,o=e.inheritsLoose},function(e){t=e.cclegacy,r=e._decorator,a=e.isValid,l=e.Font,s=e.sp,i=e.SpriteFrame,u=e.SceneAsset,p=e.assetManager,c=e.Asset,d=e.path,f=e.AssetManager,m=e.Texture2D,h=e.TextureCube},function(e){g=e.default},function(e){C=e.default}],execute:function(){var v,M;t._RF.push({},"b3bf5M3DHNHcYe1nnNZYr6B","LoaderManager",void 0);var b=r.ccclass,F=/^https?:\/\/.*/,S=function(){function e(){this.onProgress=[],this.onComplete=[]}return e.create=function(n,o){void 0===o&&(o=null);var t=e.cache.pop()||new e;return o&&t.onProgress.push(o),n&&t.onComplete.push(n),t},e.put=function(n){n.onProgress.length=0,n.onComplete.length=0,e.cache.push(n)},e}();S.cache=[];var P=function(){function e(){this.assetMap=new Map,this.loadingMap=new Map}var o=e.prototype;return o.preload=function(e){return C.inst.manager.loader.preload(e)},o.preloadDir=function(e){return C.inst.manager.loader.preloadDir(e)},o.load=function(e){var o=this,t=(e.bundle||"resources")+"-"+e.type.name+"-"+e.path+"-"+(e.version||"");if(this.loadingMap.has(t)){var r=this.loadingMap.get(t);return e.onProgress&&r.onProgress.push(e.onProgress),void(e.onComplete&&r.onComplete.push(e.onComplete))}var a=S.create(e.onComplete,e.onProgress);if(this.loadingMap.set(t,a),this.assetMap.has(t)){var l=this.assetMap.get(t);setTimeout((function(){o.loadingMap.has(t)&&(o.loadingMap.delete(t),a.onComplete.forEach((function(e){return e(l)})),S.put(a))}),0)}else C.inst.manager.loader.load(n({},e,{onProgress:function(e,n,r){o.loadingMap.has(t)&&a.onProgress.forEach((function(o){return o(e,n,r)}))},onComplete:function(e){if(!o.loadingMap.has(t))return e.addRef(),void e.decRef();o.loadingMap.delete(t),e&&(e.addRef(),o.assetMap.set(t,e)),a.onComplete.forEach((function(n){return n(e)})),S.put(a)}}))},o.loadAsync=function(e){var o=this;return new Promise((function(t){o.load(n({},e,{onComplete:t}))}))},o.loadDir=function(e){var o=this,t=(e.bundle||"resources")+"-"+e.type.name+"-"+e.path+"-"+(e.version||"")+":";if(this.loadingMap.has(t)){var r=this.loadingMap.get(t);return e.onProgress&&r.onProgress.push(e.onProgress),void(e.onComplete&&r.onComplete.push(e.onComplete))}var a=S.create(e.onComplete,e.onProgress);this.loadingMap.set(t,a);var l=[];this.assetMap.forEach((function(e,n){0===n.indexOf(t)&&l.push(e)})),l.length?setTimeout((function(){o.loadingMap.has(t)&&(o.loadingMap.delete(t),a.onComplete.forEach((function(e){return e(l)})),S.put(a))}),0):C.inst.manager.loader.loadDir(n({},e,{onProgress:function(e,n,r){o.loadingMap.has(t)&&a.onProgress.forEach((function(o){return o(e,n,r)}))},onComplete:function(e){o.loadingMap.has(t)?(o.loadingMap.delete(t),null==e||e.forEach((function(e){e.addRef(),o.assetMap.set(t+e.uuid,e)})),a.onComplete.forEach((function(e){return e(l)})),S.put(a)):null==e||e.forEach((function(e){e.addRef(),e.decRef()}))}}))},o.loadDirAsync=function(e){var o=this;return new Promise((function(t){o.loadDir(n({},e,{onComplete:t}))}))},o.loadRemote=function(e){var n=this,o=e.url,t=e.ext,r=e.onComplete;if(this.loadingMap.has(o)){var a=this.loadingMap.get(o);r&&a.onComplete.push(r)}else{var l=S.create(r);if(this.loadingMap.set(o,l),this.assetMap.has(o)){var s=this.assetMap.get(o);setTimeout((function(){n.loadingMap.has(o)&&(n.loadingMap.delete(o),l.onComplete.forEach((function(e){return e(s)})),S.put(l))}),0)}else C.inst.manager.loader.loadRemote({url:o,ext:t,onComplete:function(e){if(!n.loadingMap.has(o))return e.addRef(),void e.decRef();n.loadingMap.delete(o),e&&(e.addRef(),n.assetMap.set(o,e)),l.onComplete.forEach((function(n){return n(e)})),S.put(l)}})}},o.loadRemoteAsync=function(e){var o=this;return new Promise((function(t){o.loadRemote(n({},e,{onComplete:t}))}))},o.setFont=function(e){e.url?this.loadRemote({url:e.url,ext:e.ext,onComplete:function(n){if(!n||!a(e.target))return e.onFail&&e.onFail(),void(e.onComplete&&e.onComplete(!1));e.target.font=n,e.onSuccess&&e.onSuccess(),e.onComplete&&e.onComplete(!0)}}):this.load({path:e.path,bundle:e.bundle,type:l,onComplete:function(n){if(!n||!a(e.target))return e.onFail&&e.onFail(),void(e.onComplete&&e.onComplete(!1));e.target.font=n,e.onSuccess&&e.onSuccess(),e.onComplete&&e.onComplete(!0)}})},o.setSpine=function(e){this.load({path:e.path,bundle:e.bundle,type:s.SkeletonData,onComplete:function(n){if(!n||!a(e.target))return e.onFail&&e.onFail(),void(e.onComplete&&e.onComplete(!1));e.target.skeletonData=n,e.onSuccess&&e.onSuccess(),e.onComplete&&e.onComplete(!0)}})},o.setSprite=function(e){e.url?this.loadRemote({url:e.url,ext:e.ext,onComplete:function(n){if(!n||!a(e.target))return e.onFail&&e.onFail(),void(e.onComplete&&e.onComplete(!1));var o=i.createWithImage(n);e.target.spriteFrame=o,e.onSuccess&&e.onSuccess(),e.onComplete&&e.onComplete(!0)}}):this.load({path:e.path,bundle:e.bundle,type:i,onComplete:function(n){if(!n||!a(e.target))return e.onFail&&e.onFail(),void(e.onComplete&&e.onComplete(!1));e.target.spriteFrame=n,e.onSuccess&&e.onSuccess(),e.onComplete&&e.onComplete(!0)}})},o.releaseAll=function(){var e=[];this.assetMap.forEach((function(n){return e.push(n)})),this.assetMap.clear(),this.loadingMap.clear(),setTimeout((function(){e.forEach((function(e){return e.decRef()}))}),1e3)},e}();e("default",b("LoaderManager")(((M=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var r=t.prototype;return r.handle=function(e,n){var o=this,t=n.bundle,r=n.version,a=n.path,l=n.type,s=n.onProgress,u=n.onComplete;if(!e)return this.error("handle is empty"),u&&u(null);if(!a)return this.error(e+" fail. path is empty"),u&&u(null);t||(t="resources");var p=[a];l&&p.push(l),s&&p.push(s),p.push((function(n,t){n?(o.error(e+' "'+a+'" fail',n),l===i&&"/spriteFrame"!==a.slice(-12)?o.warn("加载SpriteFrame类型的资源, 路径可能需要以/spriteFrame结尾, 如: 「"+a+"」 -> 「"+a+"/spriteFrame」"):l===m&&"/texture"!==a.slice(-8)?o.warn("加载Texture2D类型的资源, 路径可能需要以/texture结尾, 如: 「"+a+"」 -> 「"+a+"/texture」"):l===h&&"/textureCube"!==a.slice(-12)&&o.warn("加载TextureCube类型的资源, 路径可能需要以/textureCube结尾, 如: 「"+a+"」 -> 「"+a+"/textureCube」"),u&&u(null)):u&&u(t)})),this.loadBundle({bundle:t,version:r,onComplete:function(n){if(!n)return u&&u(null);n[e](p[0],p[1],p[2],p[3])}})},r.preload=function(e){u===e.type?this.handle("preloadScene",{path:e.path,bundle:e.bundle,version:e.version,onProgress:e.onProgress,onComplete:e.onComplete}):this.handle("preload",e)},r.preloadDir=function(e){this.handle("preloadDir",e)},r.load=function(e){u===e.type?this.handle("loadScene",{path:e.path,bundle:e.bundle,version:e.version,onProgress:e.onProgress,onComplete:e.onComplete}):this.handle("load",e)},r.loadAsync=function(e){var o=this;return new Promise((function(t){o.load(n({},e,{onComplete:t}))}))},r.loadDir=function(e){this.handle("loadDir",e)},r.loadDirAsync=function(e){var o=this;return new Promise((function(t){o.loadDir(n({},e,{onComplete:t}))}))},r.release=function(e){var n,o=e.path,t=e.bundle,r=e.type;t||(t="resources"),null==(n=p.getBundle(t))||n.release(o,r)},r.releaseAll=function(e){e||(e="resources");var n=p.getBundle(e);n&&n.getDirWithPath("/",c).forEach((function(e){n.release(e.path,e.ctor)}))},r.releaseUnused=function(e){var n;e||(e="resources"),null==(n=p.getBundle(e))||n.releaseUnusedAssets()},r.loadBundle=function(e){var n=e.bundle,o=e.version,t=e.onComplete;n||(n="resources"),o?p.loadBundle(n,{version:o},(function(e,n){t&&t(e?null:n)})):p.loadBundle(n,(function(e,n){t&&t(e?null:n)}))},r.loadBundleAsync=function(e){var o=this;return new Promise((function(t){o.loadBundle(n({},e,{onComplete:t}))}))},r.getBundle=function(e){return e||(e="resources"),p.getBundle(e)},r.removeBundle=function(e){e||(e="resources");var n=p.getBundle(e);n&&p.removeBundle(n)},r.reloadBundle=function(e){var n,o=this,t=e.bundle,r=e.version,a=e.onComplete;t||(t="resources");var l="",s="";F.test(t)?s=(l=t)+"config."+(r?r+".":"")+"json":(l=p.downloader.remoteServerAddress+"remote/"+t+"/",s=l+"config."+(r?r+".":"")+"json");null==(n=p.cacheManager)||n.removeCache(s),p.loadRemote(s,(function(e,n){if(e)return o.error("下载Bundle配置失败: "+s),void(null==a||a(null));o.releaseAll(d.basename(t)),o.removeBundle(d.basename(t));var r=new f.Bundle,i=n.json;i.base=l,r.init(i),null==a||a(r)}))},r.reloadBundleAsync=function(e){var o=this;return new Promise((function(t){o.reloadBundle(n({},e,{onComplete:t}))}))},r.loadRemote=function(e){var n=this,o=e.url,t=e.ext,r=e.onComplete;t?p.loadRemote(o,{ext:t},(function(e,t){if(e)return n.error("loadRemote "+o+" fail"),r&&r(null);r&&r(t)})):p.loadRemote(o,(function(e,t){if(e)return n.error("loadRemote "+o+" fail"),r&&r(null);r&&r(t)}))},r.loadRemoteAsync=function(e){var o=this;return new Promise((function(t){o.loadRemote(n({},e,{onComplete:t}))}))},r.setFont=function(e){e.url?this.loadRemote({url:e.url,ext:e.ext,onComplete:function(n){if(!n||!a(e.target))return e.onFail&&e.onFail(),void(e.onComplete&&e.onComplete(!1));e.target.font=n,e.onSuccess&&e.onSuccess(),e.onComplete&&e.onComplete(!0)}}):this.load({path:e.path,bundle:e.bundle,type:l,onComplete:function(n){if(!n||!a(e.target))return e.onFail&&e.onFail(),void(e.onComplete&&e.onComplete(!1));e.target.font=n,e.onSuccess&&e.onSuccess(),e.onComplete&&e.onComplete(!0)}})},r.setSpine=function(e){this.load({path:e.path,bundle:e.bundle,type:s.SkeletonData,onComplete:function(n){if(!n||!a(e.target))return e.onFail&&e.onFail(),void(e.onComplete&&e.onComplete(!1));e.target.skeletonData=n,e.onSuccess&&e.onSuccess(),e.onComplete&&e.onComplete(!0)}})},r.setSprite=function(e){e.url?this.loadRemote({url:e.url,ext:e.ext,onComplete:function(n){if(!n||!a(e.target))return e.onFail&&e.onFail(),void(e.onComplete&&e.onComplete(!1));var o=i.createWithImage(n);e.target.spriteFrame=o,e.onSuccess&&e.onSuccess(),e.onComplete&&e.onComplete(!0)}}):this.load({path:e.path,bundle:e.bundle,type:i,onComplete:function(n){if(!n||!a(e.target))return e.onFail&&e.onFail(),void(e.onComplete&&e.onComplete(!1));e.target.spriteFrame=n,e.onSuccess&&e.onSuccess(),e.onComplete&&e.onComplete(!0)}})},t}(g)).Loader=P,v=M))||v);t._RF.pop()}}}));

System.register("chunks:///_virtual/logger.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy}],execute:function(){function r(){}n._RF.push({},"0b581Lotn1LqYPYEsoeRs/Q","logger",void 0);var o=e("Logger",function(){function e(){}return e.create=function(e,t,n,o){return-1==this.setting.filter.indexOf(e)?r:window.console[e].bind(window.console,n+" ["+(new Date).toLocaleString()+"]")},t(e,[{key:"log",get:function(){return e.create("log","#6495ed","[LOG]","#000")}},{key:"warn",get:function(){return e.create("warn","#ff7f50","[WARN]","#000")}},{key:"error",get:function(){return e.create("error","#ff4757","[ERROR]","#000")}},{key:"debug",get:function(){return e.create("log","#ff6347","[DEBUG]","#000")}},{key:"success",get:function(){return e.create("log","#00ae9d","[SUCC]","#000")}}]),e}());o.setting={filter:["error","log","warn"]};e("default",new o);n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AppInit.ts","./app.ts","./handle.ts","./setting.ts","./BaseData.ts","./JmRoomData.ts","./JmRoomDataMgr.ts","./JmClickComponent.ts","./JmHorizontalListView.ts","./JmListView.ts","./JmListViewItem.ts","./JmNodePoolMgr.ts","./JmRefreshFooter.ts","./JmRefreshHeader.ts","./RefreshOrLoadState.ts","./Core.ts","./BaseAppInit.ts","./BaseControl.ts","./BaseController.ts","./BaseManager.ts","./BaseModel.ts","./BaseView.ts","./debug.ts","./logger.ts","./storage.ts","./task.ts","./EventManager.ts","./LoaderManager.ts","./Audio.ts","./AudioEngine.ts","./AudioManager.ts","./SoundManager.ts","./TimerManager.ts","./UIManager.ts","./UIMgrLoading.ts","./UIMgrShade.ts","./UIMgrToast.ts","./UIMgrToastCell.ts","./UIMgrZOrder.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/RefreshOrLoadState.ts",["cc"],(function(e){var E;return{setters:[function(e){E=e.cclegacy}],execute:function(){E._RF.push({},"3fe70F82vZMAIjqh8gIdMaF","RefreshOrLoadState",void 0);e("RefreshOrLoadState",function(e){return e[e.NONE=0]="NONE",e[e.READY_TO_REFRESH=1]="READY_TO_REFRESH",e[e.REFRESHING=2]="REFRESHING",e[e.COMPLETE=3]="COMPLETE",e[e.COMPLETING=4]="COMPLETING",e[e.EMPTY=5]="EMPTY",e}({}));E._RF.pop()}}}));

System.register("chunks:///_virtual/setting.ts",["cc","./SoundManager.ts","./UIManager.ts"],(function(){var t,e,n;return{setters:[function(e){t=e.cclegacy},function(t){e=t.default},function(t){n=t.default}],execute:function(){t._RF.push({},"9a8d2pAnrJAWIiDp94P7b0z","setting",void 0),n.setting.preload=["PageMain"],n.setting.defaultUI="PageMain",n.setting.autoFit=!0,n.setting.shade={delay:0,begin:100,end:200,speed:400,blur:!0},e.setting.preload=[],e.setting.defaultMusicName="",e.setting.defaultEffectName="effect/button",t._RF.pop()}}}));

System.register("chunks:///_virtual/SoundManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts","./BaseManager.ts","./AudioEngine.ts"],(function(e){var t,i,n,u,s,a,l,c,o,f,r,h,p,d,m,y;return{setters:[function(e){t=e.inheritsLoose,i=e.extends,n=e.createClass,u=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){a=e.cclegacy,l=e._decorator,c=e.AudioClip,o=e.game,f=e.Game,r=e.isValid,h=e.Button,p=e.sys},function(e){d=e.default},function(e){m=e.default},function(e){y=e.default}],execute:function(){var g,M;a._RF.push({},"58002Ha2adOWbt2LDr8rmBT","SoundManager",void 0);var v=l.ccclass,E=function(e,t){p.localStorage.setItem(e,JSON.stringify(t))},V=function(e){var t=p.localStorage.getItem(e);if(t&&"string"==typeof t)return JSON.parse(t)},S=new Proxy({},{get:function(e,t){return e[t]?e[t]:(e[t]=t,t)}}),C=new Proxy({},{get:function(e,t){return e[t]?e[t]:(e[t]=t,t)}}),b="app-sound";e("default",v("SoundManager")(((M=function(e){function a(){for(var t,i=arguments.length,n=new Array(i),u=0;u<i;u++)n[u]=arguments[u];return(t=e.call.apply(e,[this].concat(n))||this).musicMuteCacheKey="SoundManager:MusicMute",t.effectMuteCacheKey="SoundManager:EffectMute",t.musicVolumeScaleCacheKey="SoundManager:MusicVolumeScale",t.effectVolumeScaleCacheKey="SoundManager:EffectVolumeScale",t.defaultMusicName="",t.defaultMusicVolume=1,t.defaultEffectName="",t.defaultEffectVolume=1,t.audioCache={},t.effectInterval={},t.playingMusic={uuid:"",id:-1,name:"",volume:1,playing:!1,paused:!1},t}t(a,e);var l=a.prototype;return l.init=function(t){var i,n=a.setting;if(n.defaultMusicName&&(this.defaultMusicName=n.defaultMusicName),"number"==typeof n.defaultMusicVolume&&(this.defaultMusicVolume=n.defaultMusicVolume),n.defaultEffectName&&(this.defaultEffectName=n.defaultEffectName),"number"==typeof n.defaultEffectVolume&&(this.defaultEffectVolume=n.defaultEffectVolume),this.musicMuteCacheKey){var u=!0===V(this.musicMuteCacheKey);y.inst.setMusicMute(u)}else this.warn("musicMuteCacheKey不能为空");if(this.effectMuteCacheKey){var s=!0===V(this.effectMuteCacheKey);y.inst.setGlobalEffectsMute(s)}else this.warn("effectMuteCacheKey不能为空");if(this.musicVolumeScaleCacheKey){var l=V(this.musicVolumeScaleCacheKey);"number"==typeof l&&y.inst.setMusicVolumeScale(l)}else this.warn("musicVolumeScaleCacheKey不能为空");if(this.effectVolumeScaleCacheKey){var o=V(this.effectVolumeScaleCacheKey);"number"==typeof o&&y.inst.setGlobalEffectsVolumeScale(o)}else this.warn("effectVolumeScaleCacheKey不能为空");e.prototype.init.call(this,t),null==(i=n.preload)||i.forEach((function(e){d.inst.manager.loader.preload({bundle:b,type:c,path:e})}))},l.onLoad=function(){o.on(f.EVENT_HIDE,(function(){y.inst.pauseAll()})),o.on(f.EVENT_SHOW,(function(){y.inst.resumeAll()}))},l.preload=function(e){var t,i,n=(arguments.length<=1?0:arguments.length-1)>=1&&"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(arguments.length<=1?void 0:arguments[1])||b,u=(arguments.length<=1?0:arguments.length-1)>=1&&((t=(arguments.length<=1?0:arguments.length-1)-1+1)<1||arguments.length<=t?void 0:arguments[t])instanceof Function?(i=(arguments.length<=1?0:arguments.length-1)-1+1)<1||arguments.length<=i?void 0:arguments[i]:null;return e?0!==e.indexOf("effect")&&0!==e.indexOf("music")?(this.error("preload","fail",e),void(u&&setTimeout((function(){r(this)&&u(null)})))):void d.inst.manager.loader.preload({bundle:n,path:e,type:c,onComplete:u}):(this.error("preload","fail"),void(u&&setTimeout((function(){r(this)&&u(null)}))))},l.load=function(e){var t,i,n,u,s,a=this,l=(arguments.length<=1?0:arguments.length-1)>=1&&"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(arguments.length<=1?void 0:arguments[1])||b,o=(arguments.length<=1?0:arguments.length-1)>=2&&((t=(arguments.length<=1?0:arguments.length-1)-1+1)<1||arguments.length<=t?void 0:arguments[t])instanceof Function&&((i=(arguments.length<=1?0:arguments.length-1)-2+1)<1||arguments.length<=i?void 0:arguments[i])instanceof Function?(n=(arguments.length<=1?0:arguments.length-1)-2+1)<1||arguments.length<=n?void 0:arguments[n]:null,f=(arguments.length<=1?0:arguments.length-1)>=1&&((u=(arguments.length<=1?0:arguments.length-1)-1+1)<1||arguments.length<=u?void 0:arguments[u])instanceof Function?(s=(arguments.length<=1?0:arguments.length-1)-1+1)<1||arguments.length<=s?void 0:arguments[s]:null;if(!e)return this.error("load","fail"),void(f&&setTimeout((function(){r(a)&&f(null)})));var h=l+"://"+e,p=this.audioCache[h];p?f&&setTimeout((function(){r(a)&&f(p)})):d.inst.manager.loader.load({path:e,bundle:l,type:c,onProgress:o,onComplete:function(e){r(a)&&(e?(a.audioCache[h]=e,f&&f(e)):f&&f(null))}})},l.release=function(e,t){var i=t||b,n=i+"://"+e;delete this.audioCache[n],d.inst.manager.loader.release({bundle:i,path:e,type:c})},l.playDefaultMusic=function(e){this.defaultMusicName?this.playMusic({name:this.defaultMusicName,volume:this.defaultMusicVolume,onPlay:e}):this.warn("defaultMusicName 不存在")},l.playDefaultEffect=function(e){this.defaultEffectName?this.playEffect({name:this.defaultEffectName,volume:this.defaultEffectVolume,onPlay:e}):this.warn("defaultEffectName 不存在")},l.setButtonEffect=function(e,t,i){if(t){var n=i||{},u=n.volume,s=void 0===u?1:u,a=n.interval,l=void 0===a?0:a;e.node.useDefaultEffect=!1,e.node.targetOff(this),e.node.on(h.EventType.CLICK,(function(){this.playEffect({name:t,volume:s,interval:l})}),this)}else e.node.useDefaultEffect=!0,e.node.targetOff(this)},l.playEffect=function(e){var t=this,i=e.name,n=e.bundle,u=e.volume,s=void 0===u?1:u,a=e.loop,l=void 0!==a&&a,c=e.interval,o=void 0===c?0:c,f=e.onEnded,h=e.onPlay,p=e.onError;if(i){var d=n||b,m=d+"://"+i;this.isEffectMute||this.effectInterval[m]&&Date.now()<this.effectInterval[m]?p&&p():this.load(i,d,(function(e){if(r(t))if(t.isEffectMute)p&&p();else if(t.effectInterval[m]&&Date.now()<t.effectInterval[m])p&&p();else{if(!e)return t.error("playEffect "+i+" 不存在或加载失败"),void(p&&p());o>0&&(t.effectInterval[m]=Date.now()+1e3*o),y.inst.playEffect(e,s,l,h,f)}else p&&p()}))}else p&&p()},l.playEffectAsync=function(){var e=u(s().mark((function e(t){var n=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){n.playEffect(i({},t,{onPlay:function(t){e(t)},onError:function(){e(null)}}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l.pauseEffect=function(e){return y.inst.pauseEffect(e)},l.pauseAllEffects=function(){return y.inst.pauseAllEffects()},l.resumeEffect=function(e){return y.inst.resumeEffect(e)},l.resumeAllEffects=function(){return y.inst.resumeAllEffects()},l.stopEffect=function(e){return y.inst.stopEffect(e)},l.stopAllEffects=function(){return y.inst.stopAllEffects()},l.playMusic=function(e){var t=this,i=e.name,n=e.bundle,u=e.volume,s=void 0===u?1:u,a=e.force,l=void 0!==a&&a,c=e.onPlay,o=e.onError;if(i){var f=n||b,h=f+"://"+i;if(!l&&-1!==this.playingMusic.id&&this.playingMusic.name===h)return y.inst.setMusicVolume(s),void(c&&c());this.stopMusic();var p=this.createUUID();this.playingMusic.uuid=p,this.playingMusic.name=h,this.playingMusic.volume=s,this.playingMusic.playing=!0,this.playingMusic.paused=!1,this.isMusicMute?c&&c():this.load(i,f,(function(e){if(r(t))if(-1===t.playingMusic.id)if(t.playingMusic.name===h){if(t.playingMusic.uuid==t.playingMusic.uuid)return e?void(t.isMusicMute?c&&c():t.playingMusic.id=y.inst.playMusic(e,s,c)):(t.error("playMusic "+i+" 不存在或加载失败"),void(o&&o()));o&&o()}else o&&o();else o&&o();else o&&o()}))}else o&&o()},l.playMusicAsync=function(e){var t=this;return new Promise((function(n){t.playMusic(i({},e,{onPlay:function(){n(!0)},onError:function(){n(!1)}}))}))},l.replayMusic=function(e){if(this.playingMusic.playing&&this.playingMusic.name)if(this.playingMusic.name.indexOf("://")>0){var t=this.playingMusic.name.split("://"),i=t[0],n=t[1];this.playMusic({name:n,bundle:i,volume:this.playingMusic.volume,force:!0,onPlay:e})}else this.playMusic({name:this.playingMusic.name,volume:this.playingMusic.volume,force:!0,onPlay:e})},l.pauseMusic=function(){return!!this.playingMusic.playing&&(this.playingMusic.paused=!0,y.inst.pauseMusic())},l.resumeMusic=function(){return!!this.playingMusic.playing&&(this.playingMusic.paused=!1,y.inst.resumeMusic())},l.stopMusic=function(){return this.playingMusic.playing=!1,this.playingMusic.paused=!1,this.playingMusic.volume=1,this.playingMusic.name="",this.playingMusic.uuid="",this.playingMusic.id=-1,y.inst.stopMusic()},l.setMusicMute=function(e,t){if(void 0===t&&(t=!1),t&&E(this.musicMuteCacheKey,e),y.inst.setMusicMute(e),!e&&this.playingMusic.name)if(this.playingMusic.name.indexOf("://")>0){var i=this.playingMusic.name.split("://"),n=i[0],u=i[1];this.playMusic({name:u,bundle:n,volume:this.playingMusic.volume})}else this.playMusic({name:this.playingMusic.name,volume:this.playingMusic.volume})},l.setEffectMute=function(e,t){void 0===t&&(t=!1),y.inst.setGlobalEffectsMute(e),t&&E(this.effectMuteCacheKey,e)},l.setMusicVolumeScale=function(e,t){void 0===t&&(t=!1),y.inst.setMusicVolumeScale(e),t&&E(this.musicVolumeScaleCacheKey,e)},l.setEffectVolumeScale=function(e,t){void 0===t&&(t=!1),y.inst.setGlobalEffectsVolumeScale(e),t&&E(this.effectVolumeScaleCacheKey,e)},n(a,[{key:"isMusicPlaying",get:function(){return this.playingMusic.playing}},{key:"isMusicPaused",get:function(){return this.playingMusic.paused}},{key:"isMusicMute",get:function(){return y.inst.getMusicMute()}},{key:"isEffectMute",get:function(){return y.inst.getGlobalEffectsMute()}},{key:"musicVolumeScale",get:function(){return y.inst.getMusicVolumeScale()}},{key:"effectVolumeScale",get:function(){return y.inst.getGlobalEffectsVolumeScale()}}]),a}(m)).setting={},M.MusicName=S,M.EffectName=C,g=M))||g);a._RF.pop()}}}));

System.register("chunks:///_virtual/storage.ts",["cc"],(function(t){var e,r,a,n,i;return{setters:[function(t){e=t.cclegacy,r=t.sys,a=t.log,n=t.error,i=t.js}],execute:function(){e._RF.push({},"be3dafKG7VKQYlL+CdRx47y","storage",void 0);var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o=function(){var t,e,r,a,n,i,c,o=new Date;return o.getFullYear()+""+(e=(t=(t=o)||new Date).getFullYear(),r=t.getMonth()+1,a=t.getDate(),n=new Date(e,r-1,a),i=new Date(e,0,1),c=Math.round((n.valueOf()-i.valueOf())/864e5),Math.ceil((c+(i.getDay()+1-1))/7))},u=function(t){return(t=t||new Date).toLocaleDateString()},s=t("Storage",function(){function t(){this._cache={}}var e=t.prototype;return e.set=function(e,i){if("string"==typeof e&&void 0!==i)try{var o=JSON.stringify(i);return t.setting.secretKey?r.localStorage.setItem(e,function(t,e){e=e||c;for(var r="",a=0;a<t.length;a++){var n=t.charCodeAt(a)^e.charCodeAt(a%e.length);r+=String.fromCharCode(n)}return r}(o,t.setting.secretKey)):r.localStorage.setItem(e,o),this._cache[e]=o,!0}catch(t){a(t)}else n("storage set error");return!1},e.get=function(e){if(void 0!==this._cache[e])return JSON.parse(this._cache[e]);var a=null;try{var n=r.localStorage.getItem(e);n&&"string"==typeof n?(t.setting.secretKey&&(n=function(t,e){e=e||c;for(var r="",a=0;a<t.length;a++){var n=t.charCodeAt(a)^e.charCodeAt(a%e.length);r+=String.fromCharCode(n)}return r}(n,t.setting.secretKey)),this._cache[e]=n,a=JSON.parse(n)):""!==n&&null!==n&&(a=void 0)}catch(t){a=void 0}return a},e.add=function(t,e){void 0===e&&(e=1);var r=this.get(t);return!(void 0===r||(r=r||0,r+=e,!this.set(t,r)))&&r},e.remove=function(t){try{return r.localStorage.removeItem(t),delete this._cache[t],!0}catch(t){return!1}},e.clear=function(){try{return r.localStorage.clear(),i.clear(this._cache),!0}catch(t){return!1}},e.setWeek=function(t,e,r){var a=o();if(!r)return this.set(t,{data:e,updateTime:a});var n=this.getWeek(t);return!(void 0===n||null!==n&&!r(n,e))&&this.set(t,{data:e,updateTime:a})},e.getWeek=function(t){var e=this.get(t);return e&&e.updateTime==o()?e.data:e&&null},e.setDay=function(t,e,r){var a=u();if(!r)return this.set(t,{data:e,updateTime:a});var n=this.getDay(t);return!(void 0===n||null!==n&&!r(n,e))&&this.set(t,{data:e,updateTime:a})},e.getDay=function(t){var e=this.get(t);return e&&e.updateTime==u()?e.data:e&&null},t}());s.setting={secretKey:""};t("default",new s);e._RF.pop()}}}));

System.register("chunks:///_virtual/task.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,i;return{setters:[function(t){n=t.createClass},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"721e63MqrNI1qpO4br4ISY7","task",void 0);var s=t("Sync",function(){function t(){this.running=!1,this.index=-1,this.list=[],this.finish=null,this.results=[]}var n=t.prototype;return n.size=function(){return this.list.length},n.add=function(t){return this.list.push(t),this.results.push(void 0),this},n.start=function(t){return this.running||(this.running=!0,this.index=-1,this.finish=t,this.next(this.index)),this},n.stop=function(){return!!this.running&&(this.running=!1,this.finish&&this.finish(this.results,!1),!0)},n.isRunning=function(){return this.running},n.isStop=function(){return!this.running},n.end=function(t){return!!this.running&&(void 0!==t&&(this.results[this.index]=t),this.running=!1,this.finish&&this.finish(this.results,!0),!0)},n.next=function(t,n){return!!this.running&&(t===this.index&&(void 0!==n&&(this.results[this.index]=n),++this.index<this.list.length?this.retry(this.index):this.end(),!0))},n.retry=function(t){var n=this;if(!this.running)return!1;if(t!==this.index)return!1;var i=this.list[t];return i&&i((function(i){return n.next(t,i)}),(function(i){return void 0===i&&(i=0),new Promise((function(s){i>0?setTimeout((function(){s(n.retry(t))}),1e3*i):s(n.retry(t))}))}),(function(t){return n.end(t)})),!0},t}()),r=t("ASync",function(){function t(){this.running=!1,this.count=0,this.list=[],this.finish=null,this.results=[]}var n=t.prototype;return n.size=function(){return this.list.length},n.add=function(t){return this.list.push(t),this.results.push(void 0),this.running&&this.retry(this.list.length-1),this},n.start=function(t){if(this.running)return this;if(this.running=!0,this.count=0,this.finish=t,this.list.length)for(var n=0;n<this.list.length;n++)this.retry(n);else this.end&&this.end(this.count);return this},n.stop=function(){return!!this.running&&(this.running=!1,this.finish&&this.finish(this.results,!1),!0)},n.isRunning=function(){return this.running},n.isStop=function(){return!this.running},n.end=function(t,n){if(!this.running)return!1;if(t>=0&&t<this.results.length){if(this.results[t]||null===this.results[t])return!1;this.results[t]=void 0!==n?n:null}return this.running=!1,this.finish&&this.finish(this.results,!0),!0},n.next=function(t,n){if(!this.running)return!1;if(t>=0&&t<this.results.length){if(this.results[t]||null===this.results[t])return!1;this.results[t]=void 0!==n?n:null}return++this.count===this.list.length&&this.end&&this.end(this.count),!0},n.retry=function(t){var n=this;if(!this.running)return!1;var i=this.list[t];return i&&i((function(i){return n.next(t,i)}),(function(i){return void 0===i&&(i=0),new Promise((function(s){i>0?setTimeout((function(){s(n.retry(t))}),1e3*i):s(n.retry(t))}))}),(function(i){return n.end(t,i)})),!0},t}()),u=t("Any",function(){function t(){this.task=new s}var i=t.prototype;return i.size=function(){return this.task.size()},i.add=function(t){if(t instanceof Array){var n=new r;t.forEach((function(t){return n.add(t)})),this.task.add(n.start.bind(n))}else this.task.add(t);return this},i.start=function(t){return this.task.start(t),this},i.stop=function(){return this.task.stop()},i.isRunning=function(){return this.task.isRunning()},i.isStop=function(){return this.task.isStop()},n(t,[{key:"results",get:function(){return this.task.results}}]),t}()),e=t("default",{createSync:function(){return new s},createASync:function(){return new r},createAny:function(){return new u},execute:function(t,n,i){void 0===n&&(n=-1),t((function(s){if(void 0===s&&(s=0),0===n)return i&&i();n=n>0?n-1:n,s>0?setTimeout((function(){return e.execute(t,n,i)}),1e3*s):e.execute(t,n,i)}))}});i._RF.pop()}}}));

System.register("chunks:///_virtual/TimerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseManager.ts"],(function(t){var i,e,r,s;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator},function(t){s=t.default}],execute:function(){var n;e._RF.push({},"b5636+NNRZFEKq6dPkgK4qf","TimerManager",void 0);var a=r.ccclass,c=function(){function t(i,e,r,s){void 0===s&&(s=!1),this.startMs=void 0,this.endMs=void 0,this.checkDay=0,this.callback=e,this.target=r,this.once=s;var n=i.split("-"),a=n[0],c=n[1],o=void 0===c?a:c,l=a.split(":").map((function(t){return Math.max(0,parseInt(t,10)||0)})),u=l[0],h=void 0===u?0:u,f=l[1],d=void 0===f?0:f,p=l[2],v=void 0===p?0:p;this.startMs=t.parseTimeToMs(h,d,v);var m=o.split(":").map((function(t){return Math.max(0,parseInt(t,10)||0)})),g=m[0],T=void 0===g?0:g,M=m[1],y=void 0===M?0:M,k=m[2],b=void 0===k?0:k;this.endMs=t.parseTimeToMs(T,y,b),this.endMs===this.startMs&&(this.endMs=0===d&&0===v?t.parseTimeToMs(h+1,d,v):0===v?t.parseTimeToMs(h,d+1,v):t.parseTimeToMs(h,d,v+1))}t.getDayTimeMs=function(t){return 1e3*(3600*t.getHours()+60*t.getMinutes()+t.getSeconds())+t.getMilliseconds()},t.parseTimeToMs=function(t,i,e){return 1e3*(3600*t+60*i+e)%864e5};var i=t.prototype;return i.isInRange=function(i){var e=t.getDayTimeMs(i);return this.startMs<=this.endMs?e>=this.startMs&&e<this.endMs:e>=this.startMs||e<this.endMs},i.update=function(t){var i=t.getDay();return this.checkDay!==i&&(!!this.isInRange(t)&&(this.checkDay=i,this.callback.call(this.target),this.once))},t}(),o=function(){function t(t,i,e,r){void 0===r&&(r=!1),this.elapsed=0,this.interval=t,this.callback=i,this.target=e,this.once=r}return t.prototype.update=function(t){this.elapsed+=t;for(var i=!1;this.elapsed>=this.interval;)if(this.callback.call(this.target),this.elapsed-=this.interval,this.once){i=!0;break}return i},t}(),l=function(){function t(){this.intervalTimer=[],this.dailyTimers=[]}t.update=function(t,i){return t.update(i)};var i=t.prototype;return i.register=function(t,i,e,r){var s=new o(t,i,e,r||!1);this.intervalTimer.push(s)},i.unregister=function(t,i){this.intervalTimer=void 0===i?this.intervalTimer.filter((function(i){return i.callback!==t})):this.intervalTimer.filter((function(e){return!(e.callback===t&&e.target===i)}))},i.unregisterAll=function(){this.intervalTimer=[]},i.registerDailyTrigger=function(t,i,e,r){var s=new c(t,i,e,r||!1);this.dailyTimers.push(s)},i.unregisterDailyTrigger=function(t,i){this.dailyTimers=void 0===i?this.dailyTimers.filter((function(i){return i.callback!==t})):this.dailyTimers.filter((function(e){return!(e.callback===t&&e.target===i)}))},i.unregisterAllDailyTrigger=function(){this.dailyTimers=[]},i.clear=function(){this.intervalTimer=[],this.dailyTimers=[]},i.update=function(t){for(var i=0;i<this.intervalTimer.length;i++){this.intervalTimer[i].update(t)&&(this.intervalTimer.splice(i,1),i--)}for(var e=new Date,r=0;r<this.dailyTimers.length;r++){this.dailyTimers[r].update(e)&&(this.dailyTimers.splice(r,1),r--)}},t}();t("default",a("TimerManager")(n=function(t){function e(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return(i=t.call.apply(t,[this].concat(r))||this).timers=new Map,i}i(e,t);var r=e.prototype;return r.clear=function(){this.timers.forEach((function(t){t.clear()})),this.timers.clear()},r.delete=function(t){var i=this.timers.get(t);i&&(this.timers.delete(t),i.clear())},r.get=function(t){if(this.timers.has(t))return this.timers.get(t);var i=new l;return this.timers.set(t,i),i},r.update=function(t){this.timers.forEach((function(i){l.update(i,t)}))},e}(s))||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts","./BaseManager.ts","./BaseView.ts","./UIMgrLoading.ts","./UIMgrShade.ts","./UIMgrToast.ts","./UIMgrZOrder.ts"],(function(e){var t,n,i,r,a,o,s,u,h,l,d,c,g,f,p,v,I,m,w,U,y,S,C,E,M,L,b,P,T,B,N,V,R,O,D;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.extends,o=e.createClass},function(e){s=e.cclegacy,u=e._decorator,h=e.Node,l=e.Prefab,d=e.Camera,c=e.director,g=e.instantiate,f=e.Widget,p=e.settings,v=e.Settings,I=e.size,m=e.screen,w=e.Layers,U=e.UITransform,y=e.Scene,S=e.js,C=e.isValid,E=e.SceneAsset,M=e.Canvas,L=e.ResolutionPolicy,b=e.view},function(e){P=e.default},function(e){T=e.default},function(e){B=e.ViewType,N=e.default},function(e){V=e.default},function(e){R=e.default},function(e){O=e.default},function(e){D=e.default}],execute:function(){var x,F,A,k,_,H,Q,z,W,j;s._RF.push({},"234f6Lx69NNFJ9vC2nHCWRJ","UIManager",void 0);var q=u.ccclass,X=u.property,Z="UIScene",G=[B.Page,B.Paper,B.Pop,B.Top],J=[h.EventType.TOUCH_START,h.EventType.TOUCH_MOVE,h.EventType.TOUCH_END,h.EventType.TOUCH_CANCEL,h.EventType.MOUSE_DOWN,h.EventType.MOUSE_MOVE,h.EventType.MOUSE_UP,h.EventType.MOUSE_ENTER,h.EventType.MOUSE_LEAVE,h.EventType.MOUSE_WHEEL],K=function(e){return e[e.LoadError=0]="LoadError",e[e.LogicError=1]="LogicError",e[e.InvalidError=2]="InvalidError",e}(K||{}),Y=new Proxy({},{get:function(e,t){return e[t]?e[t]:(e[t]=t,t)}}),$=new Proxy({},{get:function(e,t){return e[t]?e[t]:(e[t]=t,t)}});function ee(e){return e.replace(/[A-Z]/g,(function(e,t){return 0===t?e.toLocaleLowerCase():"-"+e.toLocaleLowerCase()}))}e("default",(x=q("UIManager"),F=X({type:l,tooltip:"位置: app://manager/ui/prefab/UIMgrLoading"}),A=X({type:l,tooltip:"位置: app://manager/ui/prefab/UIMgrShade"}),k=X({type:l,tooltip:"位置: app://manager/ui/prefab/UIMgrToast"}),x(((j=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"loadingPre",Q,r(t)),i(t,"shadePre",z,r(t)),i(t,"toastPre",W,r(t)),t.UserInterface=null,t.loading=null,t.shade=null,t.toast=null,t.defaultUI=null,t.defaultData="",t.currScene="",t.currPage=null,t.currFocus=null,t.prefabCache={},t.sceneCache={},t.touchEnabled=!0,t.touchMaskMap=new Map,t.showLoadingMap=new Map,t.uiLoadingMap=new Map,t.uiShowingMap=new Map,t.showQueue=[],t}n(t,e);var s=t.prototype;return s.init=function(n){var i,r=this,a=t.setting;if(this.defaultUI=a.defaultUI,this.defaultData=a.defaultData,e.prototype.init.call(this,n),null!=(i=a.preload)&&i.length){var o=P.inst.lib.task.createAny();a.preload.forEach((function(e){e instanceof Array?o.add(e.map((function(e){return function(t){return r.preload(e,t)}}))):o.add((function(t){return r.preload(e,t)}))})),o.start()}},s.onLoad=function(){if(this.UserInterface=this.root.getChildByName("UserInterface"),this.root.getComponentsInChildren(d).forEach((function(e){e.priority<0&&(e.priority=0),e.far<=e.near&&(e.far=e.near+1)})),c.addPersistRootNode(this.root),this.createTypeRoot(),this.shade=g(this.shadePre),this.shade.parent=this.UserInterface,this.shade.active=!1,this.shade.getComponent(f).target=this.root,this.loading=g(this.loadingPre),this.loading.parent=this.node,this.loading.active=!1,this.toastPre&&(this.toast=g(this.toastPre),this.toast.parent=this.node),t.setting.autoFit){var e=p.querySettings(v.Category.SCREEN,"designResolution"),n=I(m.windowSize),i=e.policy,r=function(){if(n.width/n.height>e.width/e.height){if(i===L.FIXED_HEIGHT)return;b.setResolutionPolicy(L.FIXED_HEIGHT),i=L.FIXED_HEIGHT}else{if(i===L.FIXED_WIDTH)return;b.setResolutionPolicy(L.FIXED_WIDTH),i=L.FIXED_WIDTH}};r(),this.schedule((function(){n.equals(m.windowSize)||(n.set(m.windowSize),r())}),.5)}},s.createTypeRoot=function(){var e=this;G.forEach((function(t){var n=new h(t);n.layer=w.Enum.UI_2D,n.addComponent(D),n.parent=e.UserInterface,n.addComponent(U);var i=n.addComponent(f);i.isAlignBottom=!0,i.isAlignLeft=!0,i.isAlignRight=!0,i.isAlignTop=!0,i.top=0,i.left=0,i.right=0,i.bottom=0,i.alignMode=f.AlignMode.ON_WINDOW_RESIZE}))},s.addTouchMaskListener=function(){if(this.touchEnabled&&!(this.touchMaskMap.size>0))for(var e=0;e<J.length;e++)this.root.on(J[e],this.stopPropagation,this,!0)},s.removeTouchMaskListener=function(){if(this.touchEnabled&&!(this.touchMaskMap.size>0))for(var e=0;e<J.length;e++)this.root.off(J[e],this.stopPropagation,this,!0)},s.stopPropagation=function(e){(!this.touchEnabled||this.touchMaskMap.size>0)&&(e.propagationStopped=!0,e.type!==h.EventType.MOUSE_MOVE&&this.log("屏蔽触摸"))},s.getBaseView=function(e){return e?e.components.find((function(e){return e instanceof N})):null},s.getViewInParents=function(e){for(var t=e,n=null;t.parent&&!(t.parent instanceof y)&&!(n=this.getBaseView(t.parent));)t=t.parent;return n},s.getViewInChildren=function(e){for(var t=0;t<e.children.length;t++){var n=e.children[t],i=this.getBaseView(n);if(i)return i}return null},s.getUIClass=function(e){return S.getClassByName(e)},s.getUIPath=function(e){return e},s.getUIPrefix=function(e){for(var t=0;t<G.length;t++){var n=G[t];if(0===e.indexOf(n))return n}this.error("getUIPrefix",""+e)},s.getUIParent=function(e){if(this.currScene===e)return c.getScene();for(var t=this.getUIPrefix(e),n=0;n<G.length;n++){var i=G[n];if(i===t)return this.UserInterface.getChildByName(i)}return this.error("getUIParent","找不到"+e+"对应的Parent"),null},s.getUIInScene=function(e,t){void 0===t&&(t=!1);var n=this.getUIParent(e);if(t){var i=n.children.filter((function(t){return t.name===e}));if(i.length)return i.filter((function(e){return C(e,!0)}))}else{var r=n.children.find((function(t){return t.name===e}));if(r)return C(r,!0)?r:null}return t?[]:null},s.getUIInShowing=function(e,t){if(void 0===t&&(t=!1),t){var n=[];return this.uiShowingMap.forEach((function(t,i){t===e&&n.push(i.node)})),n}var i=null;return this.uiShowingMap.forEach((function(t,n){i||t!==e||(i=n.node)})),i},s.getNativeBundleName=function(e){var t="app-view_"+e,n=p.querySettings(v.Category.ASSETS,"projectBundles");return n&&n.indexOf(t)>=0?t:ee(e)},s.getResBundleName=function(e){var t="app-view_"+e+"_Res",n=p.querySettings(v.Category.ASSETS,"projectBundles");return n&&n.indexOf(t)>=0?t:ee(e)+"-res"},s.initBundle=function(e,t){var n=this;P.inst.lib.task.createASync().add((function(t){P.inst.manager.loader.loadBundle({bundle:n.getNativeBundleName(e),onComplete:t})})).add((function(t){P.inst.manager.loader.loadBundle({bundle:n.getResBundleName(e),onComplete:t})})).start(t)},s.installUI=function(e,t,n){var i=this;if(this.sceneCache[e])t&&setTimeout((function(){C(i)&&t(i.sceneCache[e])}));else if(this.prefabCache[e])t&&setTimeout((function(){C(i)&&t(i.prefabCache[e])}));else var r=P.inst.lib.task.createSync().add((function(t){i.initBundle(e,t)})).add((function(t){var a=r.results[0];if(!a||!a[0]||!a[1])return t(null);var o=a[0].getSceneInfo(e);P.inst.manager.loader.load({bundle:i.getNativeBundleName(e),path:i.getUIPath(e),type:o?E:l,onProgress:n,onComplete:t})})).start((function(n){if(C(i)){var r=i.sceneCache[e]||i.prefabCache[e];if(r)return t&&t(r);var a=n[1];return a?(a.addRef(),a instanceof l?i.prefabCache[e]=a:i.sceneCache[e]=a,i.log("加载: "+e),t&&t(a)):t&&t(null)}}))},s.uninstallUI=function(e){this.sceneCache[e]?(this.sceneCache[e].decRef(),delete this.sceneCache[e]):this.prefabCache[e]&&(this.prefabCache[e].decRef(),delete this.prefabCache[e]);var t=this.getResBundleName(e),n=this.getNativeBundleName(e);P.inst.manager.loader.releaseAll(t),P.inst.manager.loader.releaseAll(n),P.inst.manager.loader.removeBundle(t),P.inst.manager.loader.removeBundle(n),this.log("卸载: "+e)},s.loadRes=function(e,t,n,i){if("string"==typeof e)P.inst.manager.loader.load({bundle:this.getResBundleName(e),path:t,type:n,onComplete:i});else{var r=this.getBaseView(e.node)||this.getViewInParents(e.node)||this.getViewInChildren(c.getScene());r?P.inst.manager.loader.load({bundle:this.getResBundleName(r.viewName),path:t,type:n,onComplete:i}):(this.error("loadRes",e.name,t),i&&i(null))}},s.preloadRes=function(e,t,n,i){if("string"==typeof e)P.inst.manager.loader.preload({bundle:this.getResBundleName(e),path:t,type:n,onComplete:i});else{var r=this.getBaseView(e.node)||this.getViewInParents(e.node)||this.getViewInChildren(c.getScene());r?P.inst.manager.loader.preload({bundle:this.getResBundleName(r.viewName),path:t,type:n,onComplete:i}):this.error("preloadRes",e.name,t)}},s.loadResDir=function(e,t,n,i){if("string"==typeof e)P.inst.manager.loader.loadDir({bundle:this.getResBundleName(e),path:t,type:n,onComplete:i});else{var r=this.getBaseView(e.node)||this.getViewInParents(e.node)||this.getViewInChildren(c.getScene());r?P.inst.manager.loader.loadDir({bundle:this.getResBundleName(r.viewName),path:t,type:n,onComplete:i}):(this.error("loadResDir",e.name,t),i&&i([]))}},s.preloadResDir=function(e,t,n,i){if("string"==typeof e)P.inst.manager.loader.preloadDir({bundle:this.getResBundleName(e),path:t,type:n,onComplete:i});else{var r=this.getBaseView(e.node)||this.getViewInParents(e.node)||this.getViewInChildren(c.getScene());r?P.inst.manager.loader.preloadDir({bundle:this.getResBundleName(r.viewName),path:t,type:n,onComplete:i}):this.error("preloadResDir",e.name,t)}},s.preload=function(e,t){var n=this;if(!e)return this.error("preload","fail"),void(t&&setTimeout((function(){C(this)&&t(null)})));this.initBundle(e,(function(i){var r=i[0].getSceneInfo(e);P.inst.manager.loader.preload({bundle:n.getNativeBundleName(e),path:n.getUIPath(e),type:r?E:l,onComplete:t})}))},s.load=function(e){var t=(arguments.length<=2?void 0:arguments[2])&&(arguments.length<=1?void 0:arguments[1]),n=(arguments.length<=2?void 0:arguments[2])||(arguments.length<=1?void 0:arguments[1]);if(!e)return this.error("load","fail"),void(n&&setTimeout((function(){C(this)&&n(null)})));this.installUI(e,(function(e){return e?n&&n(e):n&&n(null)}),t)},s.release=function(e){var t=this,n="string"==typeof e?e:e.viewName;if(n){if("string"==typeof e)this.getUIInScene(n,!0).forEach((function(e){var i=t.getBaseView(e);i?(i.isShow&&t.warn("release",n+"正处于show状态, 此处将直接销毁"),i===t.currPage&&(t.currPage=null),i===t.currFocus&&(t.currFocus=null),t.uiShowingMap.delete(i),e&&C(e,!0)&&(e.parent=null,e.destroy())):t.error("release",n+"不存在BaseView组件")}));else{e.isShow&&this.warn("release",n+"正处于show状态, 此处将直接销毁"),e===this.currPage&&(this.currPage=null),e===this.currFocus&&(this.currFocus=null),this.uiShowingMap.delete(e);var i=e.node;i&&C(i,!0)&&(i.parent=null,i.destroy())}var r=this.getUIInScene(n,!0);(0===r.length||r.every((function(e){return!C(e,!0)})))&&(this.uninstallUI(n),this.log("释放资源: "+n))}else this.error("release",e+" fail")},s.releaseAll=function(e){var t=this;Object.keys(this.prefabCache).forEach((function(n){e&&-1!==e.indexOf(n)||t.release(n)})),Object.keys(this.sceneCache).forEach((function(n){e&&-1!==e.indexOf(n)||t.release(n)}))},s.checkUIValid=function(e,t,n){var i=this;this.installUI(e,(function(r){if(!r)return n(-1);var a=i.getUIClass(e);return a?a.isViewValid?void a.isViewValid((function(e){n(e?1:0)}),t):n(1):n(0)}))},s.refreshShade=function(){for(var e=!1,n=this.UserInterface.children,i=n.length-1;i>=0;i--){var r=n[i];if(r!==this.shade&&r!==this.loading)for(var a=r.children,o=a.length-1;o>=0;o--){var s=a[o];if(s!==this.shade){var u=this.getBaseView(s);if(u&&(!e&&u.isCaptureFocus&&u.isShow&&(e=!0,this.currFocus!==u&&(C(this.currFocus,!0)&&this.currFocus.constructor.prototype.focus.call(this.currFocus,!1),this.currFocus=u,this.currFocus.constructor.prototype.focus.call(this.currFocus,!0))),u.isNeedShade&&u.isShow)){var h=Object.assign({},t.setting.shade,u.constructor.prototype.onShade.call(u));h.blur?this.shade.getComponent(R).init(0,255,255,0,!0):this.shade.getComponent(R).init("number"!=typeof h.delay?0:h.delay,"number"!=typeof h.begin?60:h.begin,"number"!=typeof h.end?180:h.end,"number"!=typeof h.speed?100:h.speed,!1),this.shade.layer=s.layer,this.shade.parent=r,this.shade.active=!0,this.shade.setPosition(this.shade.position.x,this.shade.position.y,s.position.z);var l=this.shade.getSiblingIndex(),d=s.getSiblingIndex();return void(l>d?this.shade.setSiblingIndex(d):this.shade.setSiblingIndex(d-1))}}}}this.shade.active=!1,this.shade.getComponent(R).clear(),e||(C(this.currFocus,!0)&&this.currFocus.constructor.prototype.focus.call(this.currFocus,!1),this.currFocus=null)},s.parsingPrefab=function(e,t){var n;if(!e)return null;var i=g(e);return i.active=!1,i.name!==t&&(this.warn("parsingPrefab","节点名与UI名不一致, 已重置为UI名: "+this.getUIPath(t)),i.name=t),i.parent=this.getUIParent(t),null==(n=i.getComponent(f))||n.updateAlignment(),i},s.parsingScene=function(e,t){if(!e||!e.scene)return null;e.scene.name!==t&&(this.warn("parsingScene","场景名与UI名不一致, 已重置为UI名: "+this.getUIPath(t)),e.scene.name=t);var n=this.getViewInChildren(e.scene);return n?(n.node.active=!1,n.node.name!==t&&(this.warn("parsingScene","节点名与UI名不一致, 已重置为UI名: "+this.getUIPath(t)),n.node.name=t),n.node):(this.error("parsingScene","解析场景时未查询到根节点存在BaseView: "+this.getUIPath(t)),null)},s.addUILoadingUuid=function(e,t){var n=t||this.createUUID();return this.uiLoadingMap.has(e)?this.uiLoadingMap.get(e).push(n):this.uiLoadingMap.set(e,[n]),n},s.removeUILoadingUuid=function(e,t){if(!this.uiLoadingMap.has(e))return!1;var n=this.uiLoadingMap.get(e).indexOf(t);return-1!==n&&(this.uiLoadingMap.get(e).splice(n,1),!0)},s.createUI=function(e,t,n){var i=this,r=t?"":this.showLoading(),a=this.addUILoadingUuid(e,r);if(e){var o=this.getUIInScene(e);C(o,!0)&&!0===this.getBaseView(o).isSingleton?setTimeout((function(){if(C(i))return!1===i.removeUILoadingUuid(e,a)?i.hideLoading(r):void(C(o,!0)?(i.currScene===e?n(o,c.getScene()):n(o),i.hideLoading(r)):(i.createUI(e,t,n),i.hideLoading(r)))})):this.load(e,(function(t){if(C(i)){if(!1===i.removeUILoadingUuid(e,a))return i.hideLoading(r);if(t instanceof E)return n(i.parsingScene(t,e),t.scene),void i.hideLoading(r);var o=i.getUIInScene(e);C(o,!0)&&!1!==i.getBaseView(o).isSingleton?(n(o),i.hideLoading(r)):(n(i.parsingPrefab(t,e)),i.hideLoading(r))}}))}else setTimeout((function(){if(C(i)){if(!1===i.removeUILoadingUuid(e,a))return i.hideLoading(r);n(null),i.hideLoading(r)}}))},s.showDefault=function(e){this.defaultUI?this.show({name:this.defaultUI,data:this.defaultData,onShow:e}):(P.inst.manager.ui.showToast("请先设置首界面\n在setting.ts中修改defaultUI",100),e&&e(),this.warn("defaultUI不存在，请在setting.ts中修改"))},s.isShow=function(e){return!!this.getUIInShowing(e)||this.isInQueue(e)||this.isLoading(e)},s.isInQueue=function(e){return!!this.showQueue.find((function(t){return t.name==e}))},s.isLoading=function(e){return this.uiLoadingMap.has(e)&&this.uiLoadingMap.get(e).length>0},s.putInShowQueue=function(e){"join"===e.queue||0===this.showQueue.length?this.showQueue.push(e):this.showQueue.splice(1,0,e),1===this.showQueue.length&&this.consumeShowQueue()},s.consumeShowQueue=function(){var e=this;if(0!==this.showQueue.length){var t=this.showQueue[0];this.show({name:t.name,data:t.data,onShow:t.onShow,onHide:function(n){t.onHide&&t.onHide(n),e.showQueue.shift(),e.consumeShowQueue()},onError:t.onError?function(n,i){var r=t.onError(n,i);return e.showQueue.shift(),e.consumeShowQueue(),r}:void 0,top:t.top,attr:t.attr,silent:t.silent})}},s.showUI=function(e){var n=this,i=e.name,r=e.data,a=e.onShow,o=e.onHide,s=e.onError,u=e.top,h=void 0===u||u,l=e.attr,d=void 0===l?null:l,g=e.silent,f=void 0!==g&&g;this.createUI(i,f,(function(u,l){if(!u){if(n.error("show",i+" 不存在或加载失败"),s&&!0!==s(i+" 不存在或加载失败",t.ErrorCode.LoadError))return;return n.scheduleOnce((function(){return n.showUI(e)}),1),void(f||n.showLoading(1))}!l&&h&&u.setSiblingIndex(-1);var g=n.getBaseView(u);n.uiShowingMap.set(g,i),g.constructor.prototype.show.call(g,r,d,(function(e){n.uiShowingMap.set(g,i),a&&a(e)}),(function(e){n.uiShowingMap.delete(g),o&&o(e)}),(function(e){if(e)n.uiShowingMap.delete(g),s&&s(e,t.ErrorCode.LogicError);else if(N.isPage(i)){n.uiShowingMap.set(g,i);var r=n.currPage;if(n.currPage=g,C(r,!0)&&r!==g&&r.isShow&&r.constructor.prototype.hide.call(r,{name:i}),l)r!==g&&(n.currScene=i,c.runSceneImmediate(l,null,(function(){n.log("切换场景: "+i)})));else if(n.currScene!==Z){n.currScene=Z;var a=new y(Z);a.autoReleaseAssets=!0,c.runSceneImmediate(a,null,(function(){n.log("切换场景: UIScene")}))}}}))}))},s.show=function(e){var n=this,i=e.name,r=e.data,a=e.queue,o=e.onError,s=e.silent,u=void 0!==s&&s;if(a)this.putInShowQueue(e);else{this.log("show: "+i);var h=u?"":this.showLoading(),l=this.addUILoadingUuid(i,h);P.inst.lib.task.execute((function(a){n.checkUIValid(i,r,(function(r){if(!1!==n.removeUILoadingUuid(i,l)){if(-1===r)return n.error("show",i+" 不存在或加载失败"),o&&!0!==o(i+" 不存在或加载失败",t.ErrorCode.LoadError)?n.hideLoading(h):a(1);if(0===r)return n.warn("show",i+" 无效"),n.uninstallUI(i),o&&o(i+" 无效",t.ErrorCode.InvalidError),void n.hideLoading(h);n.showUI(e),n.hideLoading(h)}else n.hideLoading(h)}))}))}},s.showAsync=function(e){var t=this;return new Promise((function(n){t.show(a({},e,{onHide:function(e){n(e)}}))}))},s.hide=function(e){var t=this,n=e.name,i=e.data,r=e.onHide,a=this.getUIInShowing(n,!0);if(this.log("hide: "+n),0===a.length&&(!this.uiLoadingMap.has(n)||0===this.uiLoadingMap.get(n).length))return this.warn("hide",n+" 不存在");this.uiLoadingMap.has(n)&&(this.uiLoadingMap.get(n).forEach((function(e){return t.hideLoading(e)})),this.uiLoadingMap.get(n).length=0);for(var o=a.length-1;o>=0;o--){var s=a[o],u=this.getBaseView(s);this.currPage===u&&(this.currPage=null),u.constructor.prototype.hide.call(u,i,r)}},s.pop=function(e){var t=e.name,n=e.data,i=e.onHide,r=this.getUIInShowing(t,!0);if(this.uiLoadingMap.has(t)&&this.uiLoadingMap.get(t).length){var a=this.uiLoadingMap.get(t).pop();return this.hideLoading(a),void this.log("pop: "+t)}if(r.length){var o=r.pop(),s=this.getBaseView(o);return this.currPage===s&&(this.currPage=null),s.constructor.prototype.hide.call(s,n,i),void this.log("pop: "+t)}this.warn("pop",t+" 不存在")},s.shift=function(e){var t=e.name,n=e.data,i=e.onHide,r=this.getUIInShowing(t,!0);if(r.length){var a=r[0],o=this.getBaseView(a);return this.currPage===o&&(this.currPage=null),o.constructor.prototype.hide.call(o,n,i),void this.log("shift: "+t)}if(this.uiLoadingMap.has(t)&&this.uiLoadingMap.get(t).length){var s=this.uiLoadingMap.get(t).shift();return this.hideLoading(s),void this.log("shift: "+t)}this.warn("shift",t+" 不存在")},s.hideAll=function(e){var t=this,n=void 0===e?{}:e,i=n.data,r=n.exclude;this.log("hideAll"),this.uiShowingMap.forEach((function(e,n){N.isPaper(e)||r&&-1!==r.indexOf(e)||n!==t.currPage&&n.constructor.prototype.hide.call(n,i)})),this.uiLoadingMap.forEach((function(e,n){N.isPaper(n)||r&&-1!==r.indexOf(n)||(e.forEach((function(e){return t.hideLoading(e)})),e.length=0)}))},s.showLoading=function(e){var t,n=this;(void 0===e&&(e=0),this.loading.active=!0,this.loading.setSiblingIndex(-1),this.loading.getComponent(V))?this.loading.getComponent(V).init():null==(t=this.loading.getComponentInChildren(V))||t.init();var i=this.createUUID();return this.showLoadingMap.set(i,!0),e>0&&this.scheduleOnce((function(){n.hideLoading(i)}),e),i},s.hideLoading=function(e){if(e&&(this.showLoadingMap.delete(e),0===this.showLoadingMap.size)){var t;if(this.loading.getComponent(V))this.loading.getComponent(V).clear();else null==(t=this.loading.getComponentInChildren(V))||t.clear();this.loading.active=!1}},s.addTouchMask=function(e){var t=this;void 0===e&&(e=0),this.addTouchMaskListener();var n=this.createUUID();return this.touchMaskMap.set(n,!0),e>0&&this.scheduleOnce((function(){t.removeTouchMask(n)}),e),n},s.removeTouchMask=function(e){e&&(this.touchMaskMap.delete(e),this.removeTouchMaskListener())},s.showToast=function(e,t){if(!this.toast)return this.error("showToast","请确认首场景中「Canvas/Manager/UIManager」的「Toast Pre」属性存在");this.toast.setSiblingIndex(-1),this.toast.getComponent(O).add({message:e,timeout:t})},s.clearToast=function(){this.toast&&this.toast.getComponent(O).clear()},s.setTouchEnabled=function(e){e?(this.touchEnabled=!0,this.removeTouchMaskListener()):(this.addTouchMaskListener(),this.touchEnabled=!1),this.warn("setTouchEnabled",this.touchEnabled)},s.onUserInterface=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.prototype.on.apply(this.UserInterface,t)},s.onceUserInterface=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.prototype.once.apply(this.UserInterface,t)},s.offUserInterface=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.prototype.off.apply(this.UserInterface,t)},s.targetOffUserInterface=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];h.prototype.targetOff.apply(this.UserInterface,t)},s.sortUserInterface=function(e){var t;null==(t=this.UserInterface)||null==(t=t.getChildByName(e))||null==(t=t.getComponent(D))||t.updateZOrder()},s.screenshot=function(e,t){var n=((null==t?void 0:t.cameraList)||c.getScene().getComponentsInChildren(d)).sort((function(e,t){return e.priority-t.priority})).filter((function(e){return!!e.enabledInHierarchy&&(!e.targetTexture&&(null==t||!t.cameraFilter||t.cameraFilter(e)))})),i=n.map((function(e){return e.camera}));return n.forEach((function(t){t.targetTexture=e})),c.root.pipeline.render(i),n.forEach((function(e){e.targetTexture=null})),e},o(t,[{key:"root",get:function(){return this.node.parent.parent}},{key:"camera",get:function(){return this.canvas.cameraComponent}},{key:"canvas",get:function(){return this.root.getComponent(M)}}]),t}(T)).setting={},j.ErrorCode=K,j.ViewName=Y,j.MiniViewName=$,Q=t((H=j).prototype,"loadingPre",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(H.prototype,"shadePre",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(H.prototype,"toastPre",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=H))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIMgrLoading.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,r,n,s,a,o,h,l,g,d;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.inheritsLoose,r=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){s=i.cclegacy,a=i._decorator,o=i.UITransform,h=i.Node,l=i.Graphics,g=i.Component,d=i.Size}],execute:function(){var c,p,u,f,w,m,v,S,y,z;s._RF.push({},"4a8e5aXrnhKSo0IF6zGgjon","UIMgrLoading",void 0);var M=a.ccclass,I=a.property,b=a.requireComponent;i("default",(c=M("UIMgrLoading"),p=b(o),u=I(h),f=I({tooltip:"动画的尺寸"}),w=I({tooltip:"等待几秒后开始动画"}),c(m=p((S=e((v=function(i){function e(){for(var e,t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return e=i.call.apply(i,[this].concat(s))||this,r(e,"loading",S,n(e)),r(e,"size",y,n(e)),r(e,"delay",z,n(e)),e.progress=0,e.ringScale=1,e.reverse=!1,e.angleSpeed=120,e.ringSpeed=.02,e.inited=!1,e.drawing=!1,e.timedown=0,e}t(e,i);var s=e.prototype;return s.init=function(){this.inited||(this.inited=!0,this.progress=0,this.ringScale=1,this.loading.angle=0,this.reverse=!1,this.drawing=!1,this.timedown=this.delay,this.loading.getComponent(l).clear())},s.clear=function(){this.inited=!1,this.drawing=!1},s.onDraw=function(){var i=this.loading.getComponent(l),e=this.loading.getComponent(o),t=this.size.width*(.5-e.anchorX),r=this.size.height*(.5-e.anchorY),n=Math.min(this.size.width/2,this.size.height/2),s=Math.PI;if(i.clear(),this.reverse){var a=.5*Math.PI+0,h=.5*Math.PI+2*this.progress*s+0;i.arc(t,r,n,a,h,!0)}else{var g=.5*Math.PI-0,d=.5*Math.PI-2*this.progress*s-0;i.arc(t,r,n,g,d,!1)}i.stroke()},s.update=function(i){if(this.inited){if(!this.drawing){if(this.timedown>0&&(this.timedown-=i),!(this.timedown<=0))return;this.drawing=!0}this.loading.angle-=this.angleSpeed*i,(this.loading.angle>=360||this.loading.angle<=-360)&&(this.loading.angle=this.loading.angle%360),this.ringScale>0?(this.progress=Math.min(1,this.progress+this.ringSpeed*this.ringScale),1==this.progress&&(this.ringScale=-1,this.reverse=!this.reverse)):(this.progress=Math.max(0,this.progress+this.ringSpeed*this.ringScale),0==this.progress&&(this.ringScale=1,this.reverse=!this.reverse)),this.onDraw()}},e}(g)).prototype,"loading",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=e(v.prototype,"size",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(60,60)}}),z=e(v.prototype,"delay",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=v))||m)||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/UIMgrShade.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Core.ts"],(function(e){var t,i,r,n,s,a,o,l,p,u,h,d,c,y,b,f,m,g,F;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,s=e.createClass},function(e){a=e.cclegacy,o=e._decorator,l=e.Sprite,p=e.UIOpacity,u=e.Material,h=e.SpriteFrame,d=e.director,c=e.Color,y=e.Camera,b=e.Director,f=e.RenderTexture,m=e.UITransform,g=e.Component},function(e){F=e.default}],execute:function(){var w,_,v,M,O,C,D,R,x,P,U,z,I;a._RF.push({},"d02952bsB1JPJ4xXteObDOr","UIMgrShade",void 0);var k=o.ccclass,E=o.property,S=o.requireComponent;e("default",(w=k("UIMgrShade"),_=S(l),v=S(p),M=E(u),O=E(h),w(C=_(C=v((R=t((D=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,r(t,"blurMaterial",R,n(t)),r(t,"shadeFrame",x,n(t)),r(t,"_delay",P,n(t)),r(t,"_begin",U,n(t)),r(t,"_end",z,n(t)),r(t,"_speed",I,n(t)),t.inited=!1,t.drawing=!1,t.timedown=0,t.blurFrame=null,t}i(t,e);var a=t.prototype;return a.init=function(e,t,i,r,n){var s=this;if(n){d.targetOff(this),this.inited=!1,this.drawing=!1,this.sprite.color=c.WHITE,this.sprite.customMaterial=null,this.sprite.spriteFrame=this.blurFrame,this.blurFrame&&(this.blurFrame.flipUVY=!1);var a=0,o=d.getScene().getComponentsInChildren(y);d.on(b.EVENT_BEFORE_RENDER,(function(){var e;a++;var t,i=new f,r=s.node.getComponent(m);return i.reset({width:r.width/2,height:r.height/2}),i.addRef(),F.inst.manager.ui.screenshot(i,{cameraList:o}),1===a?(s.blurFrame=new h,null==(t=s.blurFrame)||null==(t=t.texture)||t.decRef(),s.blurFrame.texture=i,s.blurFrame.flipUVY=!0,s.sprite.spriteFrame=s.blurFrame,s.sprite.customMaterial=s.blurMaterial,void s.blurMaterial.setProperty("blurLevel",2)):5===a?(d.targetOff(s),s.sprite.spriteFrame.flipUVY=!1,void(s.sprite.customMaterial=null)):(null==(e=s.blurFrame)||null==(e=e.texture)||e.decRef(),s.blurFrame.texture=i,s.blurFrame.flipUVY=!0,s.sprite.spriteFrame=s.blurFrame,s.sprite.customMaterial=s.blurMaterial,void s.blurMaterial.setProperty("blurLevel",2===a?3:1))}),this)}else d.targetOff(this),this.sprite.spriteFrame=this.shadeFrame,this.sprite.color=c.BLACK,this.sprite.customMaterial=null;this.delay=e,this.begin=t,this.end=i,this.speed=r,this.drawing=!0,this.inited||(this.inited=!0,this.timedown=this.delay,this.opacity.opacity=this.timedown>0?0:this.begin)},a.clear=function(){var e,t;this.inited=!1,this.drawing=!1,d.targetOff(this),null==(e=this.blurFrame)||null==(e=e.texture)||e.decRef(),null==(t=this.blurFrame)||t.destroy(),this.blurFrame=null,this.sprite.spriteFrame=null},a.update=function(e){if(this.inited&&this.drawing){if(this.timedown>0){if(this.timedown-=e,this.timedown>0)return;this.opacity.opacity=this.begin}var t=this.opacity;this.speed>0?(t.opacity+=this.speed*e,t.opacity>this.end&&(t.opacity=this.end)):this.speed<0&&(t.opacity+=this.speed*e,t.opacity<this.end&&(t.opacity=this.end)),t.opacity==this.end&&(this.drawing=!1)}},s(t,[{key:"delay",get:function(){return this._delay},set:function(e){this._delay=Math.max(e,0)}},{key:"begin",get:function(){return this._begin},set:function(e){e>=0&&e<=255&&(this._begin=e)}},{key:"end",get:function(){return this._end},set:function(e){e>=0&&e<=255&&(this._end=e)}},{key:"speed",get:function(){return this.begin==this.end?0:this.begin>this.end?this._speed>0?-this._speed:this._speed:this._speed>=0?this._speed:-this._speed},set:function(e){this._speed=e}},{key:"sprite",get:function(){return this.node.getComponent(l)}},{key:"opacity",get:function(){return this.node.getComponent(p)}}]),t}(g)).prototype,"blurMaterial",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(D.prototype,"shadeFrame",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(D.prototype,"_delay",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(D.prototype,"delay",[E],Object.getOwnPropertyDescriptor(D.prototype,"delay"),D.prototype),U=t(D.prototype,"_begin",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(D.prototype,"begin",[E],Object.getOwnPropertyDescriptor(D.prototype,"begin"),D.prototype),z=t(D.prototype,"_end",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 255}}),t(D.prototype,"end",[E],Object.getOwnPropertyDescriptor(D.prototype,"end"),D.prototype),I=t(D.prototype,"_speed",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),t(D.prototype,"speed",[E],Object.getOwnPropertyDescriptor(D.prototype,"speed"),D.prototype),C=D))||C)||C)||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/UIMgrToast.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIMgrToastCell.ts"],(function(e){var t,o,i,n,s,r,l,a,p,c,h,u,g,f,d,y,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,s=e.createClass},function(e){r=e.cclegacy,l=e._decorator,a=e.UITransform,p=e.Prefab,c=e.NodePool,h=e.instantiate,u=e.UIOpacity,g=e.tween,f=e.Tween,d=e.view,y=e.Component},function(e){m=e.default}],execute:function(){var v,T,C,z,M,P;r._RF.push({},"cde15KM9mxA9L3SJ78TjOHf","UIMgrToast",void 0);var x=l.property,I=l.ccclass,S=l.requireComponent;e("default",(v=I("UIMgrToast"),T=S(a),C=x(p),v(z=T((P=t((M=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,i(t,"cell",P,n(t)),t.lifeTime=2,t.outTime=.2,t.squeezeSpeed=200,t.pool=new c,t}o(t,e);var r=t.prototype;return r.add=function(e){var t=this,o=this.pool.get()||h(this.cell);o.setPosition(0,0,0),o.parent=this.node,o.active=!0,o.getComponent(m).init(e.message),o.getComponent(u).opacity=255,g(o.getComponent(u)).delay(e.timeout||this.lifeTime).to(this.outTime,{opacity:0}).call((function(){t.pool.put(o)})).start()},r.clear=function(){for(var e=this.node.children,t=e.length-1;t>=0;t--)f.stopAllByTarget(e[t].getComponent(u)),e[t].destroy()},r.onDestroy=function(){this.pool.clear()},r.update=function(e){for(var t=this.node.children,o=t.length-1,i=!1;o>=0;o--){var n=o===t.length-1,s=t[o];if(i)f.stopAllByTarget(s.getComponent(u)),this.pool.put(s);else if(n){var r=0-s.getComponent(a).height/2,l=s.position.y+r;if(l>r){var p=Math.max(-this.squeezeSpeed*e*(t.length-o),r-l);s.setPosition(s.position.x,s.position.y+p,s.position.z)}}else{var c=t[o+1],h=s.getComponent(a),g=c.getComponent(a),y=s.position.y-h.height/2-6,m=c.position.y+g.height/2;if(y<m){var v=Math.min(this.squeezeSpeed*e*(t.length-o-1),m-y);s.setPosition(s.position.x,s.position.y+v,s.position.z),y>d.getVisibleSize().height/2&&(i=!0,f.stopAllByTarget(s.getComponent(u)),this.pool.put(s))}else if(y>m){var T=Math.max(-this.squeezeSpeed*e*(t.length-o),m-y);s.setPosition(s.position.x,s.position.y+T,s.position.z)}}}},s(t,[{key:"size",get:function(){return this.node.children.length}}]),t}(y)).prototype,"cell",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=M))||z)||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIMgrToastCell.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,o,l,s,a,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,s=t.UIOpacity,a=t.UITransform,c=t.Label,u=t.Component}],execute:function(){var p,f,h,g,v,d,y;o._RF.push({},"6cc63HWsI5O44ve4wfEKIc0","UIMgrToastCell",void 0);var I=l.ccclass,w=l.property,m=l.requireComponent;t("default",(p=I("UIMgrToastCell"),f=m(s),h=m(a),g=w(c),p(v=f(v=h((y=e((d=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,r(e,"title",y,n(e)),e}i(e,t);var o=e.prototype;return o.init=function(t){t.split("\n").find((function(t){return t.length>30}))?(this.title.overflow=c.Overflow.RESIZE_HEIGHT,this.title.getComponent(a).width=600):this.title.overflow=c.Overflow.NONE,this.title.string=t,this.title.updateRenderData(!0)},o.unuse=function(){this.title.string=""},e}(u)).prototype,"title",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=d))||v)||v)||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/UIMgrZOrder.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,o,d,h;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator,i=e.Node,o=e.director,d=e.Director,h=e.Component}],execute:function(){var s;r._RF.push({},"ad5cbUQY55AwqzdOZrQBim5","UIMgrZOrder",void 0);var c=n.ccclass;e("default",c("UIMgrZOrder")(s=function(e){function r(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).zOrder=!1,t.tempArr=[],t}t(r,e);var n=r.prototype;return n.onLoad=function(){this.checkUpdateZOrder(),this.node.on(i.EventType.CHILD_ADDED,this.onChildAdded,this),this.node.on(i.EventType.CHILD_REMOVED,this.onChildRemoveed,this),i.EventType.CHILDREN_ORDER_CHANGED?this.node.on(i.EventType.CHILDREN_ORDER_CHANGED,this.checkUpdateZOrder,this):this.node.on(i.EventType.SIBLING_ORDER_CHANGED,this.checkUpdateZOrder,this)},n.onDestroy=function(){o.off(d.EVENT_AFTER_UPDATE,this.updateZOrder,this),this.node.off(i.EventType.CHILD_ADDED,this.onChildAdded,this),this.node.off(i.EventType.CHILD_REMOVED,this.onChildRemoveed,this),i.EventType.CHILDREN_ORDER_CHANGED?this.node.off(i.EventType.CHILDREN_ORDER_CHANGED,this.checkUpdateZOrder,this):this.node.off(i.EventType.SIBLING_ORDER_CHANGED,this.checkUpdateZOrder,this)},n.onChildAdded=function(e){this.checkUpdateZOrder(),e.on(i.EventType.TRANSFORM_CHANGED,this.checkUpdateZOrder,this)},n.onChildRemoveed=function(e){e.off(i.EventType.TRANSFORM_CHANGED,this.checkUpdateZOrder,this)},n.checkUpdateZOrder=function(){this.zOrder||(this.zOrder=!0,o.once(d.EVENT_AFTER_UPDATE,this.updateZOrder,this))},n.updateZOrder=function(){this.zOrder&&(Array.prototype.push.apply(this.tempArr,this.node.children),this.tempArr.sort((function(e,t){return e.position.z-t.position.z||e.getSiblingIndex()-t.getSiblingIndex()})).forEach((function(e,t){e.setSiblingIndex(t)})),this.zOrder=!1,this.tempArr.length=0)},r}(h))||s);r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=index.js.map