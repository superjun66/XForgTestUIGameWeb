{"version":3,"sources":["../file:/D:/XForgTestUIGame/assets/app/file:/D:/XForgTestUIGame/assets/app/app.ts","../file:/D:/XForgTestUIGame/assets/app-appinit/view/file:/D:/XForgTestUIGame/assets/app-appinit/view/AppInit.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/manager/sound/file:/D:/XForgTestUIGame/extensions/app/assets/manager/sound/Audio.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/manager/sound/file:/D:/XForgTestUIGame/extensions/app/assets/manager/sound/AudioEngine.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/manager/sound/file:/D:/XForgTestUIGame/extensions/app/assets/manager/sound/AudioManager.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/base/file:/D:/XForgTestUIGame/extensions/app/assets/base/BaseAppInit.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/base/file:/D:/XForgTestUIGame/extensions/app/assets/base/BaseControl.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/base/file:/D:/XForgTestUIGame/extensions/app/assets/base/BaseController.ts","../file:/D:/XForgTestUIGame/assets/res-native/data/file:/D:/XForgTestUIGame/assets/res-native/data/BaseData.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/base/file:/D:/XForgTestUIGame/extensions/app/assets/base/BaseManager.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/base/file:/D:/XForgTestUIGame/extensions/app/assets/base/BaseModel.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/base/file:/D:/XForgTestUIGame/extensions/app/assets/base/BaseView.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/file:/D:/XForgTestUIGame/extensions/app/assets/Core.ts","../file:/D:/CocosDashboard_1.0.9/Creator/Creator/3.8.3/resources/resources/3d/engine/editor/assets/tools/file:/D:/CocosDashboard_1.0.9/Creator/Creator/3.8.3/resources/resources/3d/engine/editor/assets/tools/debug-view-runtime-control.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/lib/debug/file:/D:/XForgTestUIGame/extensions/app/assets/lib/debug/debug.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/manager/event/file:/D:/XForgTestUIGame/extensions/app/assets/manager/event/EventManager.ts","../file:/D:/XForgTestUIGame/assets/app/file:/D:/XForgTestUIGame/assets/app/handle.ts","../file:/D:/XForgTestUIGame/assets/res-native/tool/file:/D:/XForgTestUIGame/assets/res-native/tool/JmClickComponent.ts","../file:/D:/XForgTestUIGame/assets/res-native/tool/file:/D:/XForgTestUIGame/assets/res-native/tool/JmHorizontalListView.ts","../file:/D:/XForgTestUIGame/assets/res-native/tool/file:/D:/XForgTestUIGame/assets/res-native/tool/JmListView.ts","../file:/D:/XForgTestUIGame/assets/res-native/tool/file:/D:/XForgTestUIGame/assets/res-native/tool/JmListViewItem.ts","../file:/D:/XForgTestUIGame/assets/res-native/tool/file:/D:/XForgTestUIGame/assets/res-native/tool/JmNodePoolMgr.ts","../file:/D:/XForgTestUIGame/assets/res-native/tool/file:/D:/XForgTestUIGame/assets/res-native/tool/JmRefreshFooter.ts","../file:/D:/XForgTestUIGame/assets/res-native/tool/file:/D:/XForgTestUIGame/assets/res-native/tool/JmRefreshHeader.ts","../file:/D:/XForgTestUIGame/assets/res-native/data/file:/D:/XForgTestUIGame/assets/res-native/data/JmRoomData.ts","../file:/D:/XForgTestUIGame/assets/res-native/manager/file:/D:/XForgTestUIGame/assets/res-native/manager/JmRoomDataMgr.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/manager/loader/file:/D:/XForgTestUIGame/extensions/app/assets/manager/loader/LoaderManager.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/lib/logger/file:/D:/XForgTestUIGame/extensions/app/assets/lib/logger/logger.ts","../file:/D:/XForgTestUIGame/assets/res-native/tool/file:/D:/XForgTestUIGame/assets/res-native/tool/RefreshOrLoadState.ts","../file:/D:/XForgTestUIGame/assets/app/file:/D:/XForgTestUIGame/assets/app/setting.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/manager/sound/file:/D:/XForgTestUIGame/extensions/app/assets/manager/sound/SoundManager.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/lib/storage/file:/D:/XForgTestUIGame/extensions/app/assets/lib/storage/storage.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/lib/task/file:/D:/XForgTestUIGame/extensions/app/assets/lib/task/task.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/manager/timer/file:/D:/XForgTestUIGame/extensions/app/assets/manager/timer/TimerManager.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/manager/ui/file:/D:/XForgTestUIGame/extensions/app/assets/manager/ui/UIManager.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/manager/ui/comp/file:/D:/XForgTestUIGame/extensions/app/assets/manager/ui/comp/UIMgrLoading.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/manager/ui/comp/file:/D:/XForgTestUIGame/extensions/app/assets/manager/ui/comp/UIMgrShade.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/manager/ui/comp/file:/D:/XForgTestUIGame/extensions/app/assets/manager/ui/comp/UIMgrToast.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/manager/ui/comp/file:/D:/XForgTestUIGame/extensions/app/assets/manager/ui/comp/UIMgrToastCell.ts","../file:/D:/XForgTestUIGame/extensions/app/assets/manager/ui/comp/file:/D:/XForgTestUIGame/extensions/app/assets/manager/ui/comp/UIMgrZOrder.ts"],"names":["App","_Core","_inheritsLoose","call","_createClass","key","get","_inst","Core","app","inst","window","cccInited","game","once","Game","EVENT_ENGINE_INITED","appInited","EventType","EVENT_APPINIT_FINISHED","_RF","pop","ccclass","_decorator","property","AppInit","_dec","_dec2","Sprite","_class","_class2","_BaseAppInit","_this","_len","arguments","length","args","Array","_key","apply","concat","_initializerDefineProperty","_descriptor","_assertThisInitialized","_proto","prototype","onLoad","onFinish","BaseAppInit","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer","Audio","volume","volumeScale","mute","endedCallback","startedCallback","_playing","_paused","audioSource","node","Node","addComponent","AudioSource","on","ENDED","onAudioEnded","STARTED","onAudioStarted","play","clip","onEnded","onStarted","playing","paused","stop","emit","pause","resume","setVolume","scale","getVolume","setVolumeScale","getVolumeScale","setLoop","loop","getLoop","setMute","getMute","clear","destroy","set","value","AudioEngine","audioID","endedCallbackMap","Map","effectMap","music","musicMute","musicVolumeScale","effectMute","effectVolumeScale","playEffect","audioClip","audio","AudioManager","getAudio","putAudio","callback","stopEffect","id","_this$effectMap$get","stopAllEffects","forEach","pauseEffect","_this$effectMap$get2","pauseAllEffects","resumeEffect","_this$effectMap$get3","resumeAllEffects","setEffectMute","_this$effectMap$get4","getEffectMute","_this$effectMap$get5","setEffectVolume","_this$effectMap$get6","getEffectVolume","_this$effectMap$get7","setAllEffectsVolume","setEffectVolumeScale","_this$effectMap$get8","getEffectVolumeScale","_this$effectMap$get9","setGlobalEffectsVolumeScale","getGlobalEffectsVolumeScale","setGlobalEffectsMute","getGlobalEffectsMute","playMusic","stopMusic","pauseMusic","resumeMusic","setMusicVolume","getMusicVolume","setMusicVolumeScale","_this$music","getMusicVolumeScale","setMusicMute","_this$music2","getMusicMute","setEndedCallback","_this$music3","has","pauseAll","resumeAll","stopAll","audioArray","push","AdminBundleName","ModelBundleName","ControlBundleName","ControllerBundleName","ManagerBundleName","_Component","_base_mgr_completed","_base_user_completed","_base_inited","_base_finished","startInit","_this2","projectBundles","settings","querySettings","Settings","Category","ASSETS","lib","task","createAny","add","next","retry","indexOf","assetManager","preloadAny","url","ext","err","loadBundle","start","onProgress","_base_total","BaseManager","init","getBundle","innerNextInit","onUserInit","_base_completed","innerFinished","_this3","Manager","Sound","setting","defaultEffectName","playDefaultEffect","e","target","manager","ui","onceUserInterface","TOUCH_END","event","getComponent","Button","setTimeout","isValid","sound","eventPhase","EventTouch","CAPTURING_PHASE","onEnable","TOUCH_START","onDisable","off","showDefault","defaultMusicName","onTouch","_this4","isMusicPlaying","isMusicPaused","replayMusic","offUserInterface","onUserInterface","playDefaultMusic","nextInit","getUserAssetNum","completed","total","Math","max","getTotalAssetNum","_base_mgr_total","_base_user_total","min","Component","CallbackInfo","CallbackList","callbacks","size","index","info","splice","remove","removeByCallback","removeByTarget","EventEmitter","listeners","_proto2","cb","toString","targetOff","Object","hasOwnProperty","element","SuperBaseControl","t","_proto3","_len2","_key2","_len3","_key3","_len4","_key4","_len5","_key5","BaseControl","Event","_class5","_SuperBaseControl","_base_inst","SuperBaseController","_key6","Logger","create","name","BaseController","_SuperBaseController","Proxy","BaseData","console","log","UserManagerPath","uuid","UUID","Date","now","loadBegin","loadFinish","loadError","initBegin","initFinish","_base_event","EventTarget","_base_manager_name","js","getClassName","slice","managerName","constructor","toLocaleLowerCase","error","resetInEditor","widget","Widget","isAlignBottom","isAlignLeft","isAlignRight","isAlignTop","top","left","right","bottom","alignMode","AlignMode","ON_WINDOW_RESIZE","onInited","onFinished","finish","createUUID","_this$_base_event","data","bundle","count","sysMgrCount","array","getDirWithPath","Prefab","item","path","endsWith","getUserAssetUrls","pathArr","progress","complete","urls","totalAsset","completeAsset","_window","startTime","performance","_window2","endTime","toFixed","userMgrList","sysMgrList","timer","loader","initSysMgrTask","createASync","loadUserMgrTask","UserManagerRoot","root","getChildByPath","_window3","basename","load","prefab","_window4","instantiate","parent","active","EVENT_SYS_MANAGER_INITED","initUserMgrTask","EVENT_USER_MANAGER_INITED","EVENT_MANAGER_INITED","EVENT_MANAGER_FINISHED","bind","toLocaleString","warn","disallowMultiple","BlockEvents","TOUCH_MOVE","TOUCH_CANCEL","MOUSE_DOWN","MOUSE_MOVE","MOUSE_UP","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_WHEEL","HideEvent","Enum","ViewType","ViewState","Group","displayOrder","Infinity","style","PaperAllToOwner","BaseView","_dec3","group","type","tooltip","_dec4","_dec5","visible","is3D","_dec6","isPage","_dec7","_class3","_base_view_created","_base_view_state","Hid","_base_view_name","_base_touch_enable","_base_show_hide_delays","_base_mini_show","Set","_descriptor2","_descriptor3","_descriptor4","_descriptor5","miniViews","BindControl","Control","_BaseView","BindController","Controller","_dec8","_class4","_BaseView2","isViewValid","Page","isPaper","Paper","isPaperAll","PaperAll","isPop","Pop","isTop","Top","is2D","Scene","viewName","scene","director","getScene","isMiniViewShow","setTouchEnabled","enabled","blockPropagation","blockInput","propagationStopped","stopPropagation","propagationImmediateStopped","onBaseViewCreate","uiTransform","UITransform","hitTest","i","hideAllMiniViews","hide","hideMiniViews","_ref","views","sortUserInterface","showMiniViews","_ref2","onShow","onHide","typeName","createSync","_loop","names","createMixMiniViewsTask","_this5","filter","baseName","aSync","result","scheduleOnce","_this5$_base_mini_sho","show","silent","attr","zIndex","_this5$_base_mini_sho2","owner","onError","code","_this5$_base_mini_sho3","UI","ErrorCode","LoadError","setNodeAttr","setPosition","position","x","y","siblingIndex","setSiblingIndex","beforeShow","_this6","Showed","changeState","BeforeShow","Showing","refreshShade","shift","isNextCalled","BeforeHide","beforeHide","Hiding","hideEvent","release","focus","boo","onFocus","onLostFocus","loadRes","preloadRes","loadResDir","preloadResDir","setFont","onComplete","Font","font","setSpine","sp","SkeletonData","skeletonData","setSprite","SpriteFrame","spriteFrame","onShade","_hideEvent","_singleton","_captureFocus","_Core$inst","_shade","_Core$inst2","_blockInput","singleton","captureFocus","shade","getOwnPropertyDescriptor","Lib","storage","debug","logger","Config","Data","Store","controller","eventTarget","EventMap","Director","EVENT_RESET","config","store","getClassById","setClassAlias","DebugViewRuntimeControl","_single","strSingle","strComposite","strMisc","compositeModeToggleList","singleModeToggleList","miscModeToggleList","textComponentList","labelComponentList","textContentList","hideButtonLabel","_currentColorIndex","strColor","color","Color","WHITE","BLACK","RED","GREEN","BLUE","canvas","Canvas","halfScreenWidth","width","halfScreenHeight","height","miscNode","getChildByName","buttonNode","titleNode","newLabel","EnableAllCompositeModeButton","setScale","labelComponent","Label","string","overflow","currentRow","newNode","singleModeToggle","textComponent","getComponentInChildren","RichText","Toggle","TOGGLE","toggleSingleMode","CLICK","enableAllCompositeMode","changeColorButton","changeTextColor","HideButton","hideUI","compositeModeToggle","toggleComponent","isChecked","toggleLightingWithAlbedo","toggleCSMColoration","toggleCompositeMode","isTextMatched","textUI","textDescription","tempText","String","findIndex","search","substr","toggle","debugView","singleMode","enableCompositeMode","lightingWithAlbedo","csmLayerColoration","button","activeValue","update","deltaTime","unobservable","EventManager","_BaseManager","events","_delete","rootName","cccReady","appReady","JmClickComponent","performClick","startPos","OnClickTouchEnd","onDestroy","getType","getLocation","pos","dst","subtract","onItemClick","menu","requireComponent","JmHorizontalListView","ScrollView","_descriptor6","_descriptor7","footerController","onPullLeftToLoad","hasMore","scrollView","footer","footerWidth","_touchStartX","_touchStartFromLeft","footerHolderWidth","isUserTouched","loadingState","RefreshOrLoadState","NONE","componentName","showingViews","recycledViews","itemViewDirty","itemViewWidths","_data","_dirty","_sizeDirty","_checkRight","content","anchorX","anchorY","onTouchStart","onTouchEnd","onTouchMove","onTouchCancel","getLocationX","floor","getScrollOffset","getData","setData","setComponentName","updateSize","vertical","horizontal","getNormalContentWidth","getContentWidth","pullLeftToLoadEnabled","getItemPosOffset","getItemCount","leftOffset","rightOffset","sum","getItemWidthWithSpacing","undefined","itemWidth","spacing","getListLeftRightVisiblePos","scrollX","leftVisibleX","rightVisibleX","isVisible","_this$getListLeftRigh","itemLeftX","itemRightX","dt","child","getItemView","component","updateItem","getItemWidth","addChild","recycleChild","checkFooterView","isRight","scrollToOffset","Vec2","getMaxScrollOffset","footerView","JmRefreshFooter","setState","viewBottomY","contentBottomY","footerOffset","removeFromParent","itemView","itemPrefab","onScrollEvent","sender","SCROLLING","startPullLeftLoad","markChildrenDirty","notifyChange","checkRight","notifyItemChange","updateHeight","setPullLeftToLoadListener","listener","REFRESHING","offset","maxOffset","ceil","updateLoadingState","onLoadComplete","COMPLETE","state","onLoadingStateChange","newState","JmListView","_descriptor8","_descriptor9","_descriptor10","headerController","onPullDownToRefresh","_descriptor11","_descriptor12","_descriptor13","onPullUpToLoad","header","headerHeight","footerHeight","_touchStartY","_touchStartFromTop","refreshState","footerHolderHeight","itemViewHeights","_checkBottom","extraData","elastic","bounceDuration","pullDownToRefreshEnabled","cancelInnerEvents","getLocationY","offsetY","checkPullDownRefresh","onScrollOffset","startPullDownRefresh","newHeight","getNormalContentHeight","getContentHeight","pullUpToLoadEnabled","refreshFooterShow","setTopMargin","num","topMargin","bottomMargin","getItemHeightWithSpacing","itemHeight","getListTopBottomVisiblePos","scrollY","halfHeight","topVisibleY","bottomVisibleY","_this$getListTopBotto","itemTopY","itemBottomY","checkHeaderView","isBottom","headerView","JmRefreshHeader","checkPullUpLoad","checkBottom","emptyView","sys","getNetworkType","NetworkType","noNetworkImg","emptyPic","emptyImg","setPullUpToLoadListener","setPullDownToRefreshListener","updateRefreshState","READY_TO_REFRESH","pullDownRefresh","stopAutoScroll","onRefreshComplete","scrollToTop","EMPTY","stopPullDownRefresh","COMPLETING","onRefreshStateChange","setExtraData","getExtraData","handleSuccess","isLoadMore","listView","newData","isArray","handleFailure","loadMore","Orientation","JmListViewItem","itemId","onTouchEvent","dstx","abs","dsty","getItemHeight","JmNodePool","_NodePool","_cellPfb","NodePool","JmNodePoolMgr","InitNodePool","poolKey","cellPfb","poolHandlerComp","DestroyPool","pool","_nodePoolData","GetCell","GetPool","PutCell","put","IdentityCellPool","loading","Skeleton","_state","refreshSpine","JmRoomData","_BaseData","_roomData","initRoomData","roomData","updateRoomData","updateRoomProperty","k","v","getIdentities","getIdentity","getRoomNum","getSeats","JmRoomDataMgr","OnReceiveServerData","serverData","InitRoomsData","len","InitRoomData","roomKey","room","GetRoom","CreateRoom","InitCurrentRoom","CleanRooms","_offset","_roomsData","_roomCfg","_roomsKeys","_gameState","CleanRoom","GetOffSet","GetRoomByRoomKey","GetRoomNum","_currentRoomKey","GetRoomIdentities","GetRoomIdentity","GetRoomSeats","InitCurrentRoomProto","_roomCount","_currentRoomData","_joinRoomsList","unshift","JSON","stringify","_isOwner","GetCurrentRoomInfo","GetCurrentRoomKey","SetCurrentNullRoomKey","SetRoomDayOrNight","currentType","GetRoomDayOrNight","delRoomCfg","setRoomCfg","vule","getRoomCfg","getRoomCount","setRoomCount","setGameState","getGameState","setGameDay","bol","_isDay","getGameDay","setOwner","isOwner","getLoadKey","_loadKey","setLoadKey","REGEX","Command","command","cache","Loader","assetMap","loadingMap","preload","params","preloadDir","version","asset","_extends","addRef","decRef","loadAsync","Promise","resolve","loadDir","results","assets","loadDirAsync","loadRemote","loadRemoteAsync","onFail","onSuccess","imageAsset","createWithImage","releaseAll","assetList","LoaderManager","handle","_this7","res","Texture2D","TextureCube","SceneAsset","_this8","_this9","_ref3","_assetManager$getBund","_bundle","Asset","ctor","releaseUnused","_assetManager$getBund2","releaseUnusedAssets","_ref4","loadBundleAsync","_this11","removeBundle","b","reloadBundle","_ref5","_assetManager$cacheMa","_this12","baseUrl","configUrl","test","suffix","downloader","remoteServerAddress","cacheManager","removeCache","ab","AssetManager","Bundle","json","base","reloadBundleAsync","_this13","_ref6","_this14","_this15","empty","level","styleColor","title","titleColor","UIManager","defaultUI","autoFit","delay","begin","end","speed","blur","SoundManager","localStorage","setItem","getItem","parse","MusicName","EffectName","BundleName","musicMuteCacheKey","effectMuteCacheKey","musicVolumeScaleCacheKey","effectVolumeScaleCacheKey","defaultMusicVolume","defaultEffectVolume","audioCache","effectInterval","playingMusic","_setting$preload","AudioClip","EVENT_HIDE","EVENT_SHOW","bundleName","Function","_ref7","soundName","onPlay","setButtonEffect","opts","_ref8","_ref8$volume","_ref8$interval","interval","_ref9","_ref9$volume","_ref9$loop","_ref9$interval","isEffectMute","playEffectAsync","_playEffectAsync","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","abrupt","_x","_ref10","_ref10$volume","_ref10$force","force","isMusicMute","playMusicAsync","_this$playingMusic$na","split","isCache","_this$playingMusic$na2","chars","encode","text","encrypted","charCode","charCodeAt","fromCharCode","decode","encryptedText","decrypted","weekOfYear","curDate","a","getFullYear","getMonth","c","getDate","date1","date2","d","round","valueOf","getDay","getWeekUpdateTime","date","year","week","getDayUpdateTime","toLocaleDateString","Storage","_cache","secretKey","removeItem","setWeek","updateTime","getWeek","setDay","Sync","running","list","isRunning","isStop","timeout","ASync","Any","handles","async","execute","fun","retryMax","retryFinish","DailyTimer","getDayTimeMs","getHours","getMinutes","getSeconds","getMilliseconds","parseTimeToMs","h","m","s","time","startMs","endMs","checkDay","_time$split","startSegment","_time$split$","endSegment","_startSegment$split$m","map","part","parseInt","_startSegment$split$m2","startH","_startSegment$split$m3","startM","_startSegment$split$m4","startS","_endSegment$split$map","_endSegment$split$map2","endH","_endSegment$split$map3","endM","_endSegment$split$map4","endS","isInRange","currentMs","dateDay","IntervalTimer","elapsed","Timer","intervalTimer","dailyTimers","register","unregister","unregisterAll","registerDailyTrigger","unregisterDailyTrigger","unregisterAllDailyTrigger","TimerManager","timers","_proto4","UIScene","UserInterfacePath","ViewTypes","ViewName","MiniViewName","stringCaseNegate","str","replace","searchStr","startIndex","UserInterface","toast","defaultData","currScene","currPage","currFocus","prefabCache","sceneCache","touchEnabled","touchMaskMap","showLoadingMap","uiLoadingMap","uiShowingMap","showQueue","getComponentsInChildren","Camera","camera","priority","far","near","addPersistRootNode","createTypeRoot","shadePre","loadingPre","toastPre","designResolution","SCREEN","windowSize","screen","resolutionPolicy","policy","autoFitResolutionPolicy","ResolutionPolicy","FIXED_HEIGHT","view","setResolutionPolicy","FIXED_WIDTH","schedule","equals","d2","layer","Layers","UI_2D","UIMgrZOrder","addTouchMaskListener","removeTouchMaskListener","getBaseView","components","find","getViewInParents","com","getViewInChildren","children","getUIClass","getClassByName","getUIPath","getUIPrefix","getUIParent","prefix","viewType","getUIInScene","multiple","getUIInShowing","_name","getNativeBundleName","uiName","oldBundleName","getResBundleName","initBundle","installUI","uiBundles","isScene","getSceneInfo","uninstallUI","resBundle","naBundle","nameOrCom","isShow","nodes","every","exclude","keys","checkUIValid","View","valid","uiRoots","uiRoot","isCaptureFocus","isNeedShade","shadeSetting","assign","UIMgrShade","z","shadeIndex","getSiblingIndex","nodeIndex","parsingPrefab","_node$getComponent","updateAlignment","parsingScene","addUILoadingUuid","loadingUuid","removeUILoadingUuid","createUI","_this10","showLoading","uiLoadingUuid","hideLoading","isSingleton","showToast","isInQueue","isLoading","putInShowQueue","queue","consumeShowQueue","ret","showUI","_params$top","_params$attr","_params$silent","LogicError","oldCom","runSceneImmediate","autoReleaseAssets","_params$silent2","InvalidError","showAsync","hideAll","_temp","_this16","_this17","UIMgrLoading","_this$loading$getComp","_this$loading$getComp2","addTouchMask","_this18","removeTouchMask","message","UIMgrToast","clearToast","targetOffUserInterface","_this$UserInterface","updateZOrder","screenshot","renderTexture","cameras","cameraList","sort","enabledInHierarchy","targetTexture","cameraFilter","cameraList2","pipeline","render","cameraComponent","ringScale","reverse","angleSpeed","ringSpeed","inited","drawing","timedown","angle","Graphics","onDraw","graphics","centerX","centerY","r","allPI","PI","offst","arc","stroke","Size","UIOpacity","Material","blurFrame","sprite","customMaterial","flipUVY","EVENT_BEFORE_RENDER","_this2$blurFrame2","RenderTexture","reset","_this2$blurFrame","texture","blurMaterial","setProperty","shadeFrame","opacity","_this$blurFrame","_this$blurFrame2","uiOpacity","_delay","_begin","_end","_speed","lifeTime","outTime","squeezeSpeed","cell","UIMgrToastCell","tween","to","Tween","stopAllByTarget","recovery","zero","curr","currUT","lastMaxY","currMinY","addLen","last","lastUT","winSize","getVisibleSize","Overflow","RESIZE_HEIGHT","updateRenderData","unuse","zOrder","tempArr","checkUpdateZOrder","CHILD_ADDED","onChildAdded","CHILD_REMOVED","onChildRemoveed","CHILDREN_ORDER_CHANGED","SIBLING_ORDER_CHANGED","EVENT_AFTER_UPDATE","TRANSFORM_CHANGED"],"mappings":"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","file":"all.js","sourcesContent":["import { Game, game } from 'cc';\r\nimport { DEBUG, DEV, EDITOR } from 'cc/env';\r\nimport Core from '../../extensions/app/assets/Core';\r\nimport { IApp } from '../app-builtin/app-admin/executor';\r\nimport { appInited, appReady, cccInited, cccReady } from './handle';\r\n\r\nexport class App extends Core<IApp> {\r\n    protected static _inst: App = null;\r\n    static get inst() {\r\n        if (!this._inst) this._inst = new App();\r\n        return this._inst;\r\n    }\r\n\r\n    private constructor() {\r\n        super();\r\n    }\r\n}\r\n\r\nexport const app = App.inst;\r\n\r\nif (DEBUG) {\r\n    //@ts-ignore\r\n    window['app'] = app;\r\n    //@ts-ignore\r\n    window['App'] = App;\r\n}\r\n\r\nif (!EDITOR || DEV) {\r\n    cccReady && cccReady(app);\r\n    appReady && appReady(app);\r\n    cccInited && game.once(Game.EVENT_ENGINE_INITED, function () { cccInited(app); });\r\n    appInited && app.once(App.EventType.EVENT_APPINIT_FINISHED, function () { appInited(app); });\r\n}","import { Sprite, SpriteFrame, _decorator } from 'cc';\r\nimport BaseAppInit from '../../../extensions/app/assets/base/BaseAppInit';\r\n// import { app } from '../../app/app';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('AppInit')\r\nexport class AppInit extends BaseAppInit {\r\n    // @property(Button)\r\n    // login: Button;\r\n    @property(Sprite)\r\n    bg: Sprite;\r\n\r\n    // /**\r\n    // * 获得用户资源总量，这里返回几，就需要用户自行调用几次nextInit\r\n    // */\r\n    // protected getUserAssetNum(): number {\r\n    //     return 1;\r\n    // }\r\n\r\n    // protected onUserInit() {\r\n    //     this.login.node.active = true;\r\n    //     this.login.node.on(Button.EventType.CLICK, async () => {\r\n    //         // 登录\r\n    //         const uuid = app.manager.ui.showLoading();\r\n    //         await app.store.user.login();\r\n    //         app.manager.ui.hideLoading(uuid);\r\n    //         app.manager.ui.showToast('登录成功');\r\n    //         // 下一步\r\n    //         this.nextInit();\r\n    //     });\r\n    // }\r\n\r\n    onLoad() {\r\n        // this.login.node.active = false;\r\n        // app.Manager.Util.InitLayout();\r\n        // let self = this;\r\n        // if (app.Manager.Util.IsIphoneX()) {\r\n        //     app.manager.loader.load({\r\n        //         bundle: '', // 不传入bundle，默认为resources\r\n        //         path: 'bj_liuhai/spriteFrame',\r\n        //         type: SpriteFrame,\r\n        //         onComplete(asset) {\r\n        //             console.log('加载资源完成', asset);\r\n        //             self.bg.getComponent(Sprite).spriteFrame = asset;\r\n        //         }\r\n        //     })\r\n        // }\r\n        // else if (app.Manager.Util.IsIpad()) {\r\n        //     app.manager.loader.load({\r\n        //         bundle: '', // 不传入bundle，默认为resources\r\n        //         path: 'bj_pad/spriteFrame',\r\n        //         type: SpriteFrame,\r\n        //         onComplete(asset) {\r\n        //             console.log('加载资源完成', asset);\r\n        //             self.bg.getComponent(Sprite).spriteFrame = asset;\r\n        //         }\r\n        //     })\r\n        // }\r\n    }\r\n\r\n    onFinish() {\r\n    //     // 执行完成操作\r\n    //     this.node.destroy();\r\n    }\r\n}","import { AudioClip, AudioSource, Node } from 'cc';\r\n\r\nexport default class Audio {\r\n    private volume = 1;\r\n    private volumeScale = 1;\r\n    private mute = false;\r\n    private endedCallback: Function = null;\r\n    private startedCallback: Function = null;\r\n\r\n    private _playing = false;\r\n    public get playing() {\r\n        return this._playing;\r\n    }\r\n    private set playing(value) {\r\n        this._playing = value;\r\n    }\r\n\r\n    private _paused = false;\r\n    public get paused() {\r\n        return this._paused;\r\n    }\r\n    private set paused(value) {\r\n        this._paused = value;\r\n    }\r\n\r\n    private audioSource: AudioSource = null;\r\n    constructor() {\r\n        const node = new Node('audio');\r\n        this.audioSource = node.addComponent(AudioSource);\r\n        node.on(AudioSource.EventType.ENDED, this.onAudioEnded, this);\r\n        node.on(AudioSource.EventType.STARTED, this.onAudioStarted, this);\r\n    }\r\n\r\n    private onAudioEnded() {\r\n        if (this.endedCallback) {\r\n            const endedCallback = this.endedCallback;\r\n            this.endedCallback = null;\r\n            endedCallback();\r\n        }\r\n    }\r\n\r\n    private onAudioStarted() {\r\n        if (this.startedCallback) {\r\n            const startedCallback = this.startedCallback;\r\n            this.startedCallback = null;\r\n            startedCallback();\r\n        }\r\n    }\r\n\r\n    play(clip: AudioClip, onEnded: Function = null, onStarted: Function = null) {\r\n        this.audioSource.clip = clip;\r\n        this.endedCallback = onEnded;\r\n        this.startedCallback = onStarted;\r\n        this.audioSource.play();\r\n        this.playing = true;\r\n        this.paused = false;\r\n        return this;\r\n    }\r\n\r\n    stop() {\r\n        this.playing = false;\r\n        this.paused = false;\r\n        this.audioSource.stop();\r\n        this.audioSource.node.emit(AudioSource.EventType.ENDED);\r\n        return this;\r\n    }\r\n\r\n    pause() {\r\n        if (!this.playing) return this;\r\n\r\n        this.paused = true;\r\n        this.audioSource.pause();\r\n        return this;\r\n    }\r\n\r\n    resume() {\r\n        if (!this.playing) return this;\r\n        if (!this.paused) return this;\r\n\r\n        this.paused = false;\r\n        this.audioSource.play();\r\n        return this;\r\n    }\r\n\r\n    setVolume(volume = 1, scale?: number) {\r\n        this.volume = volume;\r\n        if (typeof scale === 'number') this.volumeScale = scale;\r\n        this.audioSource.volume = volume * this.volumeScale * (this.mute ? 0 : 1);\r\n        return this;\r\n    }\r\n\r\n    getVolume() {\r\n        return this.volume;\r\n    }\r\n\r\n    setVolumeScale(scale = 1) {\r\n        this.volumeScale = scale;\r\n        this.audioSource.volume = this.volume * scale * (this.mute ? 0 : 1);\r\n        return this;\r\n    }\r\n\r\n    getVolumeScale() {\r\n        return this.volumeScale;\r\n    }\r\n\r\n    setLoop(loop: boolean) {\r\n        this.audioSource.loop = loop;\r\n        return this;\r\n    }\r\n\r\n    getLoop() {\r\n        return this.audioSource.loop;\r\n    }\r\n\r\n    setMute(mute = true) {\r\n        this.mute = mute;\r\n        this.setVolume(this.volume);\r\n        return this;\r\n    }\r\n\r\n    getMute() {\r\n        return this.mute;\r\n    }\r\n\r\n    onEnded(endedCallback: Function) {\r\n        this.endedCallback = endedCallback;\r\n        return this;\r\n    }\r\n\r\n    clear() {\r\n        this.volume = 1;\r\n        this.volumeScale = 1;\r\n        this.mute = false;\r\n        this.paused = false;\r\n        this.endedCallback = null;\r\n        this.startedCallback = null;\r\n        if (this.audioSource) {\r\n            this.audioSource.stop();\r\n            this.audioSource.volume = 1;\r\n            this.audioSource.clip = null;\r\n            this.audioSource.loop = false;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    destroy() {\r\n        this.clear();\r\n        this.audioSource.destroy();\r\n        this.audioSource.node.destroy();\r\n        this.audioSource = null;\r\n    }\r\n}","import { AudioClip } from 'cc';\r\nimport Audio from './Audio';\r\nimport AudioManager from './AudioManager';\r\n\r\nexport default class AudioEngine {\r\n    private static _inst: AudioEngine = null;\r\n    static get inst() {\r\n        if (!this._inst) this._inst = new AudioEngine();\r\n        return this._inst;\r\n    }\r\n    private constructor() { }\r\n\r\n    /**effect的id从1开始，music的id始终为0 */\r\n    private audioID = 1;\r\n    private endedCallbackMap: Map<number, Function> = new Map();\r\n    private effectMap: Map<number, Audio> = new Map();\r\n    private music: Audio = null;\r\n\r\n    private musicMute = false;\r\n    private musicVolumeScale = 1;\r\n\r\n    private effectMute = false;\r\n    private effectVolumeScale = 1;\r\n\r\n    ////////////////////////////////\r\n    // 音效                        //\r\n    ////////////////////////////////\r\n    playEffect(audioClip: AudioClip, volume = 1, loop = false, onStarted: (audioID: number) => any = null, onEnded: Function = null) {\r\n        if (this.audioID > 100000) this.audioID = 1;\r\n\r\n        const audioID = this.audioID++;\r\n        const audio = AudioManager.inst.getAudio();\r\n        this.effectMap.set(audioID, audio);\r\n        if (onEnded) this.endedCallbackMap.set(audioID, onEnded);\r\n\r\n        audio.setLoop(loop)\r\n            .setMute(this.effectMute)\r\n            .setVolume(volume, this.effectVolumeScale)\r\n            .play(audioClip, () => {\r\n                AudioManager.inst.putAudio(audio);\r\n                this.effectMap.delete(audioID);\r\n                const callback = this.endedCallbackMap.get(audioID);\r\n                if (callback) {\r\n                    this.endedCallbackMap.delete(audioID);\r\n                    callback();\r\n                }\r\n            }, () => {\r\n                onStarted && onStarted(audioID);\r\n            });\r\n\r\n        return audioID;\r\n    }\r\n\r\n    stopEffect(id: number) {\r\n        return !!this.effectMap.get(id)?.stop();\r\n    }\r\n\r\n    stopAllEffects() {\r\n        this.effectMap.forEach((audio) => {\r\n            audio.stop();\r\n        });\r\n    }\r\n\r\n    pauseEffect(id: number) {\r\n        return !!this.effectMap.get(id)?.pause();\r\n    }\r\n\r\n    pauseAllEffects() {\r\n        this.effectMap.forEach((audio) => {\r\n            audio.pause();\r\n        });\r\n    }\r\n\r\n    resumeEffect(id: number) {\r\n        return !!this.effectMap.get(id)?.resume();\r\n    }\r\n\r\n    resumeAllEffects() {\r\n        this.effectMap.forEach((audio) => {\r\n            audio.resume();\r\n        });\r\n    }\r\n\r\n    setEffectMute(id: number, mute: boolean) {\r\n        return !!this.effectMap.get(id)?.setMute(mute);\r\n    }\r\n\r\n    getEffectMute(id: number) {\r\n        return !!this.effectMap.get(id)?.getMute();\r\n    }\r\n\r\n    setEffectVolume(id: number, volume: number) {\r\n        return !!this.effectMap.get(id)?.setVolume(volume);\r\n    }\r\n\r\n    getEffectVolume(id: number) {\r\n        return this.effectMap.get(id)?.getVolume() || 0;\r\n    }\r\n\r\n    setAllEffectsVolume(volume: number) {\r\n        this.effectMap.forEach((audio) => {\r\n            audio.setVolume(volume);\r\n        });\r\n    }\r\n\r\n    setEffectVolumeScale(id: number, volume: number) {\r\n        return !!this.effectMap.get(id)?.setVolumeScale(volume);\r\n    }\r\n\r\n    getEffectVolumeScale(id: number) {\r\n        return this.effectMap.get(id)?.getVolumeScale() || 0;\r\n    }\r\n\r\n    setGlobalEffectsVolumeScale(scale: number) {\r\n        this.effectVolumeScale = scale;\r\n        this.effectMap.forEach((audio) => {\r\n            audio.setVolumeScale(scale);\r\n        });\r\n    }\r\n\r\n    getGlobalEffectsVolumeScale() {\r\n        return this.effectVolumeScale;\r\n    }\r\n\r\n    setGlobalEffectsMute(mute: boolean) {\r\n        this.effectMute = mute;\r\n        this.effectMap.forEach((audio) => {\r\n            audio.setMute(mute);\r\n        });\r\n    }\r\n\r\n    getGlobalEffectsMute() {\r\n        return this.effectMute;\r\n    }\r\n\r\n    ////////////////////////////////\r\n    // 音乐                        //\r\n    ////////////////////////////////\r\n    playMusic(audioClip: AudioClip, volume = 1, onStarted: Function = null) {\r\n        this.stopMusic();\r\n\r\n        this.music = AudioManager.inst.getAudio();\r\n        this.music\r\n            .setLoop(true)\r\n            .setMute(this.musicMute)\r\n            .setVolume(volume, this.musicVolumeScale)\r\n            .play(audioClip, null, onStarted);\r\n\r\n        return 0;\r\n    }\r\n\r\n    stopMusic() {\r\n        if (!this.music) return false;\r\n        this.music.destroy();\r\n        this.music = null;\r\n        return true;\r\n    }\r\n\r\n    pauseMusic() {\r\n        if (!this.music) return false;\r\n        this.music.pause();\r\n        return true;\r\n    }\r\n\r\n    resumeMusic() {\r\n        if (!this.music) return false;\r\n        this.music.resume();\r\n        return true;\r\n    }\r\n\r\n    setMusicVolume(volume: number) {\r\n        if (!this.music) return false;\r\n        this.music.setVolume(volume);\r\n        return true;\r\n    }\r\n\r\n    getMusicVolume() {\r\n        if (!this.music) return -1;\r\n        return this.music.getVolume();\r\n    }\r\n\r\n    setMusicVolumeScale(scale: number) {\r\n        this.musicVolumeScale = scale;\r\n        this.music?.setVolumeScale(scale);\r\n        return true;\r\n    }\r\n\r\n    getMusicVolumeScale() {\r\n        return this.musicVolumeScale;\r\n    }\r\n\r\n    setMusicMute(mute: boolean) {\r\n        this.musicMute = mute;\r\n        this.music?.setMute(mute);\r\n        return true;\r\n    }\r\n\r\n    getMusicMute() {\r\n        return this.musicMute;\r\n    }\r\n\r\n    ////////////////////////////////\r\n    // 通用                        //\r\n    ////////////////////////////////\r\n    setEndedCallback(audioID: number, callback: Function) {\r\n        if (audioID === 0) {\r\n            return !!this.music?.onEnded(callback);\r\n        } else {\r\n            if (this.effectMap.has(audioID)) {\r\n                this.endedCallbackMap.set(audioID, callback);\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n    stop(audioID: number) {\r\n        if (audioID === 0) {\r\n            return this.stopMusic();\r\n        } else {\r\n            return this.stopEffect(audioID);\r\n        }\r\n    }\r\n\r\n    pause(audioID: number) {\r\n        if (audioID === 0) {\r\n            return this.pauseMusic();\r\n        } else {\r\n            return this.pauseEffect(audioID);\r\n        }\r\n    }\r\n\r\n    resume(audioID: number) {\r\n        if (audioID === 0) {\r\n            return this.resumeMusic();\r\n        } else {\r\n            return this.resumeEffect(audioID);\r\n        }\r\n    }\r\n\r\n    pauseAll() {\r\n        this.pauseMusic();\r\n        this.pauseAllEffects();\r\n    }\r\n\r\n    resumeAll() {\r\n        this.resumeMusic();\r\n        this.resumeAllEffects();\r\n    }\r\n\r\n    stopAll() {\r\n        this.stopMusic();\r\n        this.stopAllEffects();\r\n    }\r\n\r\n    setVolume(audioID: number, volume: number) {\r\n        if (audioID === 0) {\r\n            return this.setMusicVolume(volume);\r\n        } else {\r\n            return this.setEffectVolume(audioID, volume);\r\n        }\r\n    }\r\n\r\n    getVolume(audioID: number) {\r\n        if (audioID === 0) {\r\n            return this.getMusicVolume();\r\n        } else {\r\n            return this.getEffectVolume(audioID);\r\n        }\r\n    }\r\n\r\n    setVolumeScale(audioID: number, scale: number) {\r\n        if (audioID === 0) {\r\n            return this.setMusicVolumeScale(scale);\r\n        } else {\r\n            return this.setEffectVolumeScale(audioID, scale);\r\n        }\r\n    }\r\n\r\n    getVolumeScale(audioID: number) {\r\n        if (audioID === 0) {\r\n            return this.getMusicVolumeScale();\r\n        } else {\r\n            return this.getEffectVolumeScale(audioID);\r\n        }\r\n    }\r\n}","import Audio from './Audio';\r\n\r\nexport default class AudioManager {\r\n    private static _inst: AudioManager = null;\r\n    static get inst() {\r\n        if (!this._inst) this._inst = new AudioManager();\r\n        return this._inst;\r\n    }\r\n    private constructor() { }\r\n\r\n    private audioArray: Audio[] = [];\r\n\r\n    getAudio() {\r\n        if (this.audioArray.length) {\r\n            return this.audioArray.pop();\r\n        }\r\n        return new Audio();\r\n    }\r\n\r\n    putAudio(audio: Audio) {\r\n        audio.clear();\r\n        this.audioArray.push(audio);\r\n    }\r\n}","import { Button, Component, EventTouch, Node, Settings, _decorator, assetManager, isValid, settings, warn } from 'cc';\r\nimport { EDITOR } from 'cc/env';\r\nimport Core from '../Core';\r\nimport BaseManager from './BaseManager';\r\nconst { ccclass } = _decorator;\r\n\r\nconst AdminBundleName = 'app-admin';\r\nconst ModelBundleName = 'app-model';\r\nconst ControlBundleName = 'app-control';\r\nconst ControllerBundleName = 'app-controller';\r\nconst ManagerBundleName = 'app-manager';\r\nconst DontRewriteFuns = ['startInit', 'nextInit'];\r\n\r\n@ccclass('BaseAppInit')\r\nexport default abstract class BaseAppInit extends Component {\r\n    private get _base_mgr_total() {\r\n        return Math.max(0, BaseManager.getTotalAssetNum(assetManager.getBundle(ManagerBundleName)));\r\n    }\r\n    private get _base_user_total() {\r\n        return Math.max(0, this.getUserAssetNum());\r\n    }\r\n    private get _base_total() {\r\n        return this._base_mgr_total + this._base_user_total;\r\n    }\r\n\r\n    private _base_mgr_completed = 0;\r\n    private _base_user_completed = 0;\r\n    private get _base_completed() {\r\n        return this._base_mgr_completed + Math.min(this._base_user_total, this._base_user_completed);\r\n    }\r\n\r\n    private _base_inited = false;\r\n    private _base_finished = false;\r\n\r\n    constructor() {\r\n        super();\r\n        if (EDITOR) {\r\n            DontRewriteFuns.forEach((funName) => {\r\n                if (BaseAppInit.prototype[funName] !== this[funName]) {\r\n                    warn(`[AppInit] 不应该重写父类方法{${funName}}`);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * [避免重写] 开始初始化\r\n     */\r\n    protected startInit() {\r\n        const projectBundles = settings.querySettings(Settings.Category.ASSETS, 'projectBundles') as string[];\r\n        Core.inst.lib.task.createAny()\r\n            // 预加载control、model、admin、manager\r\n            .add([\r\n                (next, retry) => {\r\n                    // 预加载control(废弃)\r\n                    if (projectBundles.indexOf(ControlBundleName) === -1) return next();\r\n                    assetManager.preloadAny({ url: ControlBundleName }, { ext: 'bundle' }, null, (err) => {\r\n                        if (err) return retry(0.1);\r\n                        next();\r\n                    });\r\n                },\r\n                (next, retry) => {\r\n                    // 预加载controller\r\n                    if (projectBundles.indexOf(ControllerBundleName) === -1) return next();\r\n                    assetManager.preloadAny({ url: ControllerBundleName }, { ext: 'bundle' }, null, (err) => {\r\n                        if (err) return retry(0.1);\r\n                        next();\r\n                    });\r\n                },\r\n                (next, retry) => {\r\n                    // 预加载model\r\n                    if (projectBundles.indexOf(ModelBundleName) === -1) return next();\r\n                    assetManager.preloadAny({ url: ModelBundleName }, { ext: 'bundle' }, null, (err) => {\r\n                        if (err) return retry(0.1);\r\n                        next();\r\n                    });\r\n                },\r\n                (next, retry) => {\r\n                    // 预加载admin\r\n                    if (projectBundles.indexOf(AdminBundleName) === -1) return next();\r\n                    assetManager.preloadAny({ url: AdminBundleName }, { ext: 'bundle' }, null, (err) => {\r\n                        if (err) return retry(0.1);\r\n                        next();\r\n                    });\r\n                },\r\n                (next, retry) => {\r\n                    // 预加载manage\r\n                    if (projectBundles.indexOf(ManagerBundleName) === -1) return next();\r\n                    assetManager.preloadAny({ url: ManagerBundleName }, { ext: 'bundle' }, null, (err) => {\r\n                        if (err) return retry(0.1);\r\n                        next();\r\n                    });\r\n                }\r\n            ])\r\n            // 加载control(废弃)\r\n            .add((next, retry) => {\r\n                if (projectBundles.indexOf(ControlBundleName) === -1) return next();\r\n                assetManager.loadBundle(ControlBundleName, (err) => {\r\n                    if (err) return retry(0.1);\r\n                    next();\r\n                });\r\n            })\r\n            // 加载controller\r\n            .add((next, retry) => {\r\n                if (projectBundles.indexOf(ControllerBundleName) === -1) return next();\r\n                assetManager.loadBundle(ControllerBundleName, (err) => {\r\n                    if (err) return retry(0.1);\r\n                    next();\r\n                });\r\n            })\r\n            // 加载model\r\n            .add((next, retry) => {\r\n                if (projectBundles.indexOf(ModelBundleName) === -1) return next();\r\n                assetManager.loadBundle(ModelBundleName, (err) => {\r\n                    if (err) return retry(0.1);\r\n                    next();\r\n                });\r\n            })\r\n            // 加载admin\r\n            .add((next, retry) => {\r\n                if (projectBundles.indexOf(AdminBundleName) === -1) return next();\r\n                assetManager.loadBundle(AdminBundleName, (err) => {\r\n                    if (err) return retry(0.1);\r\n                    next();\r\n                });\r\n            })\r\n            // 加载manager\r\n            .add((next, retry) => {\r\n                if (projectBundles.indexOf(ManagerBundleName) === -1) return next();\r\n                assetManager.loadBundle(ManagerBundleName, (err) => {\r\n                    if (err) return retry(0.1);\r\n                    next();\r\n                });\r\n            })\r\n            .start(() => {\r\n                this._base_inited = true;\r\n                this.onProgress(0, this._base_total);\r\n\r\n                // 初始化app, 使用complete来实现onUserInit的切换以确保manager已完全加载\r\n                BaseManager.init(\r\n                    assetManager.getBundle(ManagerBundleName),\r\n                    () => {\r\n                        this.innerNextInit();\r\n                    },\r\n                    () => {\r\n                        this.onUserInit();\r\n                        if (this._base_completed < this._base_total) return;\r\n                        // 全部加载完成\r\n                        this.innerFinished();\r\n                    }\r\n                );\r\n            });\r\n    }\r\n\r\n    /**\r\n     * [不可重写] 用于内部初始化完成\r\n     */\r\n    private innerFinished() {\r\n        if (this._base_finished) return;\r\n        this._base_finished = true;\r\n        Core.emit(Core.EventType.EVENT_APPINIT_FINISHED);\r\n        // 默认音效(Button点击触发, 这个方案可以正常触发input事件)\r\n        if (Core.inst.Manager.Sound.setting.defaultEffectName) {\r\n            const playDefaultEffect = function (e: EventTouch) {\r\n                // SoundManager.setButtonEffect会将Button所在节点的useDefaultEffect设为false\r\n                if (e.target['useDefaultEffect'] === false) return;\r\n                Core.inst.manager.ui.onceUserInterface(Node.EventType.TOUCH_END, function (event: EventTouch) {\r\n                    if (!event.target.getComponent(Button)) return;\r\n                    setTimeout(() => {\r\n                        if (!isValid(Core.inst.manager.sound)) return;\r\n                        // 如果是scrollView中的button，在滑动后不播放点击音效\r\n                        if (event.eventPhase === EventTouch.CAPTURING_PHASE) return;\r\n                        Core.inst.manager.sound.playDefaultEffect();\r\n                    });\r\n                }, null, true);\r\n            };\r\n            const onEnable = Button.prototype.onEnable;\r\n            Button.prototype.onEnable = function () {\r\n                onEnable.call(this);\r\n                this.node.on(Node.EventType.TOUCH_START, playDefaultEffect);\r\n            };\r\n            const onDisable = Button.prototype.onDisable;\r\n            Button.prototype.onDisable = function () {\r\n                this.node.off(Node.EventType.TOUCH_START, playDefaultEffect);\r\n                onDisable.call(this);\r\n            };\r\n        }\r\n        return Core.inst.manager.ui.showDefault(() => {\r\n            // 初始化完成\r\n            this.onFinish();\r\n            // 默认音乐(默认播放)\r\n            if (Core.inst.Manager.Sound.setting.defaultMusicName) {\r\n                const onTouch = function () {\r\n                    if (!isValid(Core.inst.manager.sound)) return;\r\n                    if (Core.inst.manager.sound.isMusicPlaying && !Core.inst.manager.sound.isMusicPaused) {\r\n                        Core.inst.manager.sound.replayMusic(() => {\r\n                            Core.inst.manager.ui.offUserInterface(Node.EventType.TOUCH_START, onTouch, this, true);\r\n                        });\r\n                    } else {\r\n                        Core.inst.manager.ui.offUserInterface(Node.EventType.TOUCH_START, onTouch, this, true);\r\n                    }\r\n                };\r\n                Core.inst.manager.ui.onUserInterface(Node.EventType.TOUCH_START, onTouch, this, true);\r\n                Core.inst.manager.sound.playDefaultMusic(() => {\r\n                    Core.inst.manager.ui.offUserInterface(Node.EventType.TOUCH_START, onTouch, this, true);\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * [不可重写] 用于内部初始化\r\n     */\r\n    private innerNextInit() {\r\n        // 完成+1\r\n        this._base_mgr_completed += 1;\r\n        // 进度回调\r\n        this.onProgress(this._base_completed, this._base_total);\r\n    }\r\n\r\n    /**\r\n     * [避免重写] 初始化下一步，用户部分每完成一步需要调用一次\r\n     */\r\n    protected nextInit(): any {\r\n        if (this._base_finished) return;\r\n\r\n        if (!this._base_inited) {\r\n            // 完成+1\r\n            this._base_user_completed += 1;\r\n            // 进度回调\r\n            this.onProgress(this._base_completed, this._base_total);\r\n            return;\r\n        }\r\n\r\n        // 完成+1\r\n        this._base_user_completed += 1;\r\n        // 进度回调\r\n        this.onProgress(this._base_completed, this._base_total);\r\n\r\n        // 全部加载完成\r\n        if (this._base_completed >= this._base_total) {\r\n            this.innerFinished();\r\n        }\r\n    }\r\n\r\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    ////////////////////////////////////////////        以下可重写        ////////////////////////////////////////////\r\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n    /**\r\n     * [可以重写] 默认start调用startInit，可以重写后自定义时机\r\n     */\r\n    protected start(): any { this.startInit(); }\r\n\r\n    /**\r\n     * [可以重写] 获得用户资源总量，这里返回几，就需要用户自行调用几次nextInit\r\n     */\r\n    protected getUserAssetNum(): number { return 0; }\r\n\r\n    /**\r\n     * [可以重写] 用户初始化函数，会在框架初始化完成后调用\r\n     */\r\n    protected onUserInit(): any { return 0; }\r\n\r\n    /**\r\n     * [可以重写] 监听进度\r\n     * @param {Number} completed\r\n     * @param {Number} total\r\n     */\r\n    protected onProgress(completed: number, total: number): any { return completed / total; }\r\n\r\n    /**\r\n     * [可以重写] 初始化完成\r\n     */\r\n    protected onFinish() { }\r\n}","class CallbackInfo {\r\n    public callback: Function = null;\r\n    public target: unknown = null;\r\n    public once = false;\r\n\r\n    public constructor(callback: Function, target: unknown = null, once: boolean = false) {\r\n        this.callback = callback;\r\n        this.target = target;\r\n        this.once = once;\r\n    }\r\n}\r\n\r\ntype Parameters<T extends (...args: any) => any> = T extends (...args: infer P) => any ? P : any;\r\ntype AnyFunc = (...args: any[]) => any;\r\n\r\nclass CallbackList {\r\n    private callbacks: CallbackInfo[] = [];\r\n\r\n    public size() {\r\n        return this.callbacks.length;\r\n    }\r\n\r\n    public add(callback: Function, target: unknown = null, once: boolean = false) {\r\n        this.callbacks.push(new CallbackInfo(callback, target, once));\r\n    }\r\n\r\n    public emit(args: any[]) {\r\n        for (let index = 0; index < this.callbacks.length; index++) {\r\n            const info = this.callbacks[index];\r\n            // 先移除\r\n            if (info.once) {\r\n                this.callbacks.splice(index, 1);\r\n                --index;\r\n            }\r\n            if (info.callback) {\r\n                info.callback.apply(info.target, args);\r\n            }\r\n        }\r\n    }\r\n\r\n    public call(args: any[]) {\r\n        if (this.callbacks.length === 0) return;\r\n        const info = this.callbacks[0];\r\n\r\n        // 先移除\r\n        if (info.once) this.callbacks.splice(0, 1);\r\n        if (!info.callback) return;\r\n\r\n        return info.callback.apply(info.target, args);\r\n    }\r\n\r\n    public remove(callback: Function, target: unknown = null) {\r\n        for (let index = this.callbacks.length - 1; index >= 0; index--) {\r\n            const info = this.callbacks[index];\r\n            if (info.callback !== callback || info.target !== target) continue;\r\n            this.callbacks.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    public removeByCallback(callback: Function) {\r\n        for (let index = this.callbacks.length - 1; index >= 0; index--) {\r\n            const info = this.callbacks[index];\r\n            if (info.callback !== callback) continue;\r\n            this.callbacks.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    public removeByTarget(target: unknown) {\r\n        for (let index = this.callbacks.length - 1; index >= 0; index--) {\r\n            const info = this.callbacks[index];\r\n            if (info.target !== target) continue;\r\n            this.callbacks.splice(index, 1);\r\n        }\r\n    }\r\n}\r\n\r\nclass EventEmitter {\r\n    private listeners: { [key in string]: CallbackList } = {};\r\n\r\n    public on(event: string | number, cb: (...data: any[]) => void, target?: unknown) {\r\n        if (!event.toString() || !cb) return;\r\n        if (!this.listeners[event]) this.listeners[event] = new CallbackList();\r\n        this.listeners[event].add(cb, target);\r\n    }\r\n\r\n    public once(event: string | number, cb: (...data: any[]) => void, target?: unknown) {\r\n        if (!event.toString() || !cb) return;\r\n        if (!this.listeners[event]) this.listeners[event] = new CallbackList();\r\n        this.listeners[event].add(cb, target, true);\r\n    }\r\n\r\n    public off(event: string | number, cb: (...data: any[]) => void, target?: unknown) {\r\n        if (!event.toString() || !cb) return;\r\n        if (!this.listeners[event]) return;\r\n\r\n        this.listeners[event].remove(cb, target);\r\n    }\r\n\r\n    public targetOff(target?: unknown) {\r\n        if (!target) return;\r\n\r\n        for (const key in this.listeners) {\r\n            if (Object.prototype.hasOwnProperty.call(this.listeners, key)) {\r\n                const element = this.listeners[key];\r\n                element.removeByTarget(target);\r\n            }\r\n        }\r\n    }\r\n\r\n    public emit(event: string | number, args: any[]) {\r\n        if (!event.toString()) return;\r\n        if (!this.listeners[event]) return;\r\n        this.listeners[event].emit(args);\r\n    }\r\n\r\n    public call(event: string | number, args: any[]) {\r\n        if (!event.toString()) return;\r\n        if (!this.listeners[event]) return;\r\n        return this.listeners[event].call(args);\r\n    }\r\n}\r\n\r\nexport interface IBaseControl<C, E, T extends { [key in keyof E]?: AnyFunc }> {\r\n    readonly inst: Readonly<C>\r\n\r\n    //用于类型提示推导////////////////\r\n    new(): SuperBaseControl<E, T>//\r\n    ///////////////////////////////\r\n}\r\n\r\nclass SuperBaseControl<E, T extends { [key in keyof E]?: AnyFunc }> {\r\n    //用于类型提示推导//\r\n    private e: E;////\r\n    private t: T;////\r\n    /////////////////\r\n\r\n    private event = new EventEmitter();\r\n\r\n    protected call<K extends keyof E & keyof T>(key: E[K], ...args: Parameters<T[K]>): ReturnType<T[K]> {\r\n        return this.event.call.call(this.event, key, args);\r\n    }\r\n\r\n    protected emit<K extends keyof E & keyof T>(key: E[K], ...args: Parameters<T[K]>): void {\r\n        return this.event.emit.call(this.event, key, args);\r\n    }\r\n\r\n    private on(...args: any[]): void {\r\n        return this.event.on.apply(this.event, args);\r\n    }\r\n\r\n    private once(...args: any[]): void {\r\n        return this.event.once.apply(this.event, args);\r\n    }\r\n\r\n    private off(...args: any[]): void {\r\n        return this.event.off.apply(this.event, args);\r\n    }\r\n\r\n    private targetOff(target: any): void {\r\n        return this.event.targetOff.call(this.event, target);\r\n    }\r\n}\r\n\r\n/**\r\n * @deprecated 废弃，请使用Controller代替Control\r\n */\r\nexport default function BaseControl<C, E = any, T extends { [key in keyof E & string]?: AnyFunc } = any>(Event?: E) {\r\n    return class BaseControl extends SuperBaseControl<E, T> {\r\n        public static Event = Event;\r\n\r\n        private static _base_inst: Readonly<C> = null;\r\n        public static get inst() {\r\n            if (this._base_inst === null) {\r\n                this._base_inst = new this() as C;\r\n            }\r\n            return this._base_inst;\r\n        }\r\n    };\r\n}","import { DEV } from 'cc/env';\r\nimport { IReadOnly } from '../../../../assets/app-builtin/app-admin/executor';\r\nimport { Logger } from '../lib/logger/logger';\r\n\r\nclass CallbackInfo {\r\n    public callback: Function = null;\r\n    public target: unknown = null;\r\n    public once = false;\r\n\r\n    public constructor(callback: Function, target: unknown = null, once: boolean = false) {\r\n        this.callback = callback;\r\n        this.target = target;\r\n        this.once = once;\r\n    }\r\n}\r\n\r\ntype Parameters<T extends (...args: any) => any> = T extends (...args: infer P) => any ? P : any;\r\ntype AnyFunc = (...args: any[]) => any;\r\n\r\nclass CallbackList {\r\n    private callbacks: CallbackInfo[] = [];\r\n\r\n    public size() {\r\n        return this.callbacks.length;\r\n    }\r\n\r\n    public add(callback: Function, target: unknown = null, once: boolean = false) {\r\n        this.callbacks.push(new CallbackInfo(callback, target, once));\r\n    }\r\n\r\n    public emit(args: any[]) {\r\n        for (let index = 0; index < this.callbacks.length; index++) {\r\n            const info = this.callbacks[index];\r\n            // 先移除\r\n            if (info.once) {\r\n                this.callbacks.splice(index, 1);\r\n                --index;\r\n            }\r\n            if (info.callback) {\r\n                info.callback.apply(info.target, args);\r\n            }\r\n        }\r\n    }\r\n\r\n    public call(args: any[]) {\r\n        if (this.callbacks.length === 0) return;\r\n        const info = this.callbacks[0];\r\n\r\n        // 先移除\r\n        if (info.once) this.callbacks.splice(0, 1);\r\n        if (!info.callback) return;\r\n\r\n        return info.callback.apply(info.target, args);\r\n    }\r\n\r\n    public remove(callback: Function, target: unknown = null) {\r\n        for (let index = this.callbacks.length - 1; index >= 0; index--) {\r\n            const info = this.callbacks[index];\r\n            if (info.callback !== callback || info.target !== target) continue;\r\n            this.callbacks.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    public removeByCallback(callback: Function) {\r\n        for (let index = this.callbacks.length - 1; index >= 0; index--) {\r\n            const info = this.callbacks[index];\r\n            if (info.callback !== callback) continue;\r\n            this.callbacks.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    public removeByTarget(target: unknown) {\r\n        for (let index = this.callbacks.length - 1; index >= 0; index--) {\r\n            const info = this.callbacks[index];\r\n            if (info.target !== target) continue;\r\n            this.callbacks.splice(index, 1);\r\n        }\r\n    }\r\n}\r\n\r\nclass EventEmitter {\r\n    private listeners: { [key in string]: CallbackList } = {};\r\n\r\n    public on(event: string | number, cb: (...data: any[]) => void, target?: unknown) {\r\n        if (!event.toString() || !cb) return;\r\n        if (!this.listeners[event]) this.listeners[event] = new CallbackList();\r\n        this.listeners[event].add(cb, target);\r\n    }\r\n\r\n    public once(event: string | number, cb: (...data: any[]) => void, target?: unknown) {\r\n        if (!event.toString() || !cb) return;\r\n        if (!this.listeners[event]) this.listeners[event] = new CallbackList();\r\n        this.listeners[event].add(cb, target, true);\r\n    }\r\n\r\n    public off(event: string | number, cb: (...data: any[]) => void, target?: unknown) {\r\n        if (!event.toString() || !cb) return;\r\n        if (!this.listeners[event]) return;\r\n\r\n        this.listeners[event].remove(cb, target);\r\n    }\r\n\r\n    public targetOff(target?: unknown) {\r\n        if (!target) return;\r\n\r\n        for (const key in this.listeners) {\r\n            if (Object.prototype.hasOwnProperty.call(this.listeners, key)) {\r\n                const element = this.listeners[key];\r\n                element.removeByTarget(target);\r\n            }\r\n        }\r\n    }\r\n\r\n    public emit(event: string | number, args: any[]) {\r\n        if (!event.toString()) return;\r\n        if (!this.listeners[event]) return;\r\n        this.listeners[event].emit(args);\r\n    }\r\n\r\n    public call(event: string | number, args: any[]) {\r\n        if (!event.toString()) return;\r\n        if (!this.listeners[event]) return;\r\n        return this.listeners[event].call(args);\r\n    }\r\n}\r\n\r\nexport interface IBaseController<C, T extends { [key in string]?: AnyFunc }> {\r\n    readonly inst: Readonly<C>\r\n\r\n    //用于类型提示推导////////////////\r\n    new(): SuperBaseController<T>//\r\n    ///////////////////////////////\r\n}\r\n\r\nclass SuperBaseController<T extends { [key in string]?: AnyFunc }> {\r\n    //用于类型提示推导//\r\n    private t: T;////\r\n    /////////////////\r\n\r\n    private event = new EventEmitter();\r\n\r\n    /**获取第一个事件回调的返回值 */\r\n    protected call<K extends keyof T>(key: K, ...args: Parameters<T[K]>): ReturnType<T[K]> {\r\n        return this.event.call.call(this.event, key, args);\r\n    }\r\n\r\n    /**发射事件 */\r\n    protected emit<K extends keyof T>(key: K, ...args: Parameters<T[K]>): void {\r\n        return this.event.emit.call(this.event, key, args);\r\n    }\r\n\r\n    private on(...args: any[]): void {\r\n        return this.event.on.apply(this.event, args);\r\n    }\r\n\r\n    private once(...args: any[]): void {\r\n        return this.event.once.apply(this.event, args);\r\n    }\r\n\r\n    private off(...args: any[]): void {\r\n        return this.event.off.apply(this.event, args);\r\n    }\r\n\r\n    private targetOff(target: any): void {\r\n        return this.event.targetOff.call(this.event, target);\r\n    }\r\n\r\n    /**打印日志 */\r\n    protected get log(): Function {\r\n        return Logger.create('log', '#4682b4', DEV ? `[${this['constructor'].name}] LOG` : `[${this['constructor'].name}] [LOG]`);\r\n    }\r\n\r\n    /**打印警告 */\r\n    protected get warn(): Function {\r\n        return Logger.create('warn', '#ff7f50', DEV ? `[${this['constructor'].name}] WARN` : `[${this['constructor'].name}] [WARN]`);\r\n    }\r\n\r\n    /**打印错误 */\r\n    protected get error(): Function {\r\n        return Logger.create('error', '#ff4757', DEV ? `[${this['constructor'].name}] ERROR` : `[${this['constructor'].name}] [ERROR]`);\r\n    }\r\n}\r\n\r\nexport default function BaseController<C, T extends { [key in string]?: AnyFunc } = any>() {\r\n    return class BaseController extends SuperBaseController<T> {\r\n        /**\r\n         * 控制器事件\r\n         */\r\n        public static Event: { [key in keyof T]: key } = new Proxy({} as any, {\r\n            get: function (target, key) {\r\n                if (target[key]) return target[key];\r\n                target[key] = key;\r\n                return key;\r\n            }\r\n        });\r\n\r\n        private static _base_inst: IReadOnly<C> = null;\r\n        /**\r\n         * 控制器单例\r\n         * - 尽量使用app.controller，可以避免因跨Bundle引用导致的问题，也可以避免Controller之间循环引用的问题\r\n         */\r\n        public static get inst() {\r\n            return this._base_inst;\r\n        }\r\n\r\n        constructor() {\r\n            super();\r\n            BaseController._base_inst = this as any;\r\n        }\r\n    };\r\n}","/**\n * 基础数据类\n * */\n\nexport default class BaseData {\n    constructor() {\n        console.log(\"Load BaseData\");\n    }\n\n\n}","import { AssetManager, Component, EventTarget, Prefab, Widget, _decorator, error, instantiate, js, path, warn } from 'cc';\r\nimport { DEBUG, DEV, EDITOR } from 'cc/env';\r\nimport Core from '../Core';\r\nimport { Logger } from '../lib/logger/logger';\r\n\r\nconst { ccclass } = _decorator;\r\n\r\nconst UserManagerPath = 'UserManager';\r\nconst DontRewriteFuns = ['emit', 'on', 'once', 'off', 'targetOff'];\r\n\r\nconst uuid = new class UUID {\r\n    private index = 0;\r\n\r\n    public create(): string {\r\n        if (this.index++ > 10000000) {\r\n            this.index = 0;\r\n        }\r\n        return `${Date.now()}-${this.index}`;\r\n    }\r\n};\r\n\r\nconst loadBegin = Logger.create('log', '#32cd32', DEV ? '[BaseManager] 下载开始' : '[BaseManager] [下载开始]');\r\n\r\nconst loadFinish = Logger.create('log', '#00ae9d', DEV ? '[BaseManager] 下载完成' : '[BaseManager] [下载完成]');\r\n\r\nconst loadError = Logger.create('log', '#ff4757', DEV ? '[BaseManager] 下载失败' : '[BaseManager] [下载失败]');\r\n\r\nconst initBegin = Logger.create('log', '#3e4145', DEV ? '[BaseManager] 初始化开始' : '[BaseManager] [初始化开始]');\r\n\r\nconst initFinish = Logger.create('log', '#008080', DEV ? '[BaseManager] 初始化完成' : '[BaseManager] [初始化完成]');\r\n\r\n@ccclass('BaseManager')\r\nexport default class BaseManager extends Component {\r\n    // 事件管理器\r\n    private _base_event: EventTarget = new EventTarget();\r\n\r\n    // manager名字\r\n    private _base_manager_name: string = js.getClassName(this);\r\n    public get managerName() {\r\n        return this._base_manager_name;\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        if (EDITOR) {\r\n            DontRewriteFuns.forEach((funName) => {\r\n                if (BaseManager.prototype[funName] !== this[funName]) {\r\n                    warn(`[${this._base_manager_name}] 不应该重写父类方法{${funName}}`);\r\n                }\r\n            });\r\n        }\r\n\r\n        if (this._base_manager_name !== 'Manager' && this._base_manager_name.slice(-7) === 'Manager') {\r\n            const managerName = this._base_manager_name.slice(0, - 7);\r\n            Core.inst.Manager[managerName] = this.constructor;\r\n            Core.inst.manager[managerName.toLocaleLowerCase()] = this;\r\n        } else if (EDITOR) {\r\n            error(`[${this._base_manager_name}] manager命名错误(应为 xxxxManager 以Manager结尾)`);\r\n        } else if (DEBUG) {\r\n            error(`[${this._base_manager_name}] manager命名错误(应为 xxxxManager 以Manager结尾)`);\r\n        }\r\n    }\r\n\r\n    // 用来初始化组件或节点的一些属性，当该组件被第一次添加到节点上或用户点击了它的 Reset 菜单时调用。这个回调只会在编辑器下调用。\r\n    resetInEditor() {\r\n        const widget = this.node.getComponent(Widget) || this.node.addComponent(Widget);\r\n        widget.isAlignBottom = true;\r\n        widget.isAlignLeft = true;\r\n        widget.isAlignRight = true;\r\n        widget.isAlignTop = true;\r\n        widget.top = 0;\r\n        widget.left = 0;\r\n        widget.right = 0;\r\n        widget.bottom = 0;\r\n        widget.alignMode = Widget.AlignMode.ON_WINDOW_RESIZE;\r\n    }\r\n\r\n    /**\r\n     * [无序] 自身初始化完成, init执行完毕后被调用\r\n     */\r\n    protected onInited() {\r\n    }\r\n\r\n    /**\r\n     * [无序] 所有manager初始化完成\r\n     */\r\n    protected onFinished() {\r\n    }\r\n\r\n    /**\r\n     * [无序] 初始化manager，在初始化完成后，调用finish方法\r\n     * @param {Function} finish \r\n     */\r\n    protected init(finish?: Function) {\r\n        finish && finish();\r\n    }\r\n\r\n    protected createUUID() {\r\n        return uuid.create();\r\n    }\r\n\r\n    /**打印日志 */\r\n    protected get log() {\r\n        if (DEV) {\r\n            return window.console.log.bind(window.console,\r\n                '%c %s %c %s ',\r\n                'background:#4169e1; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #4169e1; color: #fff; font-weight: normal;',\r\n                `[${this._base_manager_name}] LOG ${new Date().toLocaleString()}`,\r\n                'background:#ffffff ; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #4169e1; color: #4169e1; font-weight: normal;'\r\n            );\r\n        }\r\n        return window.console.log.bind(window.console,\r\n            `[${this._base_manager_name}] [LOG] [${new Date().toLocaleString()}]`,\r\n        );\r\n    }\r\n\r\n    /**打印警告 */\r\n    protected get warn() {\r\n        if (DEV) {\r\n            return window.console.warn.bind(window.console,\r\n                '%c %s %c %s ',\r\n                'background:#ff7f50; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #ff7f50; color: #fff; font-weight: normal;',\r\n                `[${this._base_manager_name}] WARN ${new Date().toLocaleString()}`,\r\n                'background:#ffffff ; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #ff7f50; color: #ff7f50; font-weight: normal;'\r\n            );\r\n        }\r\n        return window.console.warn.bind(window.console,\r\n            `[${this._base_manager_name}] [WARN] [${new Date().toLocaleString()}]`,\r\n        );\r\n    }\r\n\r\n    /**打印错误 */\r\n    protected get error() {\r\n        if (DEV) {\r\n            return window.console.error.bind(window.console,\r\n                '%c %s %c %s ',\r\n                'background:#ff4757; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid #ff4757; color: #fff; font-weight: normal;',\r\n                `[${this._base_manager_name}] ERROR ${new Date().toLocaleString()}`,\r\n                'background:#ffffff ; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid #ff4757; color: #ff4757; font-weight: normal;'\r\n            );\r\n        }\r\n        return window.console.error.bind(window.console,\r\n            `[${this._base_manager_name}] [ERROR] [${new Date().toLocaleString()}]`,\r\n        );\r\n    }\r\n\r\n    /**\r\n     * [系统内置] 事件分发\r\n     */\r\n    public emit(event: string | number, ...data: any[]) {\r\n        this._base_event.emit(event as any, ...data);\r\n    }\r\n\r\n    /**\r\n     * [系统内置] 事件监听\r\n     */\r\n    public on(event: string | number, cb: (...any: any[]) => void, target?: any) {\r\n        this._base_event.on(event as any, cb, target);\r\n    }\r\n\r\n    /**\r\n     * [系统内置] 事件监听\r\n     */\r\n    public once(event: string | number, cb: (...any: any[]) => void, target?: any) {\r\n        this._base_event.once(event as any, cb, target);\r\n    }\r\n\r\n    /**\r\n     * [系统内置] 事件移除监听\r\n     */\r\n    public off(event: string | number, cb?: (...any: any[]) => void, target?: any) {\r\n        this._base_event.off(event as any, cb, target);\r\n    }\r\n\r\n    /**\r\n     * [系统内置] 事件移除监听\r\n     */\r\n    public targetOff(target: any) {\r\n        this._base_event.targetOff(target);\r\n    }\r\n\r\n    /***********************************静态***********************************/\r\n    /**\r\n     * 框架内置Manager的数量\r\n     * @private\r\n     */\r\n    public static get sysMgrCount() {\r\n        return 5;\r\n    }\r\n\r\n    /**\r\n     * 获得初始化资源的数量(包括sysMgrCount)\r\n     * @private\r\n     */\r\n    public static getTotalAssetNum(bundle: AssetManager.Bundle) {\r\n        let count = this.sysMgrCount;\r\n\r\n        if (!bundle) return count;\r\n\r\n        const array = bundle.getDirWithPath('/', Prefab) as { uuid: string, path: string, ctor: Function }[];\r\n\r\n        array.forEach(function (item) {\r\n            if (item.path.endsWith('Manager')) {\r\n                count++;\r\n            }\r\n        });\r\n\r\n        return count;\r\n    }\r\n\r\n    /**\r\n     * 获得初始化资源的数量\r\n     * @private\r\n     */\r\n    public static getUserAssetUrls(bundle: AssetManager.Bundle) {\r\n        const pathArr: string[] = [];\r\n\r\n        if (!bundle) return pathArr;\r\n\r\n        const array = bundle.getDirWithPath('/', Prefab) as { uuid: string, path: string, ctor: Function }[];\r\n\r\n        array.forEach(function (item) {\r\n            if (item.path.endsWith('Manager')) {\r\n                pathArr.push(item.path);\r\n            }\r\n        });\r\n\r\n        return pathArr;\r\n    }\r\n\r\n    /**\r\n     * 静态方法，初始化manager，该方法必须在场景初始化完毕之后调用\r\n     * @private\r\n     */\r\n    public static init(\r\n        bundle: AssetManager.Bundle,\r\n        progress: (completeAsset: Number, totalAsset: Number) => any,\r\n        complete: (totalAsset: Number) => any) {\r\n        const urls = this.getUserAssetUrls(bundle);\r\n\r\n        const totalAsset = urls.length + this.sysMgrCount;\r\n        let completeAsset = 0;\r\n\r\n        const onProgress = function (next: Function, manager: BaseManager) {\r\n            if (DEBUG) {\r\n                const startTime = window?.performance?.now ? performance.now() : Date.now();\r\n                initBegin(manager.managerName);\r\n                return function () {\r\n                    manager.onInited();\r\n                    if (DEBUG) {\r\n                        const endTime = window?.performance?.now ? performance.now() : Date.now();\r\n                        initFinish(`${manager.managerName} 耗时:${(endTime - startTime).toFixed(6)} ms`);\r\n                    }\r\n                    progress && progress(++completeAsset, totalAsset);\r\n                    next();\r\n                };\r\n            }\r\n            return function () {\r\n                manager.onInited();\r\n                progress && progress(++completeAsset, totalAsset);\r\n                next();\r\n            };\r\n        };\r\n\r\n        // 用户manager(动态添加)\r\n        const userMgrList: BaseManager[] = [];\r\n        // 系统manager(静态内置)\r\n        const sysMgrList: BaseManager[] = [Core.inst.manager.event, Core.inst.manager.timer, Core.inst.manager.loader, Core.inst.manager.ui, Core.inst.manager.sound] as any as BaseManager[];\r\n\r\n        // 初始化系统manager\r\n        const initSysMgrTask = Core.inst.lib.task.createASync();\r\n        sysMgrList.forEach(function (manager: BaseManager) {\r\n            initSysMgrTask.add(function (next) {\r\n                manager.init(onProgress(next, manager));\r\n            });\r\n        });\r\n\r\n        // 加载用户manager\r\n        const loadUserMgrTask = Core.inst.lib.task.createASync();\r\n        const UserManagerRoot = Core.inst.manager.ui.root.getChildByPath(UserManagerPath);\r\n        urls.forEach(function (url) {\r\n            loadUserMgrTask.add(function (next, retry) {\r\n                if (DEBUG) {\r\n                    const managerName = path.basename(url);\r\n                    const startTime = window?.performance?.now ? performance.now() : Date.now();\r\n                    loadBegin(managerName);\r\n                    bundle.load(url, Prefab, function (err, prefab: Prefab) {\r\n                        if (err || !prefab) {\r\n                            loadError(managerName, '重试...');\r\n                            retry(1);\r\n                        } else {\r\n                            const endTime = window?.performance?.now ? performance.now() : Date.now();\r\n                            loadFinish(`${managerName} 耗时:${(endTime - startTime).toFixed(6)} ms`);\r\n                            const node = instantiate(prefab);\r\n                            node.parent = UserManagerRoot;\r\n                            node.active = true;\r\n                            userMgrList.push(node.getComponent(BaseManager));\r\n                            next();\r\n                        }\r\n                    });\r\n                    return;\r\n                }\r\n                bundle.load(url, Prefab, function (err, prefab: Prefab) {\r\n                    if (err || !prefab) {\r\n                        loadError(path.basename(url), '重试...');\r\n                        retry(1);\r\n                    } else {\r\n                        const node = instantiate(prefab);\r\n                        node.parent = UserManagerRoot;\r\n                        node.active = true;\r\n                        userMgrList.push(node.getComponent(BaseManager));\r\n                        next();\r\n                    }\r\n                });\r\n            });\r\n        });\r\n\r\n        Core.inst.lib.task.createAny()\r\n            .add([\r\n                next => initSysMgrTask.start(next),\r\n                next => loadUserMgrTask.start(next),\r\n            ])\r\n            .add(function (next) {\r\n                Core.emit(Core.EventType.EVENT_SYS_MANAGER_INITED);\r\n                next();\r\n            })\r\n            .add(function (next) {\r\n                // 初始化用户manager\r\n                const initUserMgrTask = Core.inst.lib.task.createASync();\r\n                userMgrList.forEach(manager => {\r\n                    initUserMgrTask.add(function (next) {\r\n                        manager.init(onProgress(next, manager));\r\n                    });\r\n                });\r\n                initUserMgrTask.start(next);\r\n            })\r\n            .add(function (next) {\r\n                Core.emit(Core.EventType.EVENT_USER_MANAGER_INITED);\r\n                Core.emit(Core.EventType.EVENT_MANAGER_INITED);\r\n                next();\r\n            })\r\n            .add(function (next) {\r\n                // 所有manager初始化完成后，触发回调\r\n                sysMgrList.forEach(function (manager) {\r\n                    manager.onFinished();\r\n                });\r\n                userMgrList.forEach(function (manager) {\r\n                    manager.onFinished();\r\n                });\r\n                next();\r\n            })\r\n            .start(function () {\r\n                Core.emit(Core.EventType.EVENT_MANAGER_FINISHED);\r\n                complete && complete(totalAsset);\r\n            });\r\n    }\r\n\r\n}","// export type IModel<T> = {\r\n//     [P in keyof T]: T[P] extends Function\r\n//     ? '❌此处不能定义任何方法'\r\n//     : (\r\n//         T[P] extends Array<infer R>\r\n//         ? (\r\n//             R extends Function\r\n//             ? '❌此处不能定义任何方法'\r\n//             : T[P]\r\n//         )\r\n//         : T[P] // IModel<T[P]> 性能消耗大\r\n//     );\r\n// };\r\n\r\n// export type IStore<T> = {\r\n//     [P in keyof T]: T[P] extends Function\r\n//     ? T[P]\r\n//     : (\r\n//         T[P] extends Array<infer R>\r\n//         ? (\r\n//             R extends Function\r\n//             ? '❌此处不能定义任何方法'\r\n//             : IModel<T[P]>\r\n//         )\r\n//         : IModel<T[P]>\r\n//     );\r\n// };\r\n\r\nexport type IModel<T> = {\r\n    [P in keyof T]: T[P] extends Function\r\n    ? '❌此处不能定义任何方法'\r\n    : T[P];\r\n};\r\n\r\n// export type IStore<T> = {\r\n//     [P in keyof T]: T[P] extends Function\r\n//     ? T[P]\r\n//     : IModel<T[P]>;\r\n// };\r\n\r\nexport type IStore<T> = {\r\n    [P in keyof T]: T[P];\r\n};","import { Asset, Component, Enum, EventTouch, Font, Label, Node, Scene, Sprite, SpriteFrame, UITransform, Widget, _decorator, director, isValid, js, sp } from 'cc';\r\nimport { DEV, EDITOR } from 'cc/env';\r\nimport { IMiniViewName, IMiniViewNames, IViewName } from '../../../../assets/app-builtin/app-admin/executor';\r\nimport Core from '../Core';\r\nimport { Logger } from '../lib/logger/logger';\r\nimport { IBaseControl } from './BaseControl';\r\nimport { IBaseController } from './BaseController';\r\n\r\nconst { ccclass, property, disallowMultiple } = _decorator;\r\n\r\nconst BlockEvents = [\r\n    Node.EventType.TOUCH_START, Node.EventType.TOUCH_MOVE, Node.EventType.TOUCH_END, Node.EventType.TOUCH_CANCEL,\r\n    Node.EventType.MOUSE_DOWN, Node.EventType.MOUSE_MOVE, Node.EventType.MOUSE_UP,\r\n    Node.EventType.MOUSE_ENTER, Node.EventType.MOUSE_LEAVE, Node.EventType.MOUSE_WHEEL\r\n];\r\n\r\nconst HideEvent = Enum({\r\n    destroy: 1,\r\n    active: 2\r\n});\r\n\r\nexport type IShade = {\r\n    /**等待 默认0秒 */\r\n    delay?: number,\r\n    /**开始透明度 默认60 */\r\n    begin?: number,\r\n    /**结束透明度 默认180 */\r\n    end?: number,\r\n    /**透明变化速度 默认100 */\r\n    speed?: number,\r\n    /**\r\n     * 毛玻璃效果 默认false\r\n     * - 开启后其它参数将无效\r\n     */\r\n    blur?: boolean,\r\n};\r\n\r\nexport interface IShowParamAttr {\r\n    zIndex?: number,\r\n    siblingIndex?: number,\r\n}\r\n\r\nexport interface IShowParamOnShow<T = any> {\r\n    (result: T): any\r\n}\r\n\r\nexport interface IShowParamOnHide<T = any> {\r\n    (result: T): any\r\n}\r\n\r\nexport interface IShowParamBeforeShow {\r\n    (error: string): any\r\n}\r\n\r\nexport interface IShowParamInnerLoad {\r\n    (name: string, path: string, type: { prototype: Asset }, callback: (result: Asset) => any): void\r\n}\r\n\r\nexport interface IHideParamOnHide<T = any> {\r\n    (result: T): any\r\n}\r\n\r\nexport type IViewType = 'Page' | 'Paper' | 'Pop' | 'Top';\r\n\r\nexport enum ViewType {\r\n    Page = 'Page',\r\n    Paper = 'Paper',\r\n    PaperAll = 'PaperAll',\r\n    Pop = 'Pop',\r\n    Top = 'Top'\r\n}\r\n\r\ninterface IMiniOnShow {\r\n    (name: IMiniViewName, data?: any): any\r\n}\r\ninterface IMiniOnHide {\r\n    (name: IMiniViewName, data?: any): any\r\n}\r\ninterface IMiniOnFinish {\r\n    (): any\r\n}\r\ntype IPick<T> = {\r\n    -readonly [P in keyof T]: T[P] extends Function\r\n    ? T[P]\r\n    : (T[P] extends Object\r\n        ? IPick<T[P]>\r\n        : T[P]);\r\n};\r\ninterface IBaseViewController<C, T extends { [key in string]: any }> {\r\n    new(): BaseView & {\r\n        readonly controller: IPick<C> & Readonly<{\r\n            /**获取第一个事件回调的返回值 */\r\n            emit<K extends keyof T>(key: K, ...args: Parameters<T[K]>): void;\r\n            /**发射事件 */\r\n            call<K extends keyof T & keyof T>(key: K, ...args: Parameters<T[K]>): ReturnType<T[K]>;\r\n            /**注册事件回调 */\r\n            on<K extends keyof T>(key: K, callback: (...args: Parameters<T[K]>) => ReturnType<T[K]>, target?: any): void;\r\n            /**注册一次性事件回调 */\r\n            once<K extends keyof T>(key: K, callback: (...args: Parameters<T[K]>) => ReturnType<T[K]>, target?: any): void;\r\n            /**取消事件回调 */\r\n            off(key: keyof T, callback: Function, target?: any): void;\r\n            /**取消事件回调 */\r\n            targetOff(target: any): void;\r\n        }>\r\n    }\r\n}\r\n\r\nenum ViewState {\r\n    BeforeShow,\r\n    Showing,\r\n    Showed,\r\n    BeforeHide,\r\n    Hiding,\r\n    Hid,\r\n}\r\n\r\nconst Group = { id: 'BaseView', name: 'Settings', displayOrder: -Infinity, style: 'section' };\r\n\r\n// 记录PaperAll的owner\r\nconst PaperAllToOwner: Map<IMiniViewName, string> = new Map();\r\n\r\n@ccclass('BaseView')\r\n@disallowMultiple()\r\nexport default class BaseView extends Component {\r\n    /**\r\n     * @deprecated 废弃，请使用BindController代替BindControl\r\n     */\r\n    static BindControl<C, E, T extends { [key in keyof E]?: any }>(Control: IBaseControl<C, E, T>) {\r\n        return class BindControl extends BaseView {\r\n            protected get control(): Pick<C, keyof C> & Readonly<{\r\n                call<K extends keyof E>(key: E[K], ...args: Parameters<T[K]>): ReturnType<T[K]>;\r\n                emit<K extends keyof E>(key: E[K], ...args: Parameters<T[K]>): void;\r\n                on<K extends keyof E>(key: E[K], callback: (...args: Parameters<T[K]>) => ReturnType<T[K]>, target?: any): void;\r\n                once<K extends keyof E>(key: E[K], callback: (...args: Parameters<T[K]>) => ReturnType<T[K]>, target?: any): void;\r\n                off(key: E[keyof E], callback: Function, target?: any): void;\r\n                targetOff(target: any): void;\r\n            }> {\r\n                return Control ? Control.inst as any : null;\r\n            }\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 给UI绑定一个控制器，绑定后可以通过this.controller访问，并能访问一些内部方法(emit、on、once、off、targetOff)\r\n     */\r\n    static BindController<C, T extends { [key in string]: any }>(Controller: IBaseController<C, T>) {\r\n        @disallowMultiple()\r\n        class BindController extends BaseView {\r\n            protected get controller() {\r\n                return Controller ? Controller.inst as any : null;\r\n            }\r\n        }\r\n        return BindController as any as IBaseViewController<C, T>;\r\n    }\r\n\r\n    /**\r\n     * 是否有效，如果返回false的话，app.manager.ui.show会触发onError回调\r\n     */\r\n    public static isViewValid(next: (valid: boolean) => void, data: any) {\r\n        data;\r\n        next && next(true);\r\n    }\r\n\r\n    public static isPage(name: string) {\r\n        return name.indexOf(ViewType.Page) === 0;\r\n    }\r\n\r\n    public static isPaper(name: string) {\r\n        return name.indexOf(ViewType.Paper) === 0;\r\n    }\r\n\r\n    public static isPaperAll(name: string) {\r\n        return name.indexOf(ViewType.PaperAll) === 0;\r\n    }\r\n\r\n    public static isPop(name: string) {\r\n        return name.indexOf(ViewType.Pop) === 0;\r\n    }\r\n\r\n    public static isTop(name: string) {\r\n        return name.indexOf(ViewType.Top) === 0;\r\n    }\r\n\r\n    // 是否被调用过\r\n    private _base_view_created = false;\r\n    // view状态\r\n    private _base_view_state = ViewState.Hid;\r\n    // 当前view的名字\r\n    private _base_view_name: IViewName | IMiniViewName = js.getClassName(this) as any;\r\n    // 触摸是否有效\r\n    private _base_touch_enable = true;\r\n    // show/hide等待列表\r\n    private _base_show_hide_delays: Function[] = [];\r\n    // 子界面融合相关\r\n    private _base_mini_show: Set<IMiniViewName> = new Set();\r\n\r\n    protected isPage() {\r\n        return BaseView.isPage(this._base_view_name);\r\n    }\r\n\r\n    protected isPaper() {\r\n        return BaseView.isPaper(this._base_view_name);\r\n    }\r\n\r\n    protected isPaperAll() {\r\n        return BaseView.isPaperAll(this._base_view_name);\r\n    }\r\n\r\n    protected isPop() {\r\n        return BaseView.isPop(this._base_view_name);\r\n    }\r\n\r\n    protected isTop() {\r\n        return BaseView.isTop(this._base_view_name);\r\n    }\r\n\r\n    protected is2D() {\r\n        return !this.is3D();\r\n    }\r\n\r\n    protected is3D() {\r\n        if (this.node.parent instanceof Scene) {\r\n            return this.node.parent.name === this.viewName;\r\n        }\r\n        const scene = director.getScene();\r\n        return scene.name === this.viewName;\r\n    }\r\n\r\n    @property\r\n    private _hideEvent = HideEvent.destroy;\r\n    @property({\r\n        group: Group,\r\n        type: HideEvent,\r\n        tooltip: '何种模式隐藏节点\\n1、destroy: 销毁UI并释放对应的所有资源\\n2、active: 缓存UI并加速下次的打开速度',\r\n    })\r\n    public get hideEvent() {\r\n        if (this.is3D()) return HideEvent.destroy;\r\n        return this._hideEvent;\r\n    }\r\n    public set hideEvent(value) {\r\n        if (this.is3D() && value !== HideEvent.destroy) {\r\n            this.log('3D模式下只能是destroy模式');\r\n            return;\r\n        }\r\n        this._hideEvent = value;\r\n    }\r\n\r\n    @property\r\n    private _singleton = true;\r\n    private static _singleton = true;\r\n    @property({\r\n        group: Group,\r\n        tooltip: '是否是单例模式\\n1、单例模式: UI只会被创建一次(onShow会被重复触发)\\n2、非单例模式: UI会被重复创建',\r\n    })\r\n    protected get singleton(): boolean {\r\n        if (this.isPage()) return true;\r\n        if (this.isPaperAll()) return true;\r\n        if (this.isPaper()) return true;\r\n        return this._singleton && (<typeof BaseView>this.constructor)._singleton;\r\n    }\r\n    protected set singleton(value) {\r\n        if (!value) {\r\n            if (this.isPage()) {\r\n                this.log('Page只能是单例模式');\r\n                return;\r\n            }\r\n            if (this.isPaper()) {\r\n                this.log('Paper只能是单例模式');\r\n                return;\r\n            }\r\n        }\r\n        this._singleton = (<typeof BaseView>this.constructor)._singleton = !!value;\r\n    }\r\n\r\n    @property\r\n    private _captureFocus = true;\r\n    @property({\r\n        group: Group,\r\n        tooltip: '是否捕获焦点<响应onLostFocus和onFocus>\\n1、当一个捕获焦点的UI处于最上层并展示时\\n下层的UI永远不会响应focus事件',\r\n        visible(this: BaseView) {\r\n            if (this.is3D()) return false;\r\n            return true;\r\n        }\r\n    })\r\n    protected get captureFocus() {\r\n        if (this.is3D()) return false;\r\n        return this._captureFocus;\r\n    }\r\n    protected set captureFocus(value) {\r\n        if (value && this.is3D()) {\r\n            this.log('只有2D模式下才可以捕获焦点');\r\n            return;\r\n        }\r\n\r\n        if (!EDITOR && this._captureFocus !== value) {\r\n            this._captureFocus = value;\r\n            Core.inst?.manager?.ui?.refreshShade();\r\n        } else {\r\n            this._captureFocus = value;\r\n        }\r\n    }\r\n\r\n    @property\r\n    private _shade = true;\r\n    @property({\r\n        group: Group,\r\n        tooltip: '是否需要底层遮罩',\r\n        visible(this: BaseView) {\r\n            if (this.is3D()) return false;\r\n            if (this.isPage()) return false;\r\n            return true;\r\n        }\r\n    })\r\n    protected get shade() {\r\n        if (this.is3D()) return false;\r\n        if (this.isPage()) return false;\r\n        return this._shade;\r\n    }\r\n    protected set shade(value) {\r\n        if (value) {\r\n            if (this.is3D()) {\r\n                this.log('只有2D模式下才可以设置底层遮罩');\r\n                return;\r\n            }\r\n            if (this.isPage()) {\r\n                this.log('Page不可以设置底层遮罩');\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (!EDITOR && this._shade !== value) {\r\n            this._shade = value;\r\n            Core.inst?.manager?.ui?.refreshShade();\r\n        } else {\r\n            this._shade = value;\r\n        }\r\n    }\r\n\r\n    @property\r\n    private _blockInput = true;\r\n    @property({\r\n        group: Group,\r\n        tooltip: '是否禁止点击事件向下层传递',\r\n        visible(this: BaseView) {\r\n            if (this.is3D()) return false;\r\n            return true;\r\n        }\r\n    })\r\n    protected get blockInput() {\r\n        if (this.is3D()) return false;\r\n        return this._blockInput;\r\n    }\r\n    protected set blockInput(value) {\r\n        if (value && this.is3D()) {\r\n            this.log('只有2D模式下才可以设置阻断点击事件');\r\n            return;\r\n        }\r\n        this._blockInput = value;\r\n    }\r\n\r\n    /**\r\n     * 子界面(只能用于Page)\r\n     */\r\n    protected miniViews: IMiniViewNames = [];\r\n\r\n    /**\r\n     * 当前view名字\r\n     */\r\n    public get viewName() {\r\n        return this._base_view_name;\r\n    }\r\n\r\n    /**\r\n     * 基础名字, 如PageHome => Home\r\n     */\r\n    public get baseName() {\r\n        return this._base_view_name.slice(this.typeName.length);\r\n    }\r\n\r\n    /**\r\n     * 类型名字, 如PageHome => Page\r\n     */\r\n    public get typeName() {\r\n        if (this._base_view_name.indexOf(ViewType.Paper) === 0) return ViewType.Paper;\r\n        if (this._base_view_name.indexOf(ViewType.Pop) === 0) return ViewType.Pop;\r\n        if (this._base_view_name.indexOf(ViewType.Top) === 0) return ViewType.Top;\r\n        return ViewType.Page;\r\n    }\r\n\r\n    /**\r\n     * 是否是单例模式\r\n     */\r\n    public get isSingleton(): boolean {\r\n        return this.singleton;\r\n    }\r\n\r\n    /**\r\n     * 是否捕获焦点\r\n     */\r\n    public get isCaptureFocus(): boolean {\r\n        return this.captureFocus;\r\n    }\r\n\r\n    /**\r\n     * 是否需要遮罩\r\n     */\r\n    public get isNeedShade(): boolean {\r\n        return this.shade;\r\n    }\r\n\r\n    /**\r\n     * 是否展示了(不为Hid状态)\r\n     */\r\n    public get isShow(): boolean {\r\n        return this._base_view_state != ViewState.Hid;\r\n    }\r\n\r\n    /**\r\n     * 是否show了某个子界面\r\n     */\r\n    protected isMiniViewShow(name: IMiniViewName) {\r\n        return this._base_mini_show.has(name);\r\n    }\r\n\r\n    // 用来初始化组件或节点的一些属性，当该组件被第一次添加到节点上或用户点击了它的 Reset 菜单时调用。这个回调只会在编辑器下调用。\r\n    resetInEditor(): any {\r\n        if (EDITOR) {\r\n            const is3D = this.is3D();\r\n            if (this.viewName.indexOf(ViewType.Page) >= 0) {\r\n                this.shade = false;\r\n                this.blockInput = is3D ? false : true;\r\n                this.captureFocus = is3D ? false : true;\r\n            } else if (this.viewName.indexOf(ViewType.Paper) >= 0) {\r\n                this.shade = false;\r\n                this.captureFocus = false;\r\n                this.blockInput = false;\r\n            }\r\n\r\n            if (is3D) return;\r\n            this.node.getComponent(UITransform) || this.node.addComponent(UITransform);\r\n\r\n            const widget = this.node.getComponent(Widget) || this.node.addComponent(Widget);\r\n            widget.isAlignBottom = true;\r\n            widget.isAlignLeft = true;\r\n            widget.isAlignRight = true;\r\n            widget.isAlignTop = true;\r\n            widget.top = 0;\r\n            widget.left = 0;\r\n            widget.right = 0;\r\n            widget.bottom = 0;\r\n            widget.alignMode = Widget.AlignMode.ON_WINDOW_RESIZE;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 设置是否可点击\r\n     */\r\n    protected setTouchEnabled(enabled: boolean = true): any {\r\n        this._base_touch_enable = !!enabled;\r\n    }\r\n\r\n    private blockPropagation(event: EventTouch) {\r\n        if (this.blockInput) {\r\n            event.propagationStopped = true;\r\n            if (event.type === Node.EventType.TOUCH_START) {\r\n                this.log('阻断触摸向下层传递');\r\n            }\r\n        }\r\n    }\r\n\r\n    private stopPropagation(event: EventTouch) {\r\n        if (!this._base_touch_enable) {\r\n            event.propagationStopped = true;\r\n            event.propagationImmediateStopped = true;\r\n            if (event.type === Node.EventType.TOUCH_START) {\r\n                this.log('屏蔽触摸');\r\n            }\r\n        }\r\n    }\r\n\r\n    private onBaseViewCreate(): any {\r\n        if (this.is3D()) return;\r\n        const uiTransform = this.getComponent(UITransform);\r\n        if (uiTransform) uiTransform.hitTest = (...args: any[]): boolean => {\r\n            if (this.blockInput) {\r\n                return UITransform.prototype.hitTest.apply(uiTransform, args);\r\n            }\r\n            return false;\r\n        };\r\n\r\n        for (let i = 0; i < BlockEvents.length; i++) {\r\n            this.node.on(BlockEvents[i], this.blockPropagation, this);\r\n            this.node.on(BlockEvents[i], this.stopPropagation, this, true);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 关闭所有子界面\r\n     */\r\n    protected hideAllMiniViews(data?: any) {\r\n        this._base_mini_show.forEach((name) => {\r\n            Core.inst.manager.ui.hide({ name, data });\r\n        });\r\n        this._base_mini_show.clear();\r\n    }\r\n\r\n    /**\r\n     * 关闭子界面\r\n     */\r\n    protected hideMiniViews({ data, views }: { data?: any, views: IMiniViewNames }) {\r\n        if (this.miniViews.length === 0) return;\r\n        if (views.length === 0) return;\r\n\r\n        views.forEach(name => {\r\n            if (this.miniViews.indexOf(name) === -1) {\r\n                this.warn('hideMiniViews', `${name}不在miniViews中, 已跳过`);\r\n                return;\r\n            }\r\n\r\n            // 验证\r\n            if (!this._base_mini_show.has(name)) return;\r\n            // 关闭\r\n            Core.inst.manager.ui.hide({ name, data });\r\n        });\r\n        // TODO 手动刷新一下Paper下的UI顺序(原因是原生环境，显示层级正确但触摸层级可能会不正确)\r\n        Core.inst.manager.ui.sortUserInterface('Paper');\r\n    }\r\n\r\n    /**\r\n     * 展示子界面\r\n     */\r\n    protected showMiniViews({ data, views, onShow, onHide, onFinish }: {\r\n        /**传递给子界面的数据 */\r\n        data?: any,\r\n        /**子界面名字列表 */\r\n        views: Array<IMiniViewName | IMiniViewNames>,\r\n        /**子界面展示回调 */\r\n        onShow?: IMiniOnShow,\r\n        /**子界面关闭回调 */\r\n        onHide?: IMiniOnHide,\r\n        /**子界面融合完成回调 */\r\n        onFinish?: IMiniOnFinish\r\n    }) {\r\n        if (views.length === 0) return false;\r\n        if (this.typeName !== ViewType.Page) {\r\n            this.warn('showMiniViews', '仅支持Page类型');\r\n            return false;\r\n        }\r\n\r\n        const task = Core.inst.lib.task.createSync();\r\n\r\n        for (let index = 0; index < views.length; index++) {\r\n            const names = views[index];\r\n            if (names instanceof Array) {\r\n                task.add(next => {\r\n                    this.createMixMiniViewsTask(names, data, onShow, onHide).start(next);\r\n                });\r\n            } else {\r\n                task.add(next => {\r\n                    this.createMixMiniViewsTask([names], data, onShow, onHide).start(next);\r\n                });\r\n            }\r\n        }\r\n\r\n        task.start(onFinish && function () {\r\n            onFinish();\r\n        });\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 创建自定义加载任务\r\n     */\r\n    private createMixMiniViewsTask(views: IMiniViewNames = [], data?: any, onShow?: IMiniOnShow, onHide?: IMiniOnHide) {\r\n        const task = Core.inst.lib.task.createSync();\r\n\r\n        if (this.typeName !== ViewType.Page) {\r\n            this.warn('showMiniViews', '仅支持Page类型');\r\n            return task;\r\n        }\r\n\r\n        views = views.filter(name => {\r\n            if (!name) {\r\n                this.warn('showMiniViews', 'name不能为空');\r\n                return false;\r\n            }\r\n            if (this._base_mini_show.has(name)) {\r\n                this.warn('showMiniViews', `重复融合${name}, 已跳过`);\r\n                return false;\r\n            }\r\n            if (this.miniViews.indexOf(name) === -1) {\r\n                this.warn('showMiniViews', `${name}不在miniViews中, 已跳过`);\r\n                return false;\r\n            }\r\n            if (name.indexOf(this.baseName) !== ViewType.Paper.length && name.indexOf(ViewType.PaperAll) !== 0) {\r\n                this.warn('showMiniViews', `${name}不属于当前Page, 已跳过`);\r\n                return false;\r\n            }\r\n\r\n            this._base_mini_show.add(name);\r\n            return true;\r\n        });\r\n\r\n        if (views.length === 0) return task;\r\n\r\n        // 先load全部\r\n        task.add((next) => {\r\n            const aSync = Core.inst.lib.task.createASync();\r\n            views.forEach(name => {\r\n                aSync.add((next, retry) => {\r\n                    this.log(`下载子页面: ${name}`);\r\n                    Core.inst.manager.ui.load(name as any, result => {\r\n                        result ? next() : this.scheduleOnce(retry, 0.1);\r\n                    });\r\n                });\r\n            });\r\n            aSync.start(next);\r\n        });\r\n\r\n        // 再show全部\r\n        task.add((next) => {\r\n            const aSync = Core.inst.lib.task.createASync();\r\n            views.forEach(name => {\r\n                aSync.add((next) => {\r\n                    if (!this._base_mini_show?.has(name)) return next();\r\n\r\n                    this.log(`展示子页面: ${name}`);\r\n                    // 是PaperAll,设置owner\r\n                    if (BaseView.isPaperAll(name)) {\r\n                        PaperAllToOwner.set(name, this.uuid);\r\n                    }\r\n                    Core.inst.manager.ui.show({\r\n                        name, data,\r\n                        silent: true,\r\n                        attr: { zIndex: this.miniViews.indexOf(name) },\r\n                        onShow: (result) => {\r\n                            if (onShow) onShow(name, result);\r\n                            next();\r\n                        },\r\n                        onHide: (result) => {\r\n                            if (BaseView.isPaperAll(name)) {\r\n                                // 验证PaperAll是否属于当前Page\r\n                                const owner = PaperAllToOwner.get(name);\r\n                                if (owner && owner === this.uuid) {\r\n                                    PaperAllToOwner.delete(name);\r\n                                }\r\n                            }\r\n                            this._base_mini_show?.delete(name);\r\n                            if (onHide) onHide(name, result);\r\n                        },\r\n                        onError: (result, code) => {\r\n                            if (code === Core.inst.Manager.UI.ErrorCode.LoadError) return true;\r\n                            if (BaseView.isPaperAll(name)) {\r\n                                // 验证PaperAll是否属于当前Page\r\n                                const owner = PaperAllToOwner.get(name);\r\n                                if (owner && owner === this.uuid) {\r\n                                    PaperAllToOwner.delete(name);\r\n                                    Core.inst.manager.ui.hide({ name });\r\n                                }\r\n                            }\r\n                            this._base_mini_show?.delete(name);\r\n                            this.warn('忽略子页面', name, result);\r\n                            next();\r\n                        },\r\n                    });\r\n                });\r\n            });\r\n            aSync.start(() => {\r\n                // TODO 手动刷新一下Paper下的UI顺序(原因是原生环境，显示层级正确但触摸层级可能会不正确)\r\n                Core.inst.manager.ui.sortUserInterface('Paper');\r\n                next();\r\n            });\r\n        });\r\n\r\n        return task;\r\n    }\r\n\r\n    /**\r\n     * 设置节点属性\r\n     */\r\n    private setNodeAttr(attr: IShowParamAttr) {\r\n        if (!attr) return;\r\n        if (typeof attr.zIndex === 'number') {\r\n            // 以z坐标来代替2.x时代的zIndex\r\n            this.node.setPosition(this.node.position.x, this.node.position.y, attr.zIndex);\r\n        }\r\n\r\n        if (typeof attr.siblingIndex === 'number') {\r\n            this.node.setSiblingIndex(attr.siblingIndex);\r\n        }\r\n    }\r\n\r\n    private show(data?: any, attr?: IShowParamAttr, onShow?: IShowParamOnShow, onHide?: IShowParamOnHide, beforeShow?: IShowParamBeforeShow) {\r\n        // 当前show操作需要等待其它流程\r\n        if (this._base_view_state !== ViewState.Showed &&\r\n            this._base_view_state !== ViewState.Hid) {\r\n            this._base_show_hide_delays.push(\r\n                this.show.bind(this, data, attr, onShow, onHide, beforeShow)\r\n            );\r\n            return;\r\n        }\r\n\r\n        // show流程\r\n        const changeState = this._base_view_state === ViewState.Hid;\r\n        if (changeState) this._base_view_state = ViewState.BeforeShow;\r\n        const next = (error: string) => {\r\n            if (!error) {\r\n                // 所有Paper只会是单例，而且所有Paper都不允许被当前Page重复show\r\n                // 但PaprAll比较特殊，会被不同的Page使用，在PaperAll被不同的Page重复show时，清除之前的onHide\r\n                if (this.isPaperAll()) this.node.emit('onHide');\r\n            }\r\n            beforeShow && beforeShow(error);\r\n            if (!error) {\r\n                // 设置展示中\r\n                if (changeState) this._base_view_state = ViewState.Showing;\r\n                onHide && this.node.once('onHide', onHide);\r\n\r\n                // 触发onCreate\r\n                if (this._base_view_created === false) {\r\n                    this._base_view_created = true;\r\n                    this.onBaseViewCreate();\r\n                }\r\n\r\n                // 设置属性\r\n                this.setNodeAttr(attr);\r\n\r\n                // 触发onLoad、onEnable\r\n                if (this.node.active !== true) { this.node.active = true; }\r\n\r\n                this.log('onShow');\r\n                let result = null;\r\n                try {\r\n                    result = this.onShow(data);\r\n                } catch (err) {\r\n                    this.onError();\r\n                    console.error(err);\r\n                }\r\n\r\n                // 设置遮罩，触发focus逻辑\r\n                Core.inst.manager.ui.refreshShade();\r\n\r\n                try {\r\n                    onShow && onShow(result);\r\n                    this.node.emit('onShow', result);\r\n                    Core.inst.manager.ui.emit(this._base_view_name, { event: 'onShow', result: result });\r\n                    Core.inst.manager.ui.emit('onShow', { name: this._base_view_name, result: result });\r\n                } catch (err) {\r\n                    console.error(err);\r\n                }\r\n\r\n                if (changeState) this._base_view_state = ViewState.Showed;\r\n            } else {\r\n                if (changeState) this._base_view_state = ViewState.Hid;\r\n            }\r\n\r\n            if (this._base_show_hide_delays.length > 0) {\r\n                this._base_show_hide_delays.shift()();\r\n            }\r\n        };\r\n\r\n        this.log('beforeShow');\r\n        let isNextCalled = false;\r\n        this.beforeShow((error) => {\r\n            if (isNextCalled) return this.error('beforeShow', 'next被重复调用');\r\n            isNextCalled = true;\r\n            next(error || null);\r\n        }, data);\r\n    }\r\n\r\n    protected hide(\r\n        //@ts-ignore\r\n        data?: Parameters<this['onHide']>[0],\r\n        onHide?: IHideParamOnHide) {\r\n\r\n        // 当前hide操作需要等待其它流程\r\n        if (this._base_view_state !== ViewState.Hid &&\r\n            this._base_view_state !== ViewState.Showed) {\r\n            this._base_show_hide_delays.push(\r\n                this.hide.bind(this, data, onHide)\r\n            );\r\n            return;\r\n        }\r\n\r\n        // hide流程\r\n        const changeState = this._base_view_state === ViewState.Showed;\r\n        if (changeState) this._base_view_state = ViewState.BeforeHide;\r\n        this.log('beforeHide');\r\n        const error = this.beforeHide(data);\r\n        if (!error) {\r\n            this.log('onHide');\r\n            if (changeState) this._base_view_state = ViewState.Hiding;\r\n            this.hideAllMiniViews(data);\r\n\r\n            let result = null;\r\n            try {\r\n                result = this.onHide(data);\r\n            } catch (error) {\r\n                console.error(error);\r\n            }\r\n\r\n            try {\r\n                onHide && onHide(result);\r\n                this.node.emit('onHide', result);\r\n                Core.inst.manager.ui.emit(this._base_view_name, { event: 'onHide', result: result });\r\n                Core.inst.manager.ui.emit('onHide', { name: this._base_view_name, result: result });\r\n            } catch (error) {\r\n                console.error(error);\r\n            }\r\n\r\n            if (changeState) this._base_view_state = ViewState.Hid;\r\n\r\n            if (this.hideEvent === HideEvent.active) { this.node.active = false; }\r\n            else if (this.hideEvent === HideEvent.destroy) { Core.inst.manager.ui.release(this); }\r\n            Core.inst.manager.ui.refreshShade();\r\n        } else {\r\n            if (changeState) this._base_view_state = ViewState.Showed;\r\n        }\r\n\r\n        if (this._base_show_hide_delays.length > 0) {\r\n            this._base_show_hide_delays.shift()();\r\n        }\r\n    }\r\n\r\n    private focus(boo: boolean): any {\r\n        let result = null;\r\n        let event = '';\r\n        if (boo) {\r\n            result = this.onFocus();\r\n            event = 'onFocus';\r\n        } else {\r\n            result = this.onLostFocus();\r\n            event = 'onLostFocus';\r\n        }\r\n\r\n        this.node.emit(event, result);\r\n        Core.inst.manager.ui.emit(this._base_view_name, { event: event, result: result });\r\n        Core.inst.manager.ui.emit(event, { name: this._base_view_name, result: result });\r\n    }\r\n\r\n    /**\r\n     * 加载UI目录下resources里面的资源\r\n     * @param path 相对于resources的路径\r\n     * @param callback 回调\r\n     * this.loadRes('Bag', Prefab, function(asset){})\r\n     */\r\n    protected loadRes<T extends typeof Asset>(path: string, type: T, callback?: (result: InstanceType<T> | null) => any) {\r\n        Core.inst.manager.ui.loadRes(this, path, type, callback);\r\n    }\r\n\r\n    /**\r\n     * 预加载UI目录下resources里面的资源\r\n     * @param path 相对于resources的路径\r\n     * this.preloadRes('Bag', Prefab)\r\n     */\r\n    protected preloadRes<T extends typeof Asset>(path: string, type: T) {\r\n        Core.inst.manager.ui.preloadRes(this, path, type);\r\n    }\r\n\r\n    /**\r\n     * 加载UI目录下resources里面的资源\r\n     * @param path 相对于resources的路径\r\n     * @param callback 回调\r\n     * this.loadResDir('Bag', Prefab, function(asset){})\r\n     */\r\n    protected loadResDir<T extends typeof Asset>(path: string, type: T, callback?: (result: InstanceType<T>[] | null) => any) {\r\n        Core.inst.manager.ui.loadResDir(this, path, type, callback);\r\n    }\r\n\r\n    /**\r\n     * 预加载UI目录下resources里面的资源\r\n     * @param path 相对于resources的路径\r\n     * this.preloadResDir('Bag', Prefab)\r\n     */\r\n    protected preloadResDir<T extends typeof Asset>(path: string, type: T) {\r\n        Core.inst.manager.ui.preloadResDir(this, path, type);\r\n    }\r\n\r\n    /**\r\n     * 设置字体资源\r\n     * @param path UI的resources目录下的相对路径\r\n     */\r\n    protected setFont(target: Label, path: string, onComplete?: (success: boolean) => any) {\r\n        this.loadRes(path, Font, (font) => {\r\n            if (!font || !isValid(target)) {\r\n                return onComplete && onComplete(false);\r\n            }\r\n            target.font = font;\r\n            onComplete && onComplete(true);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 设置Spine资源\r\n     * @param path UI的resources目录下的相对路径\r\n     */\r\n    protected setSpine(target: sp.Skeleton, path: string, onComplete?: (success: boolean) => any) {\r\n        this.loadRes(path, sp.SkeletonData, (skeletonData) => {\r\n            if (!skeletonData || !isValid(target)) {\r\n                return onComplete && onComplete(false);\r\n            }\r\n            target.skeletonData = skeletonData;\r\n            onComplete && onComplete(true);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 设置图片资源\r\n     * @param path UI的resources目录下的相对路径(必须以/spriteFrame结尾)\r\n     * \r\n     * @example\r\n     * setSprite(sprite, 'img/a/spriteFrame', onComplete:(succ)=>{})\r\n     */\r\n    protected setSprite(target: Sprite, path: string, onComplete?: (success: boolean) => any) {\r\n        this.loadRes(path, SpriteFrame, (spriteFrame) => {\r\n            if (!spriteFrame || !isValid(target)) {\r\n                return onComplete && onComplete(false);\r\n            }\r\n            target.spriteFrame = spriteFrame;\r\n            onComplete && onComplete(true);\r\n        });\r\n    }\r\n\r\n    /**打印日志 */\r\n    protected get log() {\r\n        return Logger.create('log', '#1e90ff', DEV ? `[${this._base_view_name}] LOG` : `[${this._base_view_name}] [LOG]`);\r\n    }\r\n\r\n    /**打印警告 */\r\n    protected get warn() {\r\n        return Logger.create('warn', '#ff7f50', DEV ? `[${this._base_view_name}] WARN` : `[${this._base_view_name}] [WARN]`);\r\n    }\r\n\r\n    /**打印错误 */\r\n    protected get error() {\r\n        return Logger.create('error', '#ff4757', DEV ? `[${this._base_view_name}] ERROR` : `[${this._base_view_name}] [ERROR]`);\r\n    }\r\n\r\n    //////////////以下为可重写//////////////\r\n    /**\r\n    * 展示\r\n    * @param data 传递给onShow的参数\r\n    * @returns \r\n    */\r\n    protected onShow(data?: any): any {\r\n        return data;\r\n    }\r\n\r\n    /**\r\n     * 隐藏\r\n     * @param data 传递给onHide的参数\r\n     * @returns \r\n     */\r\n    protected onHide(data?: any): any {\r\n        return data;\r\n    }\r\n\r\n    /**\r\n     * 失去焦点\r\n     * @returns \r\n     */\r\n    protected onLostFocus(): any {\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 获得焦点\r\n     * @returns \r\n     */\r\n    protected onFocus(): any {\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * onShow前调用\r\n     * @param next 回调，传递的error不为空时，表示错误，onShow不会执行\r\n     * @param data 传递给onShow的参数\r\n     */\r\n    protected beforeShow(next: (error?: string) => void, data?: any): any {\r\n        next(null);\r\n    }\r\n\r\n    /**\r\n     * hide前调用\r\n     * @param data 传递给onHide的参数\r\n     * @returns 如果返回字符串，则表示错误信息\r\n     */\r\n    protected beforeHide(data?: any): string | void {\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * onShow报错会执行\r\n     */\r\n    protected onError(): any {\r\n        return;\r\n    }\r\n\r\n    /**\r\n     * 背景遮照的参数\r\n     */\r\n    protected onShade(): IShade {\r\n        return {};\r\n    }\r\n}","import { Component, Director, director, EventTarget, js } from 'cc';\r\nimport { DEV, EDITOR } from 'cc/env';\r\nimport * as debug from './lib/debug/debug';\r\nimport logger from './lib/logger/logger';\r\nimport storage from './lib/storage/storage';\r\nimport task from './lib/task/task';\r\nimport EventManager from './manager/event/EventManager';\r\nimport LoaderManager from './manager/loader/LoaderManager';\r\nimport SoundManager from './manager/sound/SoundManager';\r\nimport TimerManager from './manager/timer/TimerManager';\r\nimport UIManager from './manager/ui/UIManager';\r\n\r\nenum EventType {\r\n    /**AppInit准备完毕 */\r\n    EVENT_APPINIT_FINISHED = 'EVENT_APPINIT_FINISHED',\r\n    /**系统Manager初始化完毕 */\r\n    EVENT_SYS_MANAGER_INITED = 'EVENT_SYS_MANAGER_INITED',\r\n    /**用户Manager初始化完毕 */\r\n    EVENT_USER_MANAGER_INITED = 'EVENT_USER_MANAGER_INITED',\r\n    /**所有Manager初始化完毕 */\r\n    EVENT_MANAGER_INITED = 'EVENT_MANAGER_INITED',\r\n    /**所有Manager准备完毕 */\r\n    EVENT_MANAGER_FINISHED = 'EVENT_MANAGER_FINISHED'\r\n}\r\n\r\ntype IData = { [key in string]: any };\r\ntype IConfig = { [key in string]: any };\r\ntype IStore = { [key in string]: any };\r\ntype ICtrl = { [key in string]: any };\r\n\r\ninterface ITypeofManager {\r\n    Loader: Omit<typeof LoaderManager, keyof Component>,\r\n    Event: Omit<typeof EventManager, keyof Component>,\r\n    Sound: Omit<typeof SoundManager, keyof Component>,\r\n    Timer: Omit<typeof TimerManager, keyof Component>,\r\n    UI: Omit<typeof UIManager, keyof Component>\r\n}\r\n\r\ninterface IManager {\r\n    loader: Omit<LoaderManager, keyof Component>,\r\n    event: Omit<EventManager, keyof Component>,\r\n    sound: Omit<SoundManager<any, any>, keyof Component>,\r\n    timer: Omit<TimerManager, keyof Component>,\r\n    ui: Omit<UIManager<any, any>, keyof Component>\r\n}\r\n\r\ninterface ICore {\r\n    data: IData,\r\n    config: IConfig,\r\n    store: IStore,\r\n    controller: ICtrl,\r\n    Controller: ICtrl,\r\n    manager: IManager,\r\n    Manager: ITypeofManager\r\n}\r\n\r\nconst Lib = { task, storage, debug, logger };\r\nconst Config = {};\r\nconst Data = {};\r\nconst Store = {};\r\nconst controller = {};\r\nconst Controller = {};\r\nconst Manager = {};\r\nconst manager = {};\r\n\r\nconst eventTarget = new EventTarget();\r\nlet EventMap = {};\r\n\r\ndirector.on(Director.EVENT_RESET, () => {\r\n    js.clear(Config);\r\n    js.clear(Data);\r\n    js.clear(Store);\r\n    js.clear(controller);\r\n    js.clear(Controller);\r\n    js.clear(Manager);\r\n    js.clear(manager);\r\n\r\n    EventMap = {};\r\n});\r\n\r\nexport default class Core<T extends ICore> {\r\n    static EventType = EventType;\r\n\r\n    protected static _inst: Core<ICore> | undefined;\r\n    static get inst() {\r\n        if (!this._inst) this._inst = new Core();\r\n        return this._inst;\r\n    }\r\n\r\n    lib = Lib;\r\n    config: T['config'] = null;\r\n    data: T['data'] = null;\r\n    store: T['store'] = null;\r\n    Controller: T['Controller'] = null;\r\n    controller: T['controller'] = null;\r\n    Manager: T['Manager'] = null;\r\n    manager: T['manager'] = null;\r\n\r\n    constructor() {\r\n        this.config = Config;\r\n        this.data = Data;\r\n        this.store = Store;\r\n        this.Controller = Controller;\r\n        this.controller = controller;\r\n        this.Manager = Manager as any;\r\n        this.manager = manager as any;\r\n        if (!EDITOR || DEV) {\r\n            if (this.constructor !== Core && !js.getClassById('App')) {\r\n                js.setClassAlias(this.constructor as any, 'App');\r\n            }\r\n        }\r\n    }\r\n\r\n    on(event: keyof typeof EventType, callback: (...any: any[]) => void, target?: any): any {\r\n        if (EventMap[event]) callback.call(target);\r\n        eventTarget.on(event, callback, target);\r\n    }\r\n\r\n    once(event: keyof typeof EventType, callback: Function, target?: any): any {\r\n        if (EventMap[event]) {\r\n            callback.call(target);\r\n        } else {\r\n            eventTarget.once(event, callback as any, target);\r\n        }\r\n    }\r\n\r\n    off(event: keyof typeof EventType, callback: (...any: any[]) => void, target?: any): any {\r\n        eventTarget.off(event, callback, target);\r\n    }\r\n\r\n    targetOff(target: any) {\r\n        eventTarget.targetOff(target);\r\n    }\r\n\r\n    /**\r\n     * 请不要手动调用\r\n     */\r\n    static emit(event: keyof typeof EventType, ...args: any[]): any {\r\n        EventMap[event] = true;\r\n        eventTarget.emit(event, ...args);\r\n    }\r\n}","import { Color, Canvas, UITransform, instantiate, math, Toggle, TextureCube, _decorator, Component, Button, labelAssembler, game, director, Node, Scene, renderer, CameraComponent, Label, ForwardPipeline, RichText } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('internal.DebugViewRuntimeControl')\r\nexport class DebugViewRuntimeControl extends Component {\r\n    @property(Node)\r\n    compositeModeToggle: Node | null = null;\r\n    @property(Node)\r\n    singleModeToggle: Node | null = null;\r\n    @property(Node)\r\n    EnableAllCompositeModeButton: Node | null = null;\r\n\t_single: number = 0;\r\n\r\n    private strSingle: string[] = [\r\n        'No Single Debug',\r\n        'Vertex Color',\r\n        'Vertex Normal',\r\n        'Vertex Tangent',\r\n        'World Position',\r\n        'Vertex Mirror',\r\n        'Face Side',\r\n        'UV0',\r\n        'UV1',\r\n        'UV Lightmap',\r\n        'Project Depth',\r\n        'Linear Depth',\r\n\r\n        'Fragment Normal',\r\n        'Fragment Tangent',\r\n        'Fragment Binormal',\r\n        'Base Color',\r\n        'Diffuse Color',\r\n        'Specular Color',\r\n        'Transparency',\r\n        'Metallic',\r\n        'Roughness',\r\n        'Specular Intensity',\r\n        'IOR',\r\n\r\n        'Direct Diffuse',\r\n        'Direct Specular',\r\n        'Direct All',\r\n        'Env Diffuse',\r\n        'Env Specular',\r\n        'Env All',\r\n        'Emissive',\r\n        'Light Map',\r\n        'Shadow',\r\n        'AO',\r\n\r\n        'Fresnel',\r\n        'Direct Transmit Diffuse',\r\n        'Direct Transmit Specular',\r\n        'Env Transmit Diffuse',\r\n        'Env Transmit Specular',\r\n        'Transmit All',\r\n        'Direct Internal Specular',\r\n        'Env Internal Specular',\r\n        'Internal All',\r\n\r\n        'Fog',\r\n    ];\r\n    private strComposite: string[] = [\r\n        'Direct Diffuse',\r\n        'Direct Specular',\r\n        'Env Diffuse',\r\n        'Env Specular',\r\n        'Emissive',\r\n        'Light Map',\r\n        'Shadow',\r\n        'AO',\r\n\r\n        'Normal Map',\r\n        'Fog',\r\n\r\n        'Tone Mapping',\r\n        'Gamma Correction',\r\n\r\n        'Fresnel',\r\n        'Transmit Diffuse',\r\n        'Transmit Specular',\r\n        'Internal Specular',\r\n        'TT',\r\n    ];\r\n    private strMisc: string[] = [\r\n        'CSM Layer Coloration',\r\n        'Lighting With Albedo',\r\n    ];\r\n\r\n    private compositeModeToggleList: Node[] = [];\r\n    private singleModeToggleList: Node[] = [];\r\n    private miscModeToggleList: Node[] = [];\r\n    private textComponentList: RichText[] = [];\r\n    private labelComponentList: Label[] = [];\r\n    private textContentList: string[] = [];\r\n    private hideButtonLabel: Label;\r\n    start() {\r\n        // get canvas resolution\r\n        const canvas = this.node.parent.getComponent(Canvas);\r\n        if (!canvas) {\r\n            console.error('debug-view-runtime-control should be child of Canvas');\r\n            return;\r\n        }\r\n\r\n        const uiTransform = this.node.parent.getComponent(UITransform);\r\n        const halfScreenWidth = uiTransform.width * 0.5;\r\n        const halfScreenHeight = uiTransform.height * 0.5;\r\n\r\n        let x = -halfScreenWidth + halfScreenWidth * 0.1, y = halfScreenHeight - halfScreenHeight * 0.1;\r\n        const width = 200, height = 20;\r\n\r\n        // new nodes\r\n        const miscNode = this.node.getChildByName('MiscMode');\r\n        const buttonNode = instantiate(miscNode);\r\n        buttonNode.parent = this.node;\r\n        buttonNode.name = 'Buttons';\r\n        const titleNode = instantiate(miscNode);\r\n        titleNode.parent = this.node;\r\n        titleNode.name = 'Titles';\r\n\r\n        // title\r\n        for (let i = 0; i < 2; i++) {\r\n            const newLabel = instantiate(this.EnableAllCompositeModeButton.getChildByName('Label'));\r\n            newLabel.setPosition(x + (i > 0 ? 50 + width * 2 : 150), y, 0.0);\r\n            newLabel.setScale(0.75, 0.75, 0.75);\r\n            newLabel.parent = titleNode;\r\n            const labelComponent = newLabel.getComponent(Label);\r\n            labelComponent.string = i ? '----------Composite Mode----------' : '----------Single Mode----------';\r\n            labelComponent.color = Color.WHITE;\r\n            labelComponent.overflow = 0;\r\n            this.labelComponentList[this.labelComponentList.length] = labelComponent;\r\n        }\r\n\r\n        y -= height;\r\n        // single\r\n        let currentRow = 0;\r\n        for (let i = 0; i < this.strSingle.length; i++, currentRow++) {\r\n            if (i === this.strSingle.length >> 1) {\r\n                x += width;\r\n                currentRow = 0;\r\n            }\r\n            const newNode = i ? instantiate(this.singleModeToggle) : this.singleModeToggle;\r\n            newNode.setPosition(x, y - height * currentRow, 0.0);\r\n            newNode.setScale(0.5, 0.5, 0.5);\r\n            newNode.parent = this.singleModeToggle.parent;\r\n\r\n            const textComponent = newNode.getComponentInChildren(RichText);\r\n            textComponent.string = this.strSingle[i];\r\n            this.textComponentList[this.textComponentList.length] = textComponent;\r\n            this.textContentList[this.textContentList.length] = textComponent.string;\r\n\r\n            newNode.on(Toggle.EventType.TOGGLE, this.toggleSingleMode, this);\r\n\r\n            this.singleModeToggleList[i] = newNode;\r\n        }\r\n\r\n        x += width;\r\n        // buttons\r\n        this.EnableAllCompositeModeButton.setPosition(x + 15, y, 0.0);\r\n        this.EnableAllCompositeModeButton.setScale(0.5, 0.5, 0.5);\r\n        this.EnableAllCompositeModeButton.on(Button.EventType.CLICK, this.enableAllCompositeMode, this);\r\n        this.EnableAllCompositeModeButton.parent = buttonNode;\r\n        let labelComponent = this.EnableAllCompositeModeButton.getComponentInChildren(Label);\r\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\r\n\r\n        const changeColorButton = instantiate(this.EnableAllCompositeModeButton);\r\n        changeColorButton.setPosition(x + 90, y, 0.0);\r\n        changeColorButton.setScale(0.5, 0.5, 0.5);\r\n        changeColorButton.on(Button.EventType.CLICK, this.changeTextColor, this);\r\n        changeColorButton.parent = buttonNode;\r\n        labelComponent = changeColorButton.getComponentInChildren(Label);\r\n        labelComponent.string = 'TextColor';\r\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\r\n\r\n        const HideButton = instantiate(this.EnableAllCompositeModeButton);\r\n        HideButton.setPosition(x + 200, y, 0.0);\r\n        HideButton.setScale(0.5, 0.5, 0.5);\r\n        HideButton.on(Button.EventType.CLICK, this.hideUI, this);\r\n        HideButton.parent = this.node.parent;\r\n        labelComponent = HideButton.getComponentInChildren(Label);\r\n        labelComponent.string = 'Hide UI';\r\n        this.labelComponentList[this.labelComponentList.length] = labelComponent;\r\n        this.hideButtonLabel = labelComponent;\r\n\r\n        // misc\r\n        y -= 40;\r\n        for (let i = 0; i < this.strMisc.length; i++) {\r\n            const newNode = instantiate(this.compositeModeToggle);\r\n            newNode.setPosition(x, y - height * i, 0.0);\r\n            newNode.setScale(0.5, 0.5, 0.5);\r\n            newNode.parent = miscNode;\r\n\r\n            const textComponent = newNode.getComponentInChildren(RichText);\r\n            textComponent.string = this.strMisc[i];\r\n            this.textComponentList[this.textComponentList.length] = textComponent;\r\n            this.textContentList[this.textContentList.length] = textComponent.string;\r\n\r\n            const toggleComponent = newNode.getComponent(Toggle);\r\n            toggleComponent.isChecked = i ? true : false;\r\n            newNode.on(Toggle.EventType.TOGGLE, i ? this.toggleLightingWithAlbedo : this.toggleCSMColoration, this);\r\n            this.miscModeToggleList[i] = newNode;\r\n        }\r\n\r\n        // composite\r\n        y -= 150;\r\n        for (let i = 0; i < this.strComposite.length; i++) {\r\n            const newNode = i ? instantiate(this.compositeModeToggle) : this.compositeModeToggle;\r\n            newNode.setPosition(x, y - height * i, 0.0);\r\n            newNode.setScale(0.5, 0.5, 0.5);\r\n            newNode.parent = this.compositeModeToggle.parent;\r\n\r\n            const textComponent = newNode.getComponentInChildren(RichText);\r\n            textComponent.string = this.strComposite[i];\r\n            this.textComponentList[this.textComponentList.length] = textComponent;\r\n            this.textContentList[this.textContentList.length] = textComponent.string;\r\n\r\n            newNode.on(Toggle.EventType.TOGGLE, this.toggleCompositeMode, this);\r\n\r\n            this.compositeModeToggleList[i] = newNode;\r\n        }\r\n    }\r\n\r\n    isTextMatched(textUI, textDescription) : boolean {\r\n        let tempText = new String(textUI);\r\n        const findIndex = tempText.search('>');\r\n        if (findIndex === -1) {\r\n            return textUI === textDescription;\r\n        } else {\r\n            tempText = tempText.substr(findIndex + 1);\r\n            tempText = tempText.substr(0, tempText.search('<'));\r\n            return tempText === textDescription;\r\n        }\r\n    }\r\n    toggleSingleMode(toggle: Toggle) {\r\n        const debugView = director.root!.debugView;\r\n        const textComponent = toggle.getComponentInChildren(RichText);\r\n        for (let i = 0; i < this.strSingle.length; i++) {\r\n            if (this.isTextMatched(textComponent.string, this.strSingle[i])) {\r\n                debugView.singleMode = i;\r\n            }\r\n        }\r\n    }\r\n    toggleCompositeMode(toggle: Toggle) {\r\n        const debugView = director.root!.debugView;\r\n        const textComponent = toggle.getComponentInChildren(RichText);\r\n        for (let i = 0; i < this.strComposite.length; i++) {\r\n            if (this.isTextMatched(textComponent.string, this.strComposite[i])) {\r\n                debugView.enableCompositeMode(i, toggle.isChecked);\r\n            }\r\n        }\r\n    }\r\n    toggleLightingWithAlbedo(toggle: Toggle) {\r\n        const debugView = director.root!.debugView;\r\n        debugView.lightingWithAlbedo = toggle.isChecked;\r\n    }\r\n    toggleCSMColoration(toggle: Toggle) {\r\n        const debugView = director.root!.debugView;\r\n        debugView.csmLayerColoration = toggle.isChecked;\r\n    }\r\n    enableAllCompositeMode(button: Button) {\r\n        const debugView = director.root!.debugView;\r\n        debugView.enableAllCompositeMode(true);\r\n        for (let i = 0; i < this.compositeModeToggleList.length; i++) {\r\n            const toggleComponent = this.compositeModeToggleList[i].getComponent(Toggle);\r\n            toggleComponent.isChecked = true;\r\n        }\r\n\r\n        let toggleComponent = this.miscModeToggleList[0].getComponent(Toggle);\r\n        toggleComponent.isChecked = false;\r\n        debugView.csmLayerColoration = false;\r\n        toggleComponent = this.miscModeToggleList[1].getComponent(Toggle);\r\n        toggleComponent.isChecked = true;\r\n        debugView.lightingWithAlbedo = true;\r\n    }\r\n    hideUI(button: Button) {\r\n        const titleNode = this.node.getChildByName('Titles');\r\n        const activeValue = !titleNode.active;\r\n        this.singleModeToggleList[0].parent.active = activeValue;\r\n        this.miscModeToggleList[0].parent.active = activeValue;\r\n        this.compositeModeToggleList[0].parent.active = activeValue;\r\n        this.EnableAllCompositeModeButton.parent.active = activeValue;\r\n        titleNode.active = activeValue;\r\n        this.hideButtonLabel.string = activeValue ? 'Hide UI' : 'Show UI';\r\n    }\r\n\r\n    private _currentColorIndex = 0;\r\n    private strColor: string[] = [\r\n        '<color=#ffffff>',\r\n        '<color=#000000>',\r\n        '<color=#ff0000>',\r\n        '<color=#00ff00>',\r\n        '<color=#0000ff>',\r\n    ];\r\n    private color: Color[] = [\r\n        Color.WHITE,\r\n        Color.BLACK,\r\n        Color.RED,\r\n        Color.GREEN,\r\n        Color.BLUE,\r\n    ];\r\n    changeTextColor(button: Button) {\r\n        this._currentColorIndex++;\r\n        if (this._currentColorIndex >= this.strColor.length) {\r\n            this._currentColorIndex = 0;\r\n        }\r\n        for (let i = 0; i < this.textComponentList.length; i++) {\r\n            this.textComponentList[i].string = this.strColor[this._currentColorIndex] + this.textContentList[i] + '</color>';\r\n        }\r\n        for (let i = 0; i < this.labelComponentList.length; i++) {\r\n            this.labelComponentList[i].color = this.color[this._currentColorIndex];\r\n        }\r\n    }\r\n\r\n    onLoad() {\r\n    }\r\n    update(deltaTime: number) {\r\n    }\r\n}\r\n","import { DEBUG, DEV } from 'cc/env';\r\n\r\nfunction jsGetSet(obj: unknown, prop: string, getter: Function, setter?: Function) {\r\n    Object.defineProperty(obj, prop, {\r\n        get: getter as any,\r\n        set: setter as any,\r\n        enumerable: false,\r\n        configurable: false\r\n    });\r\n}\r\nfunction clear(object: Record<string | number, any>) {\r\n    if (!object) return;\r\n    for (const key of Object.keys(object)) {\r\n        delete object[key];\r\n    }\r\n}\r\n/**\r\n * 将某个变量设置为不可观测(不可在浏览器中打印)\r\n * @param owner object | string | number | boolean | Array | Function | ...\r\n * @param callback 被观测时触发回调\r\n * @returns \r\n */\r\nexport function unobservable(owner: unknown, callback?: Function) {\r\n    if (DEV || DEBUG) return;\r\n    if (!owner) return;\r\n    function define() {\r\n        function accessor() {\r\n            if (callback) {\r\n                callback();\r\n            } else {\r\n                clear(owner);\r\n            }\r\n        }\r\n        try {\r\n            jsGetSet(owner, 'unobservable', accessor.bind(null, 'de' + 'bu' + 'gg' + 'er'));\r\n        }\r\n        catch (e) { !0; }\r\n    }\r\n    define();\r\n}","import { EventTarget, _decorator } from 'cc';\r\nimport BaseManager from '../../base/BaseManager';\r\nconst { ccclass } = _decorator;\r\n\r\n@ccclass('EventManager')\r\nexport default class EventManager extends BaseManager {\r\n    private events: Map<string | number, EventTarget> = new Map();\r\n\r\n    clear() {\r\n        return this.events.clear();\r\n    }\r\n\r\n    delete(rootName: string | number) {\r\n        return this.events.delete(rootName);\r\n    }\r\n\r\n    get(rootName: string | number): EventTarget {\r\n        if (this.events.has(rootName)) {\r\n            return this.events.get(rootName);\r\n        }\r\n\r\n        const event = new EventTarget();\r\n        this.events.set(rootName, event);\r\n\r\n        return event;\r\n    }\r\n}\r\n","import { App } from './app';\r\n\r\n/**\r\n * ccc除物理引擎等外的基础功能已经准备好了\r\n */\r\nexport function cccReady(app: App) {\r\n\r\n}\r\n\r\n/**\r\n * ccc全部功能都初始化完毕了\r\n */\r\nexport function cccInited(app: App) {\r\n\r\n}\r\n\r\n/**\r\n * app除了用户自定义Manager未加载外，其它都已准备好了\r\n */\r\nexport function appReady(app: App) {\r\n\r\n}\r\n\r\n/**\r\n * app全部功能都初始化完毕了\r\n */\r\nexport function appInited(app: App) {\r\n\r\n}","import { _decorator, Component, EventTouch, Node, Vec2 } from \"cc\";\n\nconst { ccclass, property } = _decorator;\n@ccclass\nexport class JmClickComponent extends Component {\n    private performClick = false\n    private startPos: Vec2//记录Touch事件开始时的位置\n\n    onEnable() {\n        super.onEnable && super.onEnable();\n        this.node.on(Node.EventType.TOUCH_START, this.OnClickTouchEnd, this)\n        this.node.on(Node.EventType.TOUCH_MOVE, this.OnClickTouchEnd, this)\n        this.node.on(Node.EventType.TOUCH_END, this.OnClickTouchEnd, this)\n    }\n\n    onDisable() {\n        super.onDisable && super.onDisable();\n        this.node.off(Node.EventType.TOUCH_START, this.OnClickTouchEnd, this)\n        this.node.off(Node.EventType.TOUCH_MOVE, this.OnClickTouchEnd, this)\n        this.node.off(Node.EventType.TOUCH_END, this.OnClickTouchEnd, this)\n    }\n\n    onDestroy() {\n        super.onDestroy && super.onDestroy();\n    }\n\n    OnClickTouchEnd(event: EventTouch) {\n        switch (event.getType()) {\n            case Node.EventType.TOUCH_START:\n                // JmLobbyLog.Log(\"TOUCH_START\")\n                this.performClick = true\n                this.startPos = event.getLocation()\n                break\n            case Node.EventType.TOUCH_MOVE:\n                // JmLobbyLog.Log(\"TOUCH_MOVE\")\n                let pos = event.getLocation()\n                let dst: Vec2 = this.startPos.subtract(pos)\n                if (dst.length() > 5) {//有的机型就算没有移动也会直接调用一次TOUCH_MOVE事件，此处将小距离移动忽略不计\n                    this.performClick = false\n                }\n                break\n            case Node.EventType.TOUCH_END:\n                if (this.performClick) {\n                    this.onItemClick(this)\n                }\n                this.performClick = false\n                break\n        }\n    }\n\n    protected onItemClick(target:any) {\n    }\n\n}","import { Component, EventTouch, instantiate, Node, Prefab, ScrollView, UITransform, Vec2, _decorator } from \"cc\";\r\nimport JmRefreshFooter from \"./JmRefreshFooter\";\r\nimport { RefreshOrLoadState } from \"./RefreshOrLoadState\";\r\n//import JmLobbyLog from \"../util/JmLobbyLog\";\r\n\r\nconst { ccclass, property, menu, requireComponent } = _decorator;\r\n@ccclass()\r\n@requireComponent(ScrollView)\r\n@menu(\"UI 组件/JmHorizontalListView\")\r\nexport default class JmHorizontalListView extends Component {\r\n    @property(Prefab)\r\n    itemPrefab: Prefab = null\r\n\r\n    @property\r\n    itemWidth: number = 0\r\n\r\n    @property\r\n    spacing = 0\r\n    @property\r\n    leftOffset = 0\r\n    @property\r\n    rightOffset = 0\r\n\r\n    @property\r\n    pullLeftToLoadEnabled = false\r\n    @property\r\n    footerOffset = 0\r\n    private footerController: JmRefreshFooter\r\n    private onPullLeftToLoad: Function\r\n    private hasMore: boolean = true\r\n\r\n    scrollView: ScrollView\r\n    footer: Prefab\r\n    footerWidth = 100\r\n\r\n    private _touchStartX = 0\r\n    private _touchStartFromLeft = false\r\n\r\n    private footerHolderWidth = 0;//底部增加占位控件，防止item总高度不够时无法滑动View\r\n\r\n    private isUserTouched = false;\r\n    private loadingState: RefreshOrLoadState = RefreshOrLoadState.NONE\r\n\r\n    private componentName: string = \"JmListViewItem\"\r\n\r\n    private showingViews = new Map<number, any>()\r\n    private recycledViews = new Array<any>()\r\n    private itemViewDirty = new Map<number, boolean>()\r\n    private itemViewWidths = new Array<number>()\r\n\r\n    private _data = new Array<any>()\r\n\r\n    private _dirty = false//决定是否需要刷新ListView\r\n    private _sizeDirty = false\r\n    private _checkRight = false\r\n\r\n\r\n    protected onLoad() {\r\n        this.scrollView = this.node.getComponent(ScrollView)\r\n        //这里设定一下anchor值，后面的itemView位置计算都依赖anchor\r\n        this.scrollView.content.getComponent(UITransform).anchorX = 0\r\n        this.scrollView.content.getComponent(UITransform).anchorY = 0.5\r\n\r\n        // JmLobbyLoaderMgr.LoadAssetCfg(JmLobbyAssetsCfg.JmRefreshFooterHorizontal).then((footer: Prefab) => {\r\n        //     this.footer = footer\r\n        // })\r\n\r\n        // if (!this.scrollView.elastic && this.scrollView.bounceDuration > 0 && this.pullDownToRefreshEnabled) {\r\n        //     //需要启用scrollView的elastic才能过量滑动，引发下拉刷新，\r\n        //     //且bounceDuration回弹必须设为0秒立即回弹，否则在update中更新的content位置会被回弹动画覆盖\r\n        //     JmLobbyLog.Error(\"set elastic true or pullRefresh Events will not work!!\")\r\n        // }\r\n        // if (this.scrollView.cancelInnerEvents) {\r\n        //     //cancelInnerEvents设置为true会导致ItemView的cancel提前触发，影响下拉刷新判断\r\n        //     JmLobbyLog.Error(\"do not set cancelInnerEvent true, it'll effect Refresh Events!!\")\r\n        // }\r\n    }\r\n\r\n    protected onEnable() {\r\n        this.scrollView.node.on(Node.EventType.TOUCH_START, this.onTouchStart, this)\r\n        this.scrollView.node.on(Node.EventType.TOUCH_END, this.onTouchEnd, this)\r\n        this.scrollView.node.on(Node.EventType.TOUCH_MOVE, this.onTouchMove, this)\r\n        this.scrollView.node.on(Node.EventType.TOUCH_CANCEL, this.onTouchCancel, this)\r\n    }\r\n\r\n    protected onDisable() {\r\n        this.scrollView.node.off(Node.EventType.TOUCH_START, this.onTouchStart, this)\r\n        this.scrollView.node.off(Node.EventType.TOUCH_END, this.onTouchEnd, this)\r\n        this.scrollView.node.off(Node.EventType.TOUCH_MOVE, this.onTouchMove, this)\r\n        this.scrollView.node.off(Node.EventType.TOUCH_CANCEL, this.onTouchCancel, this)\r\n    }\r\n\r\n    onTouchStart(event: EventTouch) {\r\n        // JmLobbyLog.Log(\"onTouchStart\")\r\n        this.isUserTouched = true\r\n        this._touchStartX = event.getLocationX()\r\n        this._touchStartFromLeft = Math.floor(this.scrollView.getScrollOffset().x) <= 1//搞点容错率，有的机型的scrollOffset值不是很精确\r\n        // JmLobbyLog.Log(`isTop-->${this._touchStartFromTop}, startY-->${this._touchStartY}`)\r\n    }\r\n\r\n    onTouchMove(event: EventTouch) {\r\n        // let offsetY = event.getLocationY() - this._touchStartY\r\n        // JmLobbyLog.Log(\"getLocationY-->\" + event.getLocationY())\r\n        // if (this.isUserTouched) {//如果正在touch，则检测是否在释放时需要刷新\r\n        //     this.checkPullDownRefresh(offsetY)\r\n        // }\r\n    }\r\n\r\n    onTouchEnd() {\r\n        // JmLobbyLog.Log(\"onTouchEnd\")\r\n        // this.startPullDownRefresh()\r\n        this.isUserTouched = false\r\n    }\r\n\r\n    onTouchCancel() {\r\n        // JmLobbyLog.Log(\"onTouchCancel\")\r\n        // this.startPullDownRefresh()\r\n        this.isUserTouched = false\r\n    }\r\n\r\n    getData() {\r\n        return this._data\r\n    }\r\n\r\n    setData(data?: any) {\r\n        this._data = data\r\n    }\r\n\r\n    setComponentName(name: string) {\r\n        this.componentName = name\r\n    }\r\n\r\n    private updateSize() {\r\n        if (this.scrollView.vertical || !this.scrollView.horizontal) {\r\n            console.log(\"scroll orientation must set vertical in ListView!\")\r\n            return\r\n        }\r\n\r\n        // if (this.refreshState == RefreshOrLoadState.REFRESHING) {\r\n        //     height = height + 100\r\n        // }\r\n        this.scrollView.content.getComponent(UITransform).width = this.getNormalContentWidth()\r\n    }\r\n    getNormalContentWidth() {\r\n        let width = this.getContentWidth()\r\n        if (this.pullLeftToLoadEnabled) {\r\n            width += this.footerWidth\r\n        }\r\n        if (width < this.scrollView.node.getComponent(UITransform).width) {\r\n            this.footerHolderWidth = this.scrollView.node.getComponent(UITransform).width - width\r\n            width = this.scrollView.node.getComponent(UITransform).width\r\n        }\r\n        return width\r\n    }\r\n\r\n    private getContentWidth() {\r\n        return this.getItemPosOffset(this.getItemCount()) + this.leftOffset + this.rightOffset;\r\n    }\r\n\r\n    private getItemPosOffset(index: number) {\r\n        let sum = 0\r\n        for (let i = 0; i < index; i++) {\r\n            sum += this.getItemWidthWithSpacing(i)\r\n        }\r\n        return sum\r\n    }\r\n\r\n    private getItemWidthWithSpacing(index?: number) {\r\n        if (index != undefined) {\r\n            return (this.itemViewWidths[index] || this.itemWidth) + this.spacing\r\n        }\r\n        return this.itemWidth + this.spacing\r\n    }\r\n\r\n    private getListLeftRightVisiblePos() {\r\n        //scrollX的值从0开始到负的contentWidth\r\n        let scrollX = -this.scrollView.getScrollOffset().x\r\n        let width = this.scrollView.node.getComponent(UITransform).width\r\n        let leftVisibleX = scrollX\r\n        let rightVisibleX = scrollX + width\r\n        return [leftVisibleX, rightVisibleX]\r\n    }\r\n\r\n    /**\r\n     * 计算当前Item是否可见\r\n     * @param index\r\n     * @private\r\n     */\r\n    private isVisible(index: number) {\r\n        let [leftVisibleX, rightVisibleX] = this.getListLeftRightVisiblePos()\r\n\r\n        let itemLeftX = this.getItemPosOffset(index)\r\n        let itemRightX = itemLeftX + this.getItemWidthWithSpacing(index)\r\n\r\n        //item的底线或顶线可见即为item可见\r\n        return (itemLeftX >= leftVisibleX && itemLeftX <= rightVisibleX)\r\n            || (itemRightX >= leftVisibleX && itemRightX <= rightVisibleX)\r\n            //或者底线和顶线都在屏幕两侧外，即Item高度大于屏幕高度\r\n            || (itemLeftX <= leftVisibleX && itemRightX >= rightVisibleX)\r\n    }\r\n\r\n    protected update(dt: number) {\r\n        if (this._dirty) { //标记为dirty时才做刷新处理\r\n            let data = this._data\r\n            for (let i = 0; i < this.getItemCount(); ++i) {\r\n                if (this.isVisible(i)) {//可见则初始化UI\r\n                    if (this.itemViewDirty.get(i)) {\r\n                        let child = this.getItemView(i)\r\n                        let component = child.getComponent(this.componentName)\r\n                        if (component == null) {\r\n                            throw \"ERROR! item view must implements\" + this.componentName + \" component!!\"\r\n                        }\r\n                        component.updateItem(i, data[i], this)\r\n                        //记录updateItem之后的高度便于后面的计算\r\n                        if (this.itemViewWidths[i] == undefined) {\r\n                            this.itemViewWidths[i] = component.getItemWidth() || this.itemWidth\r\n                        }\r\n                        let x = this.getItemPosOffset(i) + this.getItemWidthWithSpacing(i) * child.anchorX + this.leftOffset\r\n                        // console.log(\"TestV-----------index-->\" + i, \"yPos--->\" + y, \"height-->\" + this.itemViewHeights)\r\n                        child.setPosition(x, 0)\r\n                        this._sizeDirty = true\r\n\r\n                        this.itemViewDirty.set(i, false);\r\n                        // JmLobbyLog.Log(\"clear item view dirty-->\" + i)\r\n                        if (child.parent == null) {\r\n                            this.scrollView.content.addChild(child)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            //遍历showingViews, 不可见则回收\r\n            this.showingViews.forEach((child: Node, index: number) => {\r\n                if (!this.isVisible(index) || this._data == null || this._data[index] == null) {\r\n                    // JmLobbyLog.Log(\"not visible, index = \" + index + \", child is\" + child)\r\n                    if (child != null) {\r\n                        this.recycleChild(index, child)\r\n                    }\r\n                }\r\n            })\r\n\r\n            this.checkFooterView()\r\n            // JmLobbyLog.Log(\"total Items:\" + this._data.length)\r\n            this._dirty = false\r\n        }\r\n        if (this._sizeDirty) {\r\n\r\n            let isRight = false\r\n            if (this._checkRight) {\r\n                isRight = this.isRight()\r\n            }\r\n            this.updateSize()\r\n            if (isRight) {\r\n                this.scrollView.scrollToOffset(new Vec2(this.scrollView.getMaxScrollOffset().x, 0))\r\n                this._dirty = true//scroll之后需要再次刷新，否则有可能不显示部分ItemView\r\n            }\r\n            this._sizeDirty = false\r\n        }\r\n    }\r\n\r\n    //addOrUpdateFooterView\r\n    private checkFooterView() {\r\n        if (this.footerController == null) {\r\n            if (this.footer != null && this.pullLeftToLoadEnabled) {\r\n                // JmLobbyLog.Log(\"addFooter\")\r\n                let footerView = instantiate(this.footer)\r\n                let component = footerView.getComponent<JmRefreshFooter>(JmRefreshFooter)\r\n                this.footerController = component\r\n                this.scrollView.content.addChild(footerView)\r\n                component.setState(RefreshOrLoadState.NONE)\r\n            }\r\n        }\r\n        if (this.footerController != null) {\r\n            let viewBottomY = -this.getContentWidth() - this.footerWidth / 2\r\n            let contentBottomY = -this.scrollView.content.getComponent(UITransform).width + this.footerWidth / 2 + this.footerOffset\r\n            this.footerController.node.setPosition(Math.min(viewBottomY, contentBottomY), 0)\r\n        }\r\n    }\r\n\r\n    private recycleChild(index: number, child: Node) {\r\n        child.removeFromParent()\r\n        this.showingViews.delete(index)\r\n        this.recycledViews.push(child)\r\n        this.itemViewDirty.set(index, true);\r\n    }\r\n\r\n    private getItemCount() {\r\n        return this._data ? this._data.length : 0\r\n    }\r\n\r\n    private getItemView(index: number) {\r\n        let itemView = this.showingViews.get(index)\r\n        if (itemView == null) {\r\n            this.itemViewDirty.set(index, true);\r\n        }\r\n        if (itemView == null) {\r\n            itemView = this.recycledViews.pop()\r\n        }\r\n        if (itemView == null) {\r\n            this.itemViewDirty.set(index, true);\r\n            itemView = instantiate(this.itemPrefab)\r\n        }\r\n        this.showingViews.set(index, itemView)\r\n        return itemView\r\n    }\r\n\r\n\r\n    onScrollEvent(sender: any, event: any) {\r\n        switch (event) {\r\n            case ScrollView.EventType.SCROLLING:\r\n                this.startPullLeftLoad()\r\n                this._dirty = true\r\n                break\r\n            default:\r\n                // JmLobbyLog.Log(\"event-->\" + event)\r\n                break\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 标记所有的Item需要刷新\r\n     */\r\n    private markChildrenDirty() {\r\n        for (let i = 0; i < this.getItemCount(); i++) {\r\n            this.itemViewDirty.set(i, true);\r\n        }\r\n    }\r\n\r\n    private isRight() {\r\n        return this.scrollView.getScrollOffset().x >= this.scrollView.getMaxScrollOffset().x\r\n    }\r\n\r\n    /**\r\n     * 刷新所有Item\r\n     * @param checkRight 是否检查使ListView保持在底部\r\n     *\r\n     * fixme 有个bug：如果刚初始化页面时就调用notifyChange且数据量大于了一页的展示数量，会导致页面无法滑动；目前的处理方式是如果非要调就延迟0.1秒调用，后续有时间再修复下\r\n     */\r\n    notifyChange(checkRight?: boolean) {\r\n        // if (this.getItemCount() == 0) {\r\n        //     if (this.emptyView) {\r\n        //         this.emptyView.active = true\r\n        //         if (JmNative.GetNetWorkState() == sys.NetworkType.NONE && this.noNetworkImg) {\r\n        //             this.emptyPic.spriteFrame = this.noNetworkImg\r\n        //         } else if (this.emptyImg) {\r\n        //             this.emptyPic.spriteFrame = this.emptyImg\r\n        //         }\r\n        //     }\r\n        // } else {\r\n        //     if (this.emptyView) {\r\n        //         this.emptyView.active = false\r\n        //     }\r\n        this._sizeDirty = true\r\n        this._checkRight = checkRight\r\n        this.markChildrenDirty()\r\n        // }\r\n        this._dirty = true\r\n    }\r\n\r\n    /**\r\n     * 刷新单个Item\r\n     */\r\n    notifyItemChange(index: number) {\r\n        this.itemViewDirty.set(index, true);\r\n        this._dirty = true\r\n    }\r\n\r\n    updateHeight(index: number, height: number) {\r\n        this.itemViewWidths[index] = height\r\n        this.notifyChange()\r\n    }\r\n\r\n    /**\r\n     * 设置上拉加载更多数据回调，在回调中加载数据，并在完成后调用{@link JmListView#onLoadComplete()}\r\n     */\r\n    setPullLeftToLoadListener(listener: Function) {\r\n        this.onPullLeftToLoad = listener\r\n    }\r\n\r\n    private startPullLeftLoad() {\r\n        // JmLobbyLog.Log(\"startPullUpLoad\", this.refreshState, this.loadingState)\r\n        if (this.pullLeftToLoadEnabled && this.hasMore && this.loadingState != RefreshOrLoadState.REFRESHING && !this.isUserTouched) {\r\n            let [offset, maxOffset] = [this.scrollView.getScrollOffset().y, this.scrollView.getMaxScrollOffset().y]\r\n            //有的机型offset值不是很准确，这里搞点容错率\r\n            if (Math.ceil(offset) >= Math.floor(maxOffset)) {\r\n                // JmLobbyLog.Log(\"PullUpToLoad\")\r\n                this.updateLoadingState(RefreshOrLoadState.REFRESHING)\r\n                if (this.onPullLeftToLoad) {\r\n                    this.onPullLeftToLoad()\r\n                }\r\n\r\n                /**测试：延时刷新完成返回，并添加测试数据*/\r\n                // this.scheduleOnce(() => {\r\n                //     if (this._data.length > 0) {\r\n                //         this._data.push(this._data[0])\r\n                //     }\r\n                //     this.onLoadComplete(true)\r\n                // }, 2)\r\n            } else {\r\n                // JmLobbyLog.Log(\"offset--->\" + offset, \"maxOffset-->\" + maxOffset)\r\n            }\r\n        }\r\n    }\r\n\r\n    onLoadComplete(hasMore: boolean = true) {\r\n        this.hasMore = hasMore\r\n        if (hasMore) {\r\n            this.updateLoadingState(RefreshOrLoadState.NONE)\r\n        } else {\r\n            this.updateLoadingState(RefreshOrLoadState.COMPLETE)\r\n        }\r\n        // JmLobbyLog.Log(\"loading done\")\r\n        this.notifyChange()\r\n    }\r\n\r\n    private updateLoadingState(state: RefreshOrLoadState) {\r\n        if (this.loadingState != state) {\r\n            this.loadingState = state\r\n            this.onLoadingStateChange(state)\r\n        }\r\n    }\r\n\r\n    private onLoadingStateChange(newState: RefreshOrLoadState) {\r\n        // JmLobbyLog.Log(\"onLoadingStateChange-->\" + this.loadingState)\r\n        this.footerController && this.footerController.setState(newState)\r\n    }\r\n}","import JmRefreshHeader from \"./JmRefreshHeader\";\r\nimport JmRefreshFooter from \"./JmRefreshFooter\";\r\nimport { RefreshOrLoadState } from \"./RefreshOrLoadState\";\r\nimport { _decorator, Component, Node, UITransform, Prefab, Sprite, SpriteFrame, ScrollView, Vec2, instantiate, sys, EventTouch } from 'cc';\r\nimport BaseView from \"db://app/base/BaseView\";\r\n// import { sysDefine } from \"./sysDefine\";\r\n// import { AssetsCfg } from \"./AssetsCfg\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\n@ccclass('JmListView')\r\n//@requireComponent(ScrollView)\r\n//@menu(\"UI 组件/JmListView\")\r\nexport default class JmListView extends BaseView {\r\n    @property(Prefab)\r\n    itemPrefab: Prefab = null\r\n\r\n    @property\r\n    itemHeight: number = 0\r\n    @property(Node)\r\n    emptyView: Node = null\r\n    @property(Sprite)\r\n    emptyPic: Sprite = null\r\n    @property(SpriteFrame)\r\n    noNetworkImg: SpriteFrame = null\r\n    @property(SpriteFrame)\r\n    emptyImg: SpriteFrame = null\r\n\r\n    @property\r\n    spacing = 0\r\n    @property\r\n    topMargin = 0\r\n    @property\r\n    bottomMargin = 0\r\n\r\n    @property\r\n    pullDownToRefreshEnabled = false\r\n    private headerController: JmRefreshHeader\r\n    private onPullDownToRefresh: Function\r\n\r\n    @property\r\n    pullUpToLoadEnabled = false\r\n    @property\r\n    footerOffset = 0\r\n    @property\r\n    refreshFooterShow = true\r\n    private footerController: JmRefreshFooter\r\n    private onPullUpToLoad: Function\r\n    private hasMore: boolean = true\r\n\r\n    scrollView: ScrollView\r\n    header: Prefab;\r\n    headerHeight = 300\r\n    footer: Prefab;\r\n    footerHeight = 250\r\n\r\n    private _touchStartY = 0\r\n    private _touchStartFromTop = false\r\n\r\n    //下拉刷新和上拉加载的状态\r\n    private isUserTouched = false;\r\n    private refreshState: RefreshOrLoadState = RefreshOrLoadState.NONE\r\n    private loadingState: RefreshOrLoadState = RefreshOrLoadState.NONE\r\n\r\n    private componentName: string = \"JmListViewItem\"\r\n\r\n    private footerHolderHeight = 0;//底部增加占位控件，防止item总高度不够时无法滑动View\r\n\r\n    private showingViews = new Map<number, any>()\r\n    private recycledViews = new Array<any>()\r\n    private itemViewDirty = new Map<number, boolean>()//每个子View是否需要刷新\r\n    private itemViewHeights = new Array<number>()//每个子View的高度\r\n\r\n    private _data = new Array<any>()\r\n\r\n    private _dirty = false//决定是否需要刷新ListView的外层开关\r\n    private _sizeDirty = false//决定是否要更新ListView的content大小\r\n    private _checkBottom = false\r\n\r\n    private extraData: any = {}\r\n\r\n    protected onLoad() {\r\n        this.scrollView = this.node.getComponent(ScrollView)\r\n        //启用相关控件时才加载prefab，减少内存占用\r\n        //if (this.pullDownToRefreshEnabled) {\r\n            // JmLobbyLoaderMgr.LoadAssetCfg(HoldOnAssetsCfg.HoldOnRefreshHeader).then((header: Prefab) => {\r\n            //     this.header = header\r\n            // })\r\n            // Jm.AssetManager.loadResInBundle(SysDefine.bundleName, HoldOnAssetsCfg.HoldOnRefreshHeader, function (err, header) {\r\n            //     this.header = header\r\n            // })\r\n        //}\r\n        //if (this.pullUpToLoadEnabled && this.refreshFooterShow) {\r\n            // JmLobbyLoaderMgr.LoadAssetCfg(HoldOnAssetsCfg.HoldOnRefreshFooter).then((footer: Prefab) => {\r\n            //     this.footer = footer\r\n            // })\r\n            // let self = this\r\n            // let self1 = this.footer\r\n            // Jm.AssetManager.loadResInBundle(sysDefine.bundleName, AssetsCfg.RefreshFooter, function (err, footer: Prefab) {\r\n            //     self.footer = footer\r\n            // })\r\n        //}\r\n\r\n        if (!this.scrollView.elastic && this.scrollView.bounceDuration > 0 && this.pullDownToRefreshEnabled) {\r\n            //需要启用scrollView的elastic才能过量滑动，引发下拉刷新，\r\n            //且bounceDuration回弹必须设为0秒立即回弹，否则在update中更新的content位置会被回弹动画覆盖\r\n            console.log(\"set elastic true or pullRefresh Events will not work!!\")\r\n        }\r\n        if (this.scrollView.cancelInnerEvents) {\r\n            //cancelInnerEvents设置为true会导致ItemView的cancel提前触发，影响下拉刷新判断\r\n            // JmLobbyLog.Error(\"do not set cancelInnerEvent true, it'll effect Refresh Events!!\")\r\n            this.scrollView.cancelInnerEvents = false\r\n        }\r\n    }\r\n\r\n    protected onEnable() {\r\n        this.scrollView.node.on(Node.EventType.TOUCH_START, this.onTouchStart, this)\r\n        this.scrollView.node.on(Node.EventType.TOUCH_MOVE, this.onTouchMove, this)\r\n        this.scrollView.node.on(Node.EventType.TOUCH_END, this.onTouchEnd, this)\r\n        this.scrollView.node.on(Node.EventType.TOUCH_CANCEL, this.onTouchCancel, this)\r\n    }\r\n\r\n    protected onDisable() {\r\n        this.scrollView.node.off(Node.EventType.TOUCH_START, this.onTouchStart, this)\r\n        this.scrollView.node.off(Node.EventType.TOUCH_MOVE, this.onTouchMove, this)\r\n        this.scrollView.node.off(Node.EventType.TOUCH_END, this.onTouchEnd, this)\r\n        this.scrollView.node.off(Node.EventType.TOUCH_CANCEL, this.onTouchCancel, this)\r\n    }\r\n\r\n    onDestroy() {\r\n        // Util.ReleaseAsset(this.itemPrefab);\r\n    }\r\n\r\n    onTouchStart(event: EventTouch) {\r\n        // JmLobbyLog.console.log(\"onTouchStart\")\r\n        this.isUserTouched = true\r\n        this._touchStartY = event.getLocationY()\r\n        this._touchStartFromTop = Math.floor(this.scrollView.getScrollOffset().y) <= 1//搞点容错率，有的机型的scrollOffset值不是很精确\r\n\r\n        // JmLobbyLog.console.log(`isTop-->${this._touchStartFromTop}, startY-->${this._touchStartY}`)\r\n    }\r\n\r\n    onTouchMove(event: EventTouch) {\r\n        if (!this.pullDownToRefreshEnabled) return\r\n        let offsetY = event.getLocationY() - this._touchStartY\r\n        // JmLobbyLog.console.log(\"getLocationY-->\" + event.getLocationY())\r\n        if (this.isUserTouched) {//如果正在touch，则检测是否在释放时需要刷新\r\n            this.checkPullDownRefresh(offsetY)\r\n            this.headerController && this.headerController.onScrollOffset(offsetY)\r\n        }\r\n    }\r\n\r\n    onTouchEnd() {\r\n        // JmLobbyLog.console.log(\"onTouchEnd\")\r\n        this.startPullDownRefresh()\r\n        this.isUserTouched = false\r\n    }\r\n\r\n    onTouchCancel() {\r\n        // JmLobbyLog.console.log(\"onTouchCancel\")\r\n        this.startPullDownRefresh()\r\n        this.isUserTouched = false\r\n    }\r\n\r\n    getData() {\r\n        return this._data || []\r\n    }\r\n\r\n    setData(data?: any) {\r\n        this._data = data\r\n    }\r\n\r\n    private updateSize() {\r\n        if (this.scrollView.horizontal || !this.scrollView.vertical) {\r\n            console.log(\"scroll orientation must set vertical in ListView!\")\r\n            return\r\n        }\r\n\r\n        // if (this.refreshState == RefreshOrLoadState.REFRESHING) {\r\n        //     height = height + 100\r\n        // }\r\n        let height = this.scrollView.content.getComponent(UITransform).height\r\n        let newHeight = this.getNormalContentHeight()\r\n        this.scrollView.content.getComponent(UITransform).height = newHeight\r\n        if (height > newHeight) {\r\n            this.notifyChange()\r\n        }\r\n    }\r\n\r\n    getNormalContentHeight() {\r\n        let height = this.getContentHeight()// get total content height\r\n        // console.log(\"contentHeight-->\", height, this.getItemCount())\r\n        if (this.pullUpToLoadEnabled && this.refreshFooterShow) {\r\n            height = height + this.footerHeight\r\n        }\r\n        if (height < this.scrollView.node.getComponent(UITransform).height) {\r\n            this.footerHolderHeight = this.scrollView.node.getComponent(UITransform).height - height\r\n            //将View的大小最小设置为整个View的大小，可能是由于底层原因 小于这个值会在没有填满布局时无法触发滑动\r\n            height = this.scrollView.node.getComponent(UITransform).height\r\n        }\r\n        return height\r\n    }\r\n\r\n    /**\r\n     * 设置Item类的子类实现类名\r\n     */\r\n    setComponentName(name: string) {\r\n        this.componentName = name\r\n    }\r\n\r\n    setTopMargin(num: number) {\r\n        this.topMargin = num\r\n    }\r\n\r\n    getContentHeight() {\r\n        return this.getItemPosOffset(this.getItemCount()) + this.topMargin + this.bottomMargin;\r\n    }\r\n\r\n    private getItemPosOffset(index: number) {\r\n        let sum = 0\r\n        for (let i = 0; i < index; i++) {\r\n            sum += this.getItemHeightWithSpacing(i)\r\n        }\r\n        return sum\r\n    }\r\n\r\n    /**\r\n     * 根据index返回item占高\r\n     */\r\n    private getItemHeightWithSpacing(index?: number) {\r\n        if (index != undefined) {\r\n            return (this.itemViewHeights[index] || this.itemHeight) + this.spacing\r\n        }\r\n        return this.itemHeight + this.spacing\r\n    }\r\n\r\n    private getListTopBottomVisiblePos() {\r\n        //scrollY的值是从 最顶部(scrollView.node.getComponent(UITransform).height/2) ~ 最底部(scrollView.content.height - scrollView.node.getComponent(UITransform).height/2)\r\n        let scrollY = this.scrollView.content.position.y\r\n        let halfHeight = this.scrollView.node.getComponent(UITransform).height / 2\r\n        let topVisibleY = scrollY - halfHeight\r\n        let bottomVisibleY = scrollY + halfHeight\r\n        bottomVisibleY += this.headerHeight//下拉刷新时先刷新再回弹，导致底部高度为headerHeight的部分不会被显示出来\r\n        return [topVisibleY, bottomVisibleY]\r\n    }\r\n\r\n    /**\r\n     * 计算当前Item是否可见\r\n     * @param index\r\n     * @private\r\n     */\r\n    private isVisible(index: number) {\r\n        let [topVisibleY, bottomVisibleY] = this.getListTopBottomVisiblePos()\r\n\r\n        let itemTopY = this.getItemPosOffset(index) + this.topMargin\r\n        let itemBottomY = itemTopY + this.getItemHeightWithSpacing(index)\r\n\r\n        //item的底线或顶线可见即为item可见\r\n        return (itemTopY >= topVisibleY && itemTopY <= bottomVisibleY)\r\n            || (itemBottomY >= topVisibleY && itemBottomY <= bottomVisibleY)\r\n            //或者底线和顶线都在屏幕两侧外，即Item高度大于屏幕高度\r\n            || (itemTopY <= topVisibleY && itemBottomY >= bottomVisibleY)\r\n    }\r\n\r\n    protected update(dt: number) {\r\n        if (this.pullDownToRefreshEnabled && this.refreshState == RefreshOrLoadState.REFRESHING) {\r\n            //this.scrollView.content.position.y = this.scrollView.node.getComponent(UITransform).height / 2 - this.headerHeight\r\n            this.scrollView.content.setPosition(this.scrollView.node.getComponent(UITransform).width / 2, this.scrollView.node.getComponent(UITransform).height / 2 - this.headerHeight)\r\n        }\r\n        if (this._dirty) { //标记为dirty时才做刷新处理\r\n            let data = this._data\r\n            for (let i = 0; i < this.getItemCount(); ++i) {\r\n                if (this.isVisible(i)) {//可见则初始化UI\r\n                    if (this.itemViewDirty.get(i)) {\r\n                        let child = this.getItemView(i)\r\n                        if (child == null) {\r\n                            console.log(`JmListView Child Is Null! ${this.componentName}`)\r\n                            return;\r\n                        }\r\n                        let component = child.getComponent(this.componentName)\r\n                        if (component == null) {\r\n                            throw \"ERROR! item view must implements\" + this.componentName + \" component!!\"\r\n                        }\r\n                        component.updateItem(i, data[i], this)\r\n                        //记录updateItem之后的高度便于后面的计算\r\n                        if (this.itemViewHeights[i] == undefined) {\r\n                            this.itemViewHeights[i] = this.itemHeight//component.getItemHeight() || this.itemHeight\r\n                        }\r\n                        let y = -this.getItemPosOffset(i) - this.getItemHeightWithSpacing(i) * (1 - child.getComponent(UITransform).anchorY) - this.topMargin\r\n                        // console.log(\"TestV-----------index-->\" + i, \"yPos--->\" + y, \"height-->\" + this.itemViewHeights)\r\n                        child.setPosition(0, y)\r\n                        this._sizeDirty = true\r\n\r\n                        this.itemViewDirty.set(i, false);\r\n                        // JmLobbyLog.console.log(\"clear item view dirty-->\" + i)\r\n                        if (child.parent == null) {\r\n                            this.scrollView.content.addChild(child)\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            //遍历showingViews, 不可见则回收\r\n            this.showingViews.forEach((child: Node, index: number) => {\r\n                if (!this.isVisible(index) || this._data == null || (this._data.length - 1) < index) {\r\n                    // JmLobbyLog.console.log(\"not visible, index = \" + index + \", child is\" + child)\r\n                    if (child != null) {\r\n                        this.recycleChild(index, child)\r\n                    }\r\n                }\r\n            })\r\n\r\n            this.checkHeaderView()\r\n            this.checkFooterView()\r\n            // JmLobbyLog.console.log(\"total Items:\" + this._data.length)\r\n            this._dirty = false\r\n        }\r\n        if (this._sizeDirty) {\r\n\r\n            let isBottom = false\r\n            if (this._checkBottom) {\r\n                isBottom = this.isBottom()\r\n            }\r\n            this.updateSize()\r\n            if (isBottom) {\r\n                this.scrollView.scrollToOffset(new Vec2(0, this.scrollView.getMaxScrollOffset().y))\r\n                this._dirty = true//scroll之后需要再次刷新，否则有可能不显示部分ItemView\r\n            }\r\n            this._sizeDirty = false\r\n        }\r\n    }\r\n\r\n    //addOrUpdateHeaderView\r\n    private checkHeaderView() {\r\n        if (this.headerController == null) {\r\n            if (this.header != null && this.pullDownToRefreshEnabled) {\r\n                // JmLobbyLog.console.log(\"addHeader\")\r\n                let headerView = instantiate(this.header)\r\n                headerView.setPosition(0, this.headerHeight / 2 - this.topMargin)\r\n                this.scrollView.content.addChild(headerView)\r\n                let component = headerView.getComponent<JmRefreshHeader>(JmRefreshHeader)\r\n                component.setState(this.refreshState)\r\n                this.headerController = component\r\n            }\r\n        }\r\n    }\r\n\r\n    //addOrUpdateFooterView\r\n    private checkFooterView() {\r\n        if (this.footerController == null) {\r\n            if (this.footer != null && this.pullUpToLoadEnabled) {\r\n                // JmLobbyLog.console.log(\"addFooter\")\r\n                let footerView = instantiate(this.footer)\r\n                this.scrollView.content.addChild(footerView)\r\n                let component = footerView.getComponent<JmRefreshFooter>(JmRefreshFooter)\r\n                component.setState(RefreshOrLoadState.NONE)\r\n                this.footerController = component\r\n            }\r\n        }\r\n        if (this.footerController != null) {\r\n            let viewBottomY = -this.getContentHeight() - this.footerHeight / 2\r\n            let contentBottomY = -this.scrollView.content.getComponent(UITransform).height + this.footerHeight / 2 + this.footerOffset\r\n            this.footerController.node.setPosition(0, Math.min(viewBottomY, contentBottomY) + this.bottomMargin)\r\n        }\r\n    }\r\n\r\n    private recycleChild(index: number, child: Node) {\r\n        child.removeFromParent()\r\n        this.showingViews.delete(index)\r\n        this.recycledViews.push(child)\r\n        this.itemViewDirty.set(index, true);\r\n    }\r\n\r\n    private getItemCount() {\r\n        return this._data ? this._data.length : 0\r\n    }\r\n\r\n    private getItemView(index: number) {\r\n        let itemView = this.showingViews.get(index)\r\n        if (itemView != null) {\r\n            // JmLobbyLog.console.log(\"getFromShowingViews-->\" + index)\r\n        } else {\r\n            // JmLobbyLog.console.log(\"mark item view dirty-->\" + index)\r\n            this.itemViewDirty.set(index, true);\r\n        }\r\n        if (itemView == null) {\r\n            itemView = this.recycledViews.pop()\r\n        }\r\n        if (itemView == null) {\r\n            itemView = instantiate(this.itemPrefab)\r\n            this.itemViewDirty.set(index, true);\r\n        }\r\n        this.showingViews.set(index, itemView)\r\n        return itemView\r\n    }\r\n    onScrollEvent(sender: any, event: any) {\r\n        // if (event == ScrollView.EventType.SCROLLING) {\r\n        if (event == 4) {\r\n            if (this.pullUpToLoadEnabled) {\r\n                this.checkPullUpLoad()\r\n            }\r\n            this._dirty = true\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 标记所有的Item需要刷新\r\n     */\r\n    private markChildrenDirty() {\r\n        for (let i = 0; i < this.getItemCount(); i++) {\r\n            this.itemViewDirty.set(i, true);\r\n        }\r\n    }\r\n\r\n    private isBottom() {\r\n        return this.scrollView.getScrollOffset().y >= this.scrollView.getMaxScrollOffset().y\r\n    }\r\n\r\n    /**\r\n     * 刷新所有Item\r\n     * @param checkBottom 是否检查使ListView保持在底部\r\n     *\r\n     * fixme 有个bug：如果刚初始化页面时就调用notifyChange且数据量大于了一页的展示数量，会导致页面无法滑动；目前的处理方式是如果非要调就延迟0.1秒调用，后续有时间再修复下\r\n     */\r\n    notifyChange(checkBottom?: boolean) {\r\n        if (this.getItemCount() == 0) {\r\n            if (this.emptyView) {\r\n                this.emptyView.active = true\r\n                if (sys.getNetworkType() == sys.NetworkType.NONE && this.noNetworkImg) {\r\n                    this.emptyPic.spriteFrame = this.noNetworkImg\r\n                } else if (this.emptyImg) {\r\n                    this.emptyPic.spriteFrame = this.emptyImg\r\n                }\r\n                this.updateLoadingState(RefreshOrLoadState.NONE)\r\n            }\r\n        } else {\r\n            if (this.emptyView) {\r\n                this.emptyView.active = false\r\n            }\r\n            this._sizeDirty = true\r\n            this._checkBottom = checkBottom\r\n            this.markChildrenDirty()\r\n        }\r\n        this._dirty = true\r\n    }\r\n\r\n    /**\r\n     * 刷新单个Item\r\n     */\r\n    notifyItemChange(index: number) {\r\n        this.itemViewDirty.set(index, true);\r\n        this._dirty = true\r\n    }\r\n\r\n    updateHeight(index: number, height: number) {\r\n        this.itemViewHeights[index] = height\r\n        this.notifyChange()\r\n    }\r\n\r\n    /**\r\n     * 设置上拉加载更多数据回调，在回调中加载数据，并在完成后调用{@link JmListView#onLoadComplete()}\r\n     */\r\n    setPullUpToLoadListener(listener: Function) {\r\n        this.onPullUpToLoad = listener\r\n    }\r\n\r\n    /**\r\n     * 设置下拉刷新数据回调，在回调中加载数据，并在完成后调用{@link JmListView#onRefreshComplete()}\r\n     */\r\n    setPullDownToRefreshListener(listener: Function) {\r\n        this.onPullDownToRefresh = listener\r\n    }\r\n\r\n    private checkPullDownRefresh(offsetY: number) {\r\n        if (this.pullDownToRefreshEnabled && this.refreshState != RefreshOrLoadState.REFRESHING && this.loadingState != RefreshOrLoadState.REFRESHING) {\r\n            if (this._touchStartFromTop && offsetY < -this.headerHeight * 1.5) {\r\n                this.updateRefreshState(RefreshOrLoadState.READY_TO_REFRESH)\r\n            } else {\r\n                this.updateRefreshState(RefreshOrLoadState.NONE)\r\n            }\r\n        }\r\n    }\r\n\r\n    private checkPullUpLoad() {\r\n        // JmLobbyLog.console.log(\"checkPullUpLoad\", this.refreshState, this.loadingState)\r\n        if (this.pullUpToLoadEnabled && this.hasMore && this.loadingState != RefreshOrLoadState.REFRESHING && this.refreshState != RefreshOrLoadState.REFRESHING && !this.isUserTouched) {\r\n            let [offset, maxOffset] = [this.scrollView.getScrollOffset().y, this.scrollView.getMaxScrollOffset().y]\r\n            //有的机型offset值不是很准确，这里搞点容错率\r\n            if (Math.ceil(offset) >= Math.floor(maxOffset)) {\r\n                // JmLobbyLog.console.log(\"PullUpToLoad\")\r\n                this.updateLoadingState(RefreshOrLoadState.REFRESHING)\r\n                if (this.onPullUpToLoad) {\r\n                    this.onPullUpToLoad()\r\n                }\r\n\r\n                /**测试：延时刷新完成返回，并添加测试数据*/\r\n                // this.scheduleOnce(() => {\r\n                //     if (this._data.length > 0) {\r\n                //         this._data.push(this._data[0])\r\n                //     }\r\n                //     this.onLoadComplete(true)\r\n                // }, 2)\r\n            } else {\r\n                // JmLobbyLog.console.log(\"offset--->\" + offset, \"maxOffset-->\" + maxOffset)\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 主动调起刷新\r\n     */\r\n    pullDownRefresh() {\r\n        this.scrollView.stopAutoScroll()\r\n        //this.scrollView.content.position.y = this.scrollView.node.getComponent(UITransform).height / 2 - this.headerHeight\r\n        this.scrollView.content.setPosition(this.scrollView.node.getComponent(UITransform).width / 2, this.scrollView.node.getComponent(UITransform).height / 2 - this.headerHeight)\r\n        this._dirty = true\r\n        this.updateRefreshState(RefreshOrLoadState.REFRESHING)\r\n        this.scheduleOnce(() => {//产品说要延迟刷新，让用户可以看到REFRESHING的动画\r\n            if (this.onPullDownToRefresh != null) {\r\n                this.onPullDownToRefresh()\r\n            }\r\n        }, 1.5)\r\n    }\r\n\r\n    private startPullDownRefresh() {\r\n        // JmLobbyLog.console.log(\"startPullDownRefresh\", this.refreshState, this.loadingState)\r\n        if (this.pullDownToRefreshEnabled && this.refreshState == RefreshOrLoadState.READY_TO_REFRESH && this.loadingState != RefreshOrLoadState.REFRESHING) {\r\n            this.updateRefreshState(RefreshOrLoadState.REFRESHING)\r\n            this.scheduleOnce(() => {//产品说要延迟刷新，让用户可以看到REFRESHING的动画\r\n                if (this.onPullDownToRefresh != null) {\r\n                    this.onPullDownToRefresh()\r\n                }\r\n            }, 1.5)\r\n            /**测试：延时刷新完成返回*/\r\n            // this.scheduleOnce(() => {\r\n            //     this.onRefreshComplete()\r\n            // }, 2)\r\n        } else {\r\n            this.headerController && this.headerController.onScrollOffset(0)\r\n        }\r\n    }\r\n\r\n    onRefreshComplete(scrollToTop = true) {\r\n        // JmLobbyLog.console.log(\"refresh done\")\r\n        let hasMore = this.hasMore = this.getItemCount() > 0\r\n        if (hasMore) {\r\n            this.updateLoadingState(RefreshOrLoadState.NONE)\r\n        } else {\r\n            this.updateLoadingState(RefreshOrLoadState.EMPTY)\r\n        }\r\n\r\n        if (scrollToTop) {\r\n            // this.updateRefreshState(RefreshOrLoadState.COMPLETING)\r\n            // this.scrollView.content.stopAllActions()\r\n            // let move = cc.moveTo(0.1, cc.v2(0, this.scrollView.node.getComponent(UITransform).height / 2))\r\n            // let delay = cc.delayTime(0.3)\r\n            // let finish = cc.callFunc(() => {\r\n            //     this.updateRefreshState(RefreshOrLoadState.NONE)\r\n            // })\r\n            // this.headerController && this.headerController.onScrollOffset(0)\r\n            // this.scrollView.content.runAction(cc.sequence(move, delay, finish))\r\n        } else {\r\n            this.updateRefreshState(RefreshOrLoadState.NONE)\r\n        }\r\n\r\n        this.notifyChange()\r\n    }\r\n\r\n    stopPullDownRefresh() {\r\n        this.updateRefreshState(RefreshOrLoadState.COMPLETING)\r\n        //this.scrollView.content.stopAllActions()\r\n        this.headerController && this.headerController.onScrollOffset(0)\r\n        //this.scrollView.content.position.y = this.scrollView.node.getComponent(UITransform).height / 2\r\n        this.scrollView.content.setPosition(this.scrollView.node.getComponent(UITransform).width / 2, this.scrollView.node.getComponent(UITransform).height / 2)\r\n    }\r\n\r\n    onLoadComplete(hasMore: boolean = true) {\r\n        this.hasMore = hasMore\r\n        if (hasMore) {\r\n            this.updateLoadingState(RefreshOrLoadState.NONE)\r\n        } else {\r\n            this.updateLoadingState(RefreshOrLoadState.COMPLETE)\r\n        }\r\n        // JmLobbyLog.console.log(\"loading done\")\r\n        this.notifyChange()\r\n    }\r\n\r\n    private updateRefreshState(state: RefreshOrLoadState) {\r\n        if (this.refreshState != state) {\r\n            // JmLobbyLog.console.log(\"updateRefreshState-->\", this.refreshState, state)\r\n            this.refreshState = state\r\n            this.onRefreshStateChange(state)\r\n        }\r\n    }\r\n\r\n    private onRefreshStateChange(newState: RefreshOrLoadState) {\r\n        // JmLobbyLog.console.log(\"onRefreshStateChange-->\" + this.refreshState)\r\n        this.headerController && this.headerController.setState(newState)\r\n    }\r\n\r\n    private updateLoadingState(state: RefreshOrLoadState) {\r\n        if (this.loadingState != state) {\r\n            this.loadingState = state\r\n            this.onLoadingStateChange(state)\r\n        }\r\n    }\r\n\r\n    private onLoadingStateChange(newState: RefreshOrLoadState) {\r\n        // JmLobbyLog.console.log(\"onLoadingStateChange-->\" + this.loadingState)\r\n        this.footerController && this.footerController.setState(newState)\r\n    }\r\n\r\n    setExtraData(key: string, value: any) {\r\n        this.extraData[key] = value\r\n    }\r\n\r\n    getExtraData(key: string) {\r\n        return this.extraData[key]\r\n    }\r\n\r\n    /**\r\n     * 处理数据更新回调结果\r\n     * @return 返回的数据暂存在对应Component内，需要更新下\r\n     */\r\n    static handleSuccess(result: Array<any>, isLoadMore: boolean, listView: JmListView, hasMore?: boolean, scrollToTop = true) {\r\n        if (!listView.node.isValid) return\r\n        let data = listView.getData()\r\n        let newData: Array<any>\r\n        if (isLoadMore) {\r\n            newData = data.concat(result)\r\n        } else if (Array.isArray(result)) {\r\n            newData = result\r\n        }\r\n        listView.setData(newData)\r\n        if (isLoadMore) {\r\n            listView.onLoadComplete(hasMore == undefined ? result.length > 0 : hasMore)\r\n        } else {\r\n            listView.onRefreshComplete(scrollToTop)\r\n        }\r\n    }\r\n\r\n    static handleFailure(listView: JmListView, loadMore: boolean, scrollToTop = true) {\r\n        if (!listView.node.isValid) return\r\n        if (loadMore) {\r\n            listView.onLoadComplete(true)\r\n        } else {\r\n            listView.onRefreshComplete(scrollToTop)\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport enum Orientation {\r\n    HORIZONTAL,\r\n    VERTICAL\r\n}","import JmListView from \"./JmListView\";\r\nimport JmHorizontalListView from \"./JmHorizontalListView\";\r\nimport { Component, EventTouch, Node, Vec2, _decorator } from \"cc\";\r\nimport BaseView from \"db://app/base/BaseView\";\r\n\r\nconst { ccclass } = _decorator;\r\n\r\n@ccclass\r\nexport default class JmListViewItem extends BaseView {\r\n    protected itemId: number\r\n    protected listView: JmListView | JmHorizontalListView;\r\n    protected performClick = false\r\n    private startPos: Vec2//记录Touch事件开始时的位置\r\n\r\n    protected onLoad() {\r\n        super.onLoad && super.onLoad()\r\n    }\r\n\r\n    protected onEnable() {\r\n        this.node.on(Node.EventType.TOUCH_START, this.onTouchEvent, this)\r\n        this.node.on(Node.EventType.TOUCH_MOVE, this.onTouchEvent, this)\r\n        this.node.on(Node.EventType.TOUCH_END, this.onTouchEvent, this)\r\n    }\r\n\r\n    protected onDisable() {\r\n        this.node.off(Node.EventType.TOUCH_START, this.onTouchEvent, this)\r\n        this.node.off(Node.EventType.TOUCH_MOVE, this.onTouchEvent, this)\r\n        this.node.off(Node.EventType.TOUCH_END, this.onTouchEvent, this)\r\n    }\r\n\r\n    onTouchEvent(event: EventTouch) {\r\n        switch (event.getType()) {\r\n            case Node.EventType.TOUCH_START:\r\n                // JmLobbyLog.Log(\"TOUCH_START\")\r\n                this.performClick = true\r\n                this.startPos = event.getLocation()\r\n                break\r\n            case Node.EventType.TOUCH_MOVE:\r\n                // JmLobbyLog.Log(\"TOUCH_MOVE\")\r\n                let pos = event.getLocation()\r\n                let dstx = Math.abs(this.startPos.x - pos.x)\r\n                let dsty = Math.abs(this.startPos.y - pos.y)\r\n                if (dstx > 5 || dsty > 5) {//有的机型就算没有移动也会直接调用一次TOUCH_MOVE事件，此处将小距离移动忽略不计\r\n                    this.performClick = false\r\n                }\r\n\r\n                // let dst: Vec2 = this.startPos.sub(pos)\r\n                // if (dst.len() > 5) {//有的机型就算没有移动也会直接调用一次TOUCH_MOVE事件，此处将小距离移动忽略不计\r\n                //     this.performClick = false\r\n                // }\r\n                break\r\n            case Node.EventType.TOUCH_END:\r\n                if (this.performClick) {\r\n                    this.onItemClick(event)\r\n                }\r\n                this.performClick = false\r\n                break\r\n        }\r\n    }\r\n\r\n    onItemClick(event?: EventTouch) {\r\n        // JmLobbyLog.Log(\"ItemClicked, itemId-->\" + this.itemId)\r\n    }\r\n\r\n    updateItem(id: number, data: any, listView: JmListView | JmHorizontalListView) {\r\n        this.itemId = id\r\n        this.listView = listView\r\n        //子类实现\r\n    }\r\n\r\n    getItemHeight(): number {\r\n        return undefined\r\n    }\r\n\r\n    getItemWidth(): number {\r\n        return undefined\r\n    }\r\n\r\n}","import { Component, instantiate, isValid, NodePool, Prefab } from \"cc\";\n\nexport class JmNodePool extends NodePool {\n    private _cellPfb: Prefab;\n    get cellPfb() {\n        return this._cellPfb;\n    }\n\n    set cellPfb(value) {\n        this._cellPfb = value;\n    }\n}\n\nexport default class JmNodePoolMgr {\n    private static _nodePoolData: Map<string, JmNodePool> = new Map<string, JmNodePool>();\n\n    static IdentityCellPool: string = \"IDENTITY_CELL_POOL\";\n\n    /**初始化缓存池\n     * */\n    static InitNodePool(poolKey: string, cellPfb: Prefab, poolHandlerComp?: string) {\n        this.DestroyPool(poolKey);\n\n        let pool = new JmNodePool(poolHandlerComp);\n        pool.cellPfb = cellPfb;\n        this._nodePoolData.set(poolKey, pool);\n    }\n\n    static GetCell(poolKey: string) {\n        let pool = this.GetPool(poolKey);\n        if (pool) {\n            let node;\n            if (pool.size()) {\n                node = pool.get();\n            } else {\n                node = instantiate(pool.cellPfb);\n            }\n            node.active = true;\n            return node;\n        }\n    }\n\n    static PutCell(poolKey: string, node: any) {\n        let pool = this.GetPool(poolKey);\n        if (pool) {\n            node.active = false;\n            pool.put(node);\n        }\n    }\n\n    static DestroyPool(poolKey: string) {\n        let pool = this._nodePoolData.get(poolKey);\n        if (pool) {\n            for (let i = 0; i < pool.size(); i++) {\n                let node = pool.get();\n                if (isValid(node, true)) {\n                    node.active = false;\n                    node.destroy();\n                }\n            }\n            pool.clear();\n            this._nodePoolData.delete(poolKey);\n        }\n    }\n\n    static GetPool(poolKey: string) {\n        let pool = this._nodePoolData.get(poolKey);\n        if (pool) {\n            return pool;\n        } else {\n            console.log(`JmNodePoolMgr.GetPool!The pool is null! please instance it! ${poolKey}`);\n        }\n    }\n}\n\n\n","import { RefreshOrLoadState } from \"./RefreshOrLoadState\";\r\nimport { _decorator, Component, Sprite, Label } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass\r\nexport default class JmRefreshFooter extends Component {\r\n\r\n    @property(Label)\r\n    loading: Label = null;\r\n    @property(Sprite)\r\n    emptyImg: Sprite = null;\r\n\r\n    setState(state: RefreshOrLoadState) {\r\n        switch (state) {\r\n            case RefreshOrLoadState.NONE:\r\n            case RefreshOrLoadState.EMPTY:\r\n                this.loading.node.active = false\r\n                this.emptyImg.node.active = false\r\n                break;\r\n            case RefreshOrLoadState.READY_TO_REFRESH:\r\n                break;\r\n            case RefreshOrLoadState.REFRESHING:\r\n                this.loading.node.active = true\r\n                this.loading.string = \"加载数据中\"\r\n                this.emptyImg.node.active = false\r\n                break;\r\n            case RefreshOrLoadState.COMPLETE:\r\n                this.emptyImg.node.active = true\r\n                this.loading.node.active = false\r\n                break\r\n        }\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n}\r\n","import { Component, Skeleton, _decorator } from \"cc\";\r\nimport { RefreshOrLoadState } from \"./RefreshOrLoadState\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass\r\nexport default class JmRefreshHeader extends Component {\r\n    @property(Skeleton)\r\n    refreshSpine: Skeleton = null\r\n\r\n    private _state = RefreshOrLoadState.NONE\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    onScrollOffset(offsetY: number) {\r\n        if (offsetY < -40) {\r\n            offsetY = -40\r\n        }\r\n        this.refreshSpine.node.y = offsetY - 50\r\n    }\r\n\r\n    setState(state: RefreshOrLoadState) {\r\n        this._state = state\r\n        // switch (state) {\r\n        //     case RefreshOrLoadState.NONE:\r\n        //         this.refreshSpine.setAnimation(0, \"refresh_1\", false)\r\n        //         break;\r\n        //     case RefreshOrLoadState.READY_TO_REFRESH:\r\n        //         this.refreshSpine.setAnimation(0, \"refresh_1\", false)\r\n        //         break;\r\n        //     case RefreshOrLoadState.REFRESHING:\r\n        //         this.refreshSpine.setAnimation(0, \"refresh_2\", true)\r\n        //         break;\r\n        // }\r\n    }\r\n\r\n}\r\n","/**\n * 房间数据类\n * */\nimport BaseData from \"./BaseData\";\n\nexport default class JmRoomData extends BaseData {\n    private _roomData: any;\n    constructor() {\n        super();\n        this._roomData = {};\n    }\n\n    initRoomData(roomData: object) {\n        this.updateRoomData(roomData);\n    }\n\n    updateRoomProperty(k: string, v: any) {\n        this._roomData[k] = v;\n    }\n\n    updateRoomData(roomData: any) {\n        if (this._roomData == null) {\n            this._roomData = {};\n        }\n        for (let k in roomData) {\n            this.updateRoomProperty(k, roomData[k]);\n        }\n    }\n\n    getIdentities() {\n        return this._roomData[\"identities\"];\n    }\n    getIdentity() {\n        return this._roomData[\"identity\"];\n    }\n\n    getRoomNum() {\n        return this._roomData[\"roomNum\"];\n    }\n\n    getSeats() {\n        return this._roomData[\"seats\"];\n    }\n}\n\n\n","/**\r\n * 游戏房间数据管理类,管理房间列表信息，所有显示的房间数据都在此显示，不显示的房间信息不在这里\r\n * */\r\nimport JmRoomData from \"../data/JmRoomData\";\r\nexport default class JmRoomDataMgr {\r\n    private static _roomsData: Map<string, JmRoomData> = new Map<string, JmRoomData>();\r\n    private static _roomsKeys: Array<string> = [];\r\n    private static _joinRoomsList: Array<string> = []; //玩家加入的房间的堆栈列表\r\n    private static _offset: number = 0;\r\n    private static _currentRoomData: object;\r\n    private static _currentRoomKey: number;\r\n    private static currentType: number = 0;\r\n    private static _roomCfg: Map<number, number> = new Map<number, number>();\r\n    private static _roomCount: number = 0;\r\n    private static _gameState: number = 2;//0已发牌 1过期不能领身份 2未发牌\r\n    private static _isDay: boolean = true;\r\n    private static _isOwner: boolean = false;\r\n    private static _loadKey: boolean = true;\r\n    /**初始化房间列表信息\r\n     * */\r\n    static OnReceiveServerData(serverData:any) {\r\n        this.InitRoomsData(serverData);\r\n    }\r\n\r\n    static InitRoomsData(data: Array<object>) {\r\n        for (let i = 0, len = data.length; i < len; i++) {\r\n            this.InitRoomData(data[i]);\r\n        }\r\n    }\r\n    \r\n    static InitRoomData(data: any) {\r\n        let roomKey = data[\"recordId\"];\r\n        if (roomKey) {\r\n            let room = this.GetRoom(roomKey);\r\n            room.initRoomData(data);\r\n        }\r\n    }\r\n\r\n    static CreateRoom(roomData: object) {\r\n        this.InitCurrentRoom(roomData);\r\n    }\r\n\r\n    static CleanRooms() {\r\n        this._offset = 0;\r\n        this._roomsData.clear();\r\n        this._roomCfg.clear();\r\n        this._roomsKeys = [];\r\n        this._gameState = 2\r\n    }\r\n\r\n    static CleanRoom(roomKey: string) {\r\n        let room = this._roomsData.get(roomKey);\r\n        if (room) {\r\n            room = null;\r\n            this._roomsData.delete(roomKey);\r\n        }\r\n    }\r\n\r\n    static GetOffSet() {\r\n        return this._offset || 0;\r\n    }\r\n\r\n    static GetRoomByRoomKey(roomKey:any) {\r\n        let room = this._roomsData.get(roomKey);\r\n        if (room) {\r\n            return room;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    static GetRoomNum() {\r\n        let roomData = this.GetRoomByRoomKey(this._currentRoomKey);\r\n        return roomData.getRoomNum();\r\n    }\r\n    \r\n    static GetRoomIdentities() {\r\n        let roomData = this.GetRoomByRoomKey(this._currentRoomKey);\r\n        return roomData.getIdentities();\r\n    }\r\n\r\n    static GetRoomIdentity() {\r\n        let roomData = this.GetRoomByRoomKey(this._currentRoomKey);\r\n        return roomData.getIdentity();\r\n    }\r\n\r\n    static GetRoomSeats() {\r\n        let roomData = this.GetRoomByRoomKey(this._currentRoomKey);\r\n        return roomData.getSeats();\r\n    }\r\n\r\n    static InitCurrentRoomProto(roomData: any) {\r\n        let roomKey = roomData[\"recordId\"]\r\n        this._roomCount = roomData[\"players\"]\r\n        let room = this.GetRoom(roomKey);\r\n        room.initRoomData(roomData);\r\n        this._gameState = roomData[\"status\"]\r\n        this._currentRoomData = roomData;\r\n        this._currentRoomKey = roomKey;\r\n        this._joinRoomsList.unshift(roomData[\"roomNum\"]);\r\n    }\r\n\r\n    //当前用户所在房间的房间信息\r\n    static InitCurrentRoom(roomData: any) {\r\n        console.log(`JmRoomDataMgr.InitCurrentRoom ${JSON.stringify(roomData)}`);\r\n\r\n        let roomKey = roomData[\"recordId\"]\r\n        this._isOwner = roomData[\"judge\"]\r\n        this._roomCount = roomData[\"players\"]\r\n        let room = this.GetRoom(roomKey);\r\n        room.initRoomData(roomData);\r\n        this._gameState = roomData[\"status\"]\r\n        this._currentRoomData = roomData;\r\n        this._currentRoomKey = roomKey;\r\n        this._joinRoomsList.unshift(roomData[\"roomNum\"]);\r\n    }\r\n\r\n    static GetRoom(roomKey: string) {\r\n        let room = this._roomsData.get(roomKey);\r\n        if (!room) {\r\n            room = new JmRoomData();\r\n            this._roomsData.set(roomKey, room);\r\n            this._roomsKeys.push(roomKey);\r\n        }\r\n        return room;\r\n    }\r\n\r\n    static GetCurrentRoomInfo() {\r\n        return this._currentRoomData;\r\n    }\r\n\r\n    static GetCurrentRoomKey() {\r\n        return this._currentRoomKey || 0;\r\n    }\r\n\r\n\r\n    static SetCurrentNullRoomKey() {\r\n        this._currentRoomKey = null;\r\n    }\r\n\r\n    static SetRoomDayOrNight(currentType:number) {\r\n        this.currentType = currentType;\r\n    }\r\n    static GetRoomDayOrNight() {\r\n        return this.currentType;\r\n    }\r\n    static delRoomCfg(key:any) {\r\n        this._roomCfg.delete(key);\r\n    }\r\n    static setRoomCfg(key:any, vule:any) {\r\n        this._roomCfg.set(key, vule);\r\n    }\r\n    static getRoomCfg() {\r\n        return this._roomCfg;\r\n    }\r\n\r\n    static getRoomCount() {\r\n        return this._roomCount\r\n    }\r\n    static setRoomCount(count:number) {\r\n        this._roomCount = count\r\n    }\r\n\r\n    static setGameState(state:number) {\r\n        this._gameState = state\r\n    }\r\n    static getGameState() {\r\n        return this._gameState\r\n    }\r\n\r\n    static setGameDay(bol:boolean) {\r\n        this._isDay = bol\r\n    }\r\n    static getGameDay() {\r\n        return this._isDay;\r\n    }\r\n\r\n    static setOwner(bol:boolean) {\r\n        this._isOwner = bol\r\n    }\r\n    static isOwner() {\r\n        return this._isOwner\r\n    }\r\n    static getLoadKey() {\r\n        return this._loadKey\r\n    }\r\n    static setLoadKey(bol:boolean) {\r\n        this._loadKey = bol\r\n    }\r\n}\r\n\r\n\r\n","import { Asset, AssetManager, Font, ImageAsset, JsonAsset, Label, SceneAsset, Sprite, SpriteFrame, Texture2D, TextureCube, _decorator, assetManager, isValid, path, sp } from 'cc';\r\nimport { MINIGAME } from 'cc/env';\r\nimport BaseManager from '../../base/BaseManager';\r\nimport Core from '../../Core';\r\nconst { ccclass } = _decorator;\r\nconst REGEX = /^https?:\\/\\/.*/;\r\n\r\nclass Command {\r\n    private static cache: Command[] = [];\r\n\r\n    static create(onComplete: (items: unknown) => void, onProgress: (finish: number, total: number, item: AssetManager.RequestItem) => void = null) {\r\n        const command = Command.cache.pop() || new Command();\r\n        onProgress && command.onProgress.push(onProgress);\r\n        onComplete && command.onComplete.push(onComplete);\r\n        return command;\r\n    }\r\n\r\n    static put(command: Command) {\r\n        command.onProgress.length = 0;\r\n        command.onComplete.length = 0;\r\n        Command.cache.push(command);\r\n    }\r\n\r\n    onProgress: Array<(finish: number, total: number, item: AssetManager.RequestItem) => void> = [];\r\n    onComplete: Array<(items: unknown) => void> = [];\r\n\r\n    private constructor() { }\r\n}\r\n\r\nclass Loader {\r\n    private assetMap = new Map<string, Asset>();\r\n    private loadingMap = new Map<string, Command>();\r\n\r\n    /**\r\n     * 预加载\r\n     * @param params.bundle 默认为resources, 可以是项目中的bundle名，也可以是远程bundle的url(url末位作为bundle名)，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E5%8A%A0%E8%BD%BD-asset-bundle\r\n     * @param params.version 远程bundle的版本，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#asset-bundle-%E7%9A%84%E7%89%88%E6%9C%AC\r\n     */\r\n    public preload(params: { path: string, bundle?: string, version?: string, type?: typeof Asset, onProgress?: (finish: number, total: number, item: AssetManager.RequestItem) => void, onComplete?: (item: AssetManager.RequestItem[] | null) => void }) {\r\n        return Core.inst.manager.loader.preload(params);\r\n    }\r\n\r\n    /**\r\n     * 预加载\r\n     * @param params.bundle 默认为resources, 可以是项目中的bundle名，也可以是远程bundle的url(url末位作为bundle名)，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E5%8A%A0%E8%BD%BD-asset-bundle\r\n     * @param params.version 远程bundle的版本，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#asset-bundle-%E7%9A%84%E7%89%88%E6%9C%AC\r\n     */\r\n    public preloadDir(params: { path: string, bundle?: string, version?: string, type?: typeof Asset, onProgress?: (finish: number, total: number, item: AssetManager.RequestItem) => void, onComplete?: (items: AssetManager.RequestItem[] | null) => void }) {\r\n        return Core.inst.manager.loader.preloadDir(params);\r\n    }\r\n\r\n    /**\r\n     * 加载bundle下的资源\r\n     * @param params.bundle 默认为resources, 可以是项目中的bundle名，也可以是远程bundle的url(url末位作为bundel名)，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E5%8A%A0%E8%BD%BD-asset-bundle\r\n     * @param params.version 远程bundle的版本，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#asset-bundle-%E7%9A%84%E7%89%88%E6%9C%AC\r\n     * @param params.path bundle下的相对路径\r\n     * @param params.type 资源类型\r\n     */\r\n    public load<T extends typeof Asset>(params: { path: string, bundle?: string, version?: string, type?: T, onProgress?: (finish: number, total: number, item: AssetManager.RequestItem) => void, onComplete?: (item: InstanceType<T> | null) => void }) {\r\n        const key = `${params.bundle || 'resources'}-${params.type.name}-${params.path}-${params.version || ''}`;\r\n\r\n        if (this.loadingMap.has(key)) {\r\n            const command = this.loadingMap.get(key);\r\n            params.onProgress && command.onProgress.push(params.onProgress);\r\n            params.onComplete && command.onComplete.push(params.onComplete);\r\n            return;\r\n        }\r\n\r\n        // 加载中\r\n        const command = Command.create(params.onComplete, params.onProgress);\r\n        this.loadingMap.set(key, command);\r\n\r\n        // 有缓存\r\n        if (this.assetMap.has(key)) {\r\n            const asset = this.assetMap.get(key);\r\n            // 有缓存的情况下不触发onProgress回调\r\n            setTimeout(() => {\r\n                // 加载无效\r\n                if (!this.loadingMap.has(key)) return;\r\n                this.loadingMap.delete(key);\r\n                command.onComplete.forEach(cb => cb(asset));\r\n                Command.put(command);\r\n            }, 0);\r\n            return;\r\n        }\r\n\r\n        Core.inst.manager.loader.load({\r\n            ...params,\r\n            onProgress: (finish, total, item) => {\r\n                if (!this.loadingMap.has(key)) return;\r\n                command.onProgress.forEach(cb => cb(finish, total, item));\r\n            },\r\n            onComplete: (asset) => {\r\n                // 加载无效\r\n                if (!this.loadingMap.has(key)) {\r\n                    asset.addRef();\r\n                    asset.decRef();\r\n                    return;\r\n                }\r\n                this.loadingMap.delete(key);\r\n                if (asset) {\r\n                    asset.addRef();\r\n                    this.assetMap.set(key, asset);\r\n                }\r\n                command.onComplete.forEach(cb => cb(asset));\r\n                Command.put(command);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 加载bundle下的资源\r\n     * @param params.bundle 默认为resources, 可以是项目中的bundle名，也可以是远程bundle的url(url末位作为bundle名)，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E5%8A%A0%E8%BD%BD-asset-bundle\r\n     * @param params.version 远程bundle的版本，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#asset-bundle-%E7%9A%84%E7%89%88%E6%9C%AC\r\n     * @param params.path bundle下的相对路径\r\n     * @param params.type 资源类型\r\n     */\r\n    public loadAsync<T extends typeof Asset>(params: { path: string, bundle?: string, version?: string, type?: T, onProgress?: (finish: number, total: number, item: AssetManager.RequestItem) => void }): Promise<InstanceType<T> | null> {\r\n        return new Promise((resolve) => {\r\n            this.load({\r\n                ...params,\r\n                onComplete: resolve\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 加载bundle下的资源\r\n     * @param params.bundle 默认为resources, 可以是项目中的bundle名，也可以是远程bundle的url(url末位作为bundel名)，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E5%8A%A0%E8%BD%BD-asset-bundle\r\n     * @param params.version 远程bundle的版本，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#asset-bundle-%E7%9A%84%E7%89%88%E6%9C%AC\r\n     * @param params.path bundle下的相对路径\r\n     * @param params.type 资源类型\r\n     */\r\n    public loadDir<T extends typeof Asset>(params: { path: string, bundle?: string, version?: string, type?: T, onProgress?: (finish: number, total: number, item: AssetManager.RequestItem) => void, onComplete?: (items: InstanceType<T>[] | null) => void }) {\r\n        const key = `${params.bundle || 'resources'}-${params.type.name}-${params.path}-${params.version || ''}:`;\r\n\r\n        if (this.loadingMap.has(key)) {\r\n            const command = this.loadingMap.get(key);\r\n            params.onProgress && command.onProgress.push(params.onProgress);\r\n            params.onComplete && command.onComplete.push(params.onComplete);\r\n            return;\r\n        }\r\n\r\n        // 加载中\r\n        const command = Command.create(params.onComplete, params.onProgress);\r\n        this.loadingMap.set(key, command);\r\n\r\n        const results = [] as InstanceType<T>[];\r\n        this.assetMap.forEach((asset, path) => {\r\n            if (path.indexOf(key) === 0) {\r\n                results.push(asset as InstanceType<T>);\r\n            }\r\n        });\r\n\r\n        // 有缓存\r\n        if (results.length) {\r\n            // 有缓存的情况下不触发onProgress回调\r\n            setTimeout(() => {\r\n                // 加载无效\r\n                if (!this.loadingMap.has(key)) return;\r\n                this.loadingMap.delete(key);\r\n                command.onComplete.forEach(cb => cb(results));\r\n                Command.put(command);\r\n            }, 0);\r\n            return;\r\n        }\r\n\r\n        Core.inst.manager.loader.loadDir({\r\n            ...params,\r\n            onProgress: (finish, total, item) => {\r\n                if (!this.loadingMap.has(key)) return;\r\n                command.onProgress.forEach(cb => cb(finish, total, item));\r\n            },\r\n            onComplete: (assets) => {\r\n                // 加载无效\r\n                if (!this.loadingMap.has(key)) {\r\n                    assets?.forEach((asset) => {\r\n                        asset.addRef();\r\n                        asset.decRef();\r\n                    });\r\n                    return;\r\n                }\r\n                this.loadingMap.delete(key);\r\n                assets?.forEach((asset) => {\r\n                    asset.addRef();\r\n                    this.assetMap.set(key + asset.uuid, asset);\r\n                });\r\n                command.onComplete.forEach(cb => cb(results));\r\n                Command.put(command);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 加载bundle下的资源\r\n     * @param params.bundle 默认为resources, 可以是项目中的bundle名，也可以是远程bundle的url(url末位作为bundle名)，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E5%8A%A0%E8%BD%BD-asset-bundle\r\n     * @param params.version 远程bundle的版本，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#asset-bundle-%E7%9A%84%E7%89%88%E6%9C%AC\r\n     * @param params.path bundle下的相对路径\r\n     * @param params.type 资源类型\r\n     */\r\n    public loadDirAsync<T extends typeof Asset>(params: { path: string, bundle?: string, version?: string, type?: T, onProgress?: (finish: number, total: number, item: AssetManager.RequestItem) => void }): Promise<InstanceType<T>[] | null> {\r\n        return new Promise((resolve) => {\r\n            this.loadDir({\r\n                ...params,\r\n                onComplete: resolve\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 加载远程资源\r\n     * @example\r\n     * loadRemote({url:'', ext:'.png', onComplete:(result){ }})\r\n     */\r\n    public loadRemote({ url, ext, onComplete }: { url: string, ext?: string, onComplete?: (result: Asset | null) => void }) {\r\n        if (this.loadingMap.has(url)) {\r\n            const command = this.loadingMap.get(url);\r\n            onComplete && command.onComplete.push(onComplete);\r\n            return;\r\n        }\r\n\r\n        // 加载中\r\n        const command = Command.create(onComplete);\r\n        this.loadingMap.set(url, command);\r\n\r\n        // 有缓存\r\n        if (this.assetMap.has(url)) {\r\n            const asset = this.assetMap.get(url);\r\n            // 有缓存的情况下不触发onProgress回调\r\n            setTimeout(() => {\r\n                // 加载无效\r\n                if (!this.loadingMap.has(url)) return;\r\n                this.loadingMap.delete(url);\r\n                command.onComplete.forEach(cb => cb(asset));\r\n                Command.put(command);\r\n            }, 0);\r\n            return;\r\n        }\r\n\r\n        Core.inst.manager.loader.loadRemote({\r\n            url, ext,\r\n            onComplete: (asset) => {\r\n                // 加载无效\r\n                if (!this.loadingMap.has(url)) {\r\n                    asset.addRef();\r\n                    asset.decRef();\r\n                    return;\r\n                }\r\n                this.loadingMap.delete(url);\r\n                if (asset) {\r\n                    asset.addRef();\r\n                    this.assetMap.set(url, asset);\r\n                }\r\n                command.onComplete.forEach(cb => cb(asset));\r\n                Command.put(command);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 加载远程资源\r\n     * @example\r\n     * await loadRemoteAsync({url:'', ext:'.png'})\r\n     */\r\n    public loadRemoteAsync(params: { url: string, ext?: string }): Promise<Asset | null> {\r\n        return new Promise((resolve) => {\r\n            this.loadRemote({\r\n                ...params,\r\n                onComplete: resolve\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 设置字体资源\r\n     * @param params.bundle 默认为resources\r\n     * @param params.path bundle下的相对路径\r\n     * \r\n     * @example\r\n     * setFont({target:label, path:'font/num', bundle:'resources', onComplete:(succ)=>{}})\r\n     * setFont({target:label, url:'http://img/a/font',ext:'.ttf', onComplete:(succ)=>{}})\r\n     */\r\n    public setFont(params: { target: Label, url: string, ext?: string, onComplete?: (success: boolean) => any, onSuccess?: () => void, onFail?: () => void }): void;\r\n    public setFont(params: { target: Label, path: string, bundle?: string, onComplete?: (success: boolean) => any, onSuccess?: () => void, onFail?: () => void }): void;\r\n    public setFont(params: { target: Label, path?: string, bundle?: string, url?: string, ext?: string, onComplete?: (success: boolean) => any, onSuccess?: () => void, onFail?: () => void }) {\r\n        if (params.url) {\r\n            this.loadRemote({\r\n                url: params.url,\r\n                ext: params.ext,\r\n                onComplete: (font: Font) => {\r\n                    if (!font || !isValid(params.target)) {\r\n                        params.onFail && params.onFail();\r\n                        params.onComplete && params.onComplete(false);\r\n                        return;\r\n                    }\r\n                    params.target.font = font;\r\n                    params.onSuccess && params.onSuccess();\r\n                    params.onComplete && params.onComplete(true);\r\n                }\r\n            });\r\n        } else {\r\n            this.load({\r\n                path: params.path,\r\n                bundle: params.bundle,\r\n                type: Font,\r\n                onComplete: (font) => {\r\n                    if (!font || !isValid(params.target)) {\r\n                        params.onFail && params.onFail();\r\n                        params.onComplete && params.onComplete(false);\r\n                        return;\r\n                    }\r\n                    params.target.font = font;\r\n                    params.onSuccess && params.onSuccess();\r\n                    params.onComplete && params.onComplete(true);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 设置Spine资源\r\n     * @param params.bundle 默认为resources\r\n     * @param params.path bundle下的相对路径\r\n     * \r\n     * @example\r\n     * setSpine({target:spine, path:'spine/role', bundle:'resources', onComplete:(succ)=>{}})\r\n     */\r\n    public setSpine(params: { target: sp.Skeleton, path: string, bundle?: string, onComplete?: (success: boolean) => any, onSuccess?: () => void, onFail?: () => void }) {\r\n        this.load({\r\n            path: params.path,\r\n            bundle: params.bundle,\r\n            type: sp.SkeletonData,\r\n            onComplete: (skeletonData) => {\r\n                if (!skeletonData || !isValid(params.target)) {\r\n                    params.onFail && params.onFail();\r\n                    params.onComplete && params.onComplete(false);\r\n                    return;\r\n                }\r\n                params.target.skeletonData = skeletonData;\r\n                params.onSuccess && params.onSuccess();\r\n                params.onComplete && params.onComplete(true);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 设置图片资源\r\n     * @param params.bundle 默认为resources\r\n     * @param params.path bundle下的相对路径\r\n     * \r\n     * @example\r\n     * setSprite({target:sprite, path:'img/a/spriteFrame', bundle:'resources', onComplete:(succ)=>{}})\r\n     * setSprite({target:sprite, url:'http://img/a/avatar',ext:'.png', onComplete:(succ)=>{}})\r\n     */\r\n    public setSprite(params: { target: Sprite, url: string, ext?: string, onComplete?: (success: boolean) => any, onSuccess?: () => void, onFail?: () => void }): void;\r\n    public setSprite(params: { target: Sprite, path: string, bundle?: string, onComplete?: (success: boolean) => any, onSuccess?: () => void, onFail?: () => void }): void;\r\n    public setSprite(params: { target: Sprite, path?: string, bundle?: string, url?: string, ext?: string, onComplete?: (success: boolean) => any, onSuccess?: () => void, onFail?: () => void }) {\r\n        if (params.url) {\r\n            this.loadRemote({\r\n                url: params.url,\r\n                ext: params.ext,\r\n                onComplete: (imageAsset: ImageAsset) => {\r\n                    if (!imageAsset || !isValid(params.target)) {\r\n                        params.onFail && params.onFail();\r\n                        params.onComplete && params.onComplete(false);\r\n                        return;\r\n                    }\r\n                    const spriteFrame = SpriteFrame.createWithImage(imageAsset);\r\n                    params.target.spriteFrame = spriteFrame;\r\n                    params.onSuccess && params.onSuccess();\r\n                    params.onComplete && params.onComplete(true);\r\n                }\r\n            });\r\n        } else {\r\n            this.load({\r\n                path: params.path,\r\n                bundle: params.bundle,\r\n                type: SpriteFrame,\r\n                onComplete: (spriteFrame) => {\r\n                    if (!spriteFrame || !isValid(params.target)) {\r\n                        params.onFail && params.onFail();\r\n                        params.onComplete && params.onComplete(false);\r\n                        return;\r\n                    }\r\n                    params.target.spriteFrame = spriteFrame;\r\n                    params.onSuccess && params.onSuccess();\r\n                    params.onComplete && params.onComplete(true);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 释放所有资源\r\n     */\r\n    public releaseAll() {\r\n        const assetList: Asset[] = [];\r\n        this.assetMap.forEach(asset => assetList.push(asset));\r\n        this.assetMap.clear();\r\n        this.loadingMap.clear();\r\n        // 延迟一秒释放资源\r\n        setTimeout(() => {\r\n            assetList.forEach(asset => asset.decRef());\r\n        }, 1000);\r\n    }\r\n}\r\n\r\n@ccclass('LoaderManager')\r\nexport default class LoaderManager extends BaseManager {\r\n    /**\r\n     * `Loader`是基于`LoaderManager`的封装，不同的是，`Loader`是基于单个`Loader实例`对资源进行`自动引用计数`管理。（LoaderManager本质是对cc.assetManager的封装，提供了更方便的接口，都是基于Asset Bundle管理资源，并且资源的引用计数需要开发者手动管理）\r\n     * @example\r\n     * // 创建Loader实例\r\n     * const loader = new LoaderManager.Loader();\r\n     * // 加载资源\r\n     * loader.load({path:'img/a/spriteFrame', bundle:'resources', type:SpriteFrame, onComplete:(spriteFrame)=>{}})\r\n     * // 加载远程图片资源\r\n     * loader.loadRemote({url:'http://img/a/avatar',ext:'.png', onComplete:(imageAsset)=>{}})\r\n     * // 释放所有资源\r\n     * loader.releaseAll();\r\n     */\r\n    static Loader = Loader;\r\n\r\n    private handle(handle: string, { bundle, version, path, type, onProgress, onComplete }: { bundle?: string, version?: string, path: string, type?: typeof Asset, onProgress?: (finish: number, total: number, item: AssetManager.RequestItem) => void, onComplete?: (result: unknown | null) => void }) {\r\n        if (!handle) {\r\n            this.error('handle is empty');\r\n            return onComplete && onComplete(null);\r\n        }\r\n        if (!path) {\r\n            this.error(`${handle} fail. path is empty`);\r\n            return onComplete && onComplete(null);\r\n        }\r\n        if (!bundle) bundle = 'resources';\r\n\r\n        const args: any[] = [path];\r\n        if (type) args.push(type);\r\n        if (onProgress) args.push(onProgress);\r\n        args.push((err: string, res: any) => {\r\n            if (err) {\r\n                this.error(`${handle} \"${path}\" fail`, err);\r\n                if (type === SpriteFrame && path.slice(-12) !== '/spriteFrame') {\r\n                    this.warn(`加载SpriteFrame类型的资源, 路径可能需要以/spriteFrame结尾, 如: 「${path}」 -> 「${path}/spriteFrame」`);\r\n                } else if (type === Texture2D && path.slice(-8) !== '/texture') {\r\n                    this.warn(`加载Texture2D类型的资源, 路径可能需要以/texture结尾, 如: 「${path}」 -> 「${path}/texture」`);\r\n                } else if (type === TextureCube && path.slice(-12) !== '/textureCube') {\r\n                    this.warn(`加载TextureCube类型的资源, 路径可能需要以/textureCube结尾, 如: 「${path}」 -> 「${path}/textureCube」`);\r\n                }\r\n                onComplete && onComplete(null);\r\n            } else {\r\n                onComplete && onComplete(res);\r\n            }\r\n        });\r\n\r\n        this.loadBundle({\r\n            bundle, version,\r\n            onComplete(bundle) {\r\n                if (!bundle) return onComplete && onComplete(null);\r\n                bundle[handle](args[0], args[1], args[2], args[3]);\r\n            },\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 预加载\r\n     * @param params.bundle 默认为resources, 可以是项目中的bundle名，也可以是远程bundle的url(url末位作为bundle名)，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E5%8A%A0%E8%BD%BD-asset-bundle\r\n     * @param params.version 远程bundle的版本，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#asset-bundle-%E7%9A%84%E7%89%88%E6%9C%AC\r\n     */\r\n    public preload(params: { path: string, bundle?: string, version?: string, type?: typeof Asset, onProgress?: (finish: number, total: number, item: AssetManager.RequestItem) => void, onComplete?: (item: AssetManager.RequestItem[] | null) => void }) {\r\n        if (SceneAsset === params.type as typeof Asset) {\r\n            this.handle('preloadScene', { path: params.path, bundle: params.bundle, version: params.version, onProgress: params.onProgress, onComplete: params.onComplete });\r\n        } else {\r\n            this.handle('preload', params);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 预加载\r\n     * @param params.bundle 默认为resources, 可以是项目中的bundle名，也可以是远程bundle的url(url末位作为bundle名)，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E5%8A%A0%E8%BD%BD-asset-bundle\r\n     * @param params.version 远程bundle的版本，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#asset-bundle-%E7%9A%84%E7%89%88%E6%9C%AC\r\n     */\r\n    public preloadDir(params: { path: string, bundle?: string, version?: string, type?: typeof Asset, onProgress?: (finish: number, total: number, item: AssetManager.RequestItem) => void, onComplete?: (items: AssetManager.RequestItem[] | null) => void }) {\r\n        this.handle('preloadDir', params);\r\n    }\r\n\r\n    /**\r\n     * 加载bundle下的资源\r\n     * @param params.bundle 默认为resources, 可以是项目中的bundle名，也可以是远程bundle的url(url末位作为bundle名)，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E5%8A%A0%E8%BD%BD-asset-bundle\r\n     * @param params.version 远程bundle的版本，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#asset-bundle-%E7%9A%84%E7%89%88%E6%9C%AC\r\n     * @param params.path bundle下的相对路径\r\n     * @param params.type 资源类型\r\n     */\r\n    public load<T extends typeof Asset>(params: { path: string, bundle?: string, version?: string, type?: T, onProgress?: (finish: number, total: number, item: AssetManager.RequestItem) => void, onComplete?: (item: InstanceType<T> | null) => void }) {\r\n        if (SceneAsset === params.type as typeof Asset) {\r\n            this.handle('loadScene', { path: params.path, bundle: params.bundle, version: params.version, onProgress: params.onProgress, onComplete: params.onComplete });\r\n        } else {\r\n            this.handle('load', params);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 加载bundle下的资源\r\n     * @param params.bundle 默认为resources, 可以是项目中的bundle名，也可以是远程bundle的url(url末位作为bundle名)，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E5%8A%A0%E8%BD%BD-asset-bundle\r\n     * @param params.version 远程bundle的版本，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#asset-bundle-%E7%9A%84%E7%89%88%E6%9C%AC\r\n     * @param params.path bundle下的相对路径\r\n     * @param params.type 资源类型\r\n     */\r\n    public loadAsync<T extends typeof Asset>(params: { path: string, bundle?: string, version?: string, type?: T, onProgress?: (finish: number, total: number, item: AssetManager.RequestItem) => void }): Promise<InstanceType<T> | null> {\r\n        return new Promise((resolve) => {\r\n            this.load({\r\n                ...params,\r\n                onComplete: resolve\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 加载bundle下的资源\r\n     * @param params.bundle 默认为resources, 可以是项目中的bundle名，也可以是远程bundle的url(url末位作为bundle名)，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E5%8A%A0%E8%BD%BD-asset-bundle\r\n     * @param params.version 远程bundle的版本，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#asset-bundle-%E7%9A%84%E7%89%88%E6%9C%AC\r\n     * @param params.path bundle下的相对路径\r\n     * @param params.type 资源类型\r\n     */\r\n    public loadDir<T extends typeof Asset>(params: { path: string, bundle?: string, version?: string, type?: T, onProgress?: (finish: number, total: number, item: AssetManager.RequestItem) => void, onComplete?: (items: InstanceType<T>[] | null) => void }) {\r\n        this.handle('loadDir', params);\r\n    }\r\n\r\n    /**\r\n     * 加载bundle下的资源\r\n     * @param params.bundle 默认为resources, 可以是项目中的bundle名，也可以是远程bundle的url(url末位作为bundle名)，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E5%8A%A0%E8%BD%BD-asset-bundle\r\n     * @param params.version 远程bundle的版本，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#asset-bundle-%E7%9A%84%E7%89%88%E6%9C%AC\r\n     * @param params.path bundle下的相对路径\r\n     * @param params.type 资源类型\r\n     */\r\n    public loadDirAsync<T extends typeof Asset>(params: { path: string, bundle?: string, version?: string, type?: T, onProgress?: (finish: number, total: number, item: AssetManager.RequestItem) => void }): Promise<InstanceType<T>[] | null> {\r\n        return new Promise((resolve) => {\r\n            this.loadDir({\r\n                ...params,\r\n                onComplete: resolve\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 销毁一个bundle中对应path和type的资源\r\n     * @param params.bundle 默认为resources，如果是远程bundle，则使用url末位作为bundle名\r\n     * @param params.path bundle下的相对路径\r\n     * @param params.type 资源类型\r\n     */\r\n    public release({ path, bundle, type }: { path: string, bundle?: string, type?: typeof Asset }) {\r\n        if (!bundle) bundle = 'resources';\r\n        assetManager.getBundle(bundle)?.release(path, type);\r\n    }\r\n\r\n    /**\r\n     * 销毁一个bundle中所有的资源\r\n     * @param bundle 默认为resources，如果是远程bundle，则使用url末位作为bundle名\r\n     */\r\n    public releaseAll(bundle?: string) {\r\n        if (!bundle) bundle = 'resources';\r\n        const _bundle = assetManager.getBundle(bundle);\r\n        if (!_bundle) return;\r\n        // 只释放自己内部的资源，依赖的资源只减少引用计数\r\n        _bundle.getDirWithPath('/', Asset).forEach((asset) => {\r\n            _bundle.release(asset.path, asset.ctor);\r\n        });\r\n        // cocos提供的方法会将依赖的资源也卸载(这个设计很奇怪)\r\n        // _bundle?.releaseAll();\r\n    }\r\n\r\n    /**\r\n     * 销毁一个bundle中未使用的资源\r\n     * @param bundle 默认为resources，如果是远程bundle，则使用url末位作为bundle名\r\n     */\r\n    public releaseUnused(bundle?: string) {\r\n        if (!bundle) bundle = 'resources';\r\n        //@ts-ignore\r\n        assetManager.getBundle(bundle)?.releaseUnusedAssets();\r\n    }\r\n\r\n    /**\r\n     * 加载一个bundle\r\n     * @param params.bundle 默认为resources, 可以是项目中的bundle名，也可以是远程bundle的url(url末位作为bundle名)，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E5%8A%A0%E8%BD%BD-asset-bundle\r\n     * @param params.version 远程bundle的版本，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#asset-bundle-%E7%9A%84%E7%89%88%E6%9C%AC\r\n     */\r\n    public loadBundle({ bundle, version, onComplete }: { bundle?: string, version?: string, onComplete?: (bundle: AssetManager.Bundle | null) => any }) {\r\n        if (!bundle) bundle = 'resources';\r\n\r\n        if (MINIGAME) {\r\n            if (REGEX.test(bundle)) {\r\n                this.warn('小游戏环境下只支持加载远程Bundle的资源数据, 不会加载脚本');\r\n                this.reloadBundle({ bundle, version, onComplete });\r\n                return;\r\n            }\r\n            if (version && assetManager.downloader.bundleVers[bundle] !== version) {\r\n                this.warn('小游戏环境下只支持更新Bundle的远程资源数据, 不会更新脚本');\r\n                // 先加载本地bundle运行脚本\r\n                assetManager.loadBundle(bundle, (err: Error, b: AssetManager.Bundle) => {\r\n                    if (err || !b) return onComplete?.(null);\r\n                    // 然后再走重载逻辑更新资源\r\n                    this.reloadBundle({ bundle, version, onComplete });\r\n                });\r\n            } else {\r\n                assetManager.loadBundle(bundle, (err: Error, bundle: AssetManager.Bundle) => {\r\n                    onComplete && onComplete(err ? null : bundle);\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (version) {\r\n            assetManager.loadBundle(bundle, { version }, (err: Error, bundle: AssetManager.Bundle) => {\r\n                onComplete && onComplete(err ? null : bundle);\r\n            });\r\n        } else {\r\n            assetManager.loadBundle(bundle, (err: Error, bundle: AssetManager.Bundle) => {\r\n                onComplete && onComplete(err ? null : bundle);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 加载一个bundle\r\n     * @param params.bundle 默认为resources, 可以是项目中的bundle名，也可以是远程bundle的url(url末位作为bundle名)，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E5%8A%A0%E8%BD%BD-asset-bundle\r\n     * @param params.version 远程bundle的版本，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#asset-bundle-%E7%9A%84%E7%89%88%E6%9C%AC\r\n     */\r\n    public loadBundleAsync(params: { bundle?: string, version?: string }): Promise<AssetManager.Bundle | null> {\r\n        return new Promise((resolve) => {\r\n            this.loadBundle({\r\n                ...params,\r\n                onComplete: resolve\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 获取一个已经加载的bundle\r\n     * @param bundle 默认为resources，如果是远程bundle，则使用url末位作为bundle名\r\n     */\r\n    public getBundle(bundle?: string) {\r\n        if (!bundle) bundle = 'resources';\r\n        return assetManager.getBundle(bundle);\r\n    }\r\n\r\n    /**\r\n     * 移除一个已经加载的bundle\r\n     * @param bundle 默认为resources，如果是远程bundle，则使用url末位作为bundle名\r\n     */\r\n    public removeBundle(bundle?: string) {\r\n        if (!bundle) bundle = 'resources';\r\n        const b = assetManager.getBundle(bundle);\r\n        if (b) assetManager.removeBundle(b);\r\n    }\r\n\r\n    /**\r\n     * 重载一个bundle(只重载资源列表)\r\n     * - 只有远程bundle支持重载\r\n     * @param params.bundle 默认为resources, 可以是项目中的bundle名，也可以是远程bundle的url(url末位作为bundle名)，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E5%8A%A0%E8%BD%BD-asset-bundle\r\n     * @param params.version 远程bundle的版本，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#asset-bundle-%E7%9A%84%E7%89%88%E6%9C%AC\r\n     */\r\n    public reloadBundle({ bundle, version, onComplete }: { bundle?: string, version?: string, onComplete?: (bundle: AssetManager.Bundle | null) => any }) {\r\n        if (!bundle) bundle = 'resources';\r\n\r\n        let baseUrl = '';\r\n        let configUrl = '';\r\n\r\n        if (REGEX.test(bundle)) {\r\n            baseUrl = bundle;\r\n            const suffix = version ? `${version}.` : '';\r\n            configUrl = `${baseUrl}config.${suffix}json`;\r\n        }\r\n        else {\r\n            baseUrl = `${assetManager.downloader.remoteServerAddress}remote/${bundle}/`;\r\n            const suffix = version ? `${version}.` : '';\r\n            configUrl = `${baseUrl}config.${suffix}json`;\r\n        }\r\n\r\n        // 清除可能存在的config缓存\r\n        assetManager.cacheManager?.removeCache(configUrl);\r\n        assetManager.loadRemote(configUrl, (err: Error, data: JsonAsset) => {\r\n            if (err) {\r\n                this.error(`下载Bundle配置失败: ${configUrl}`);\r\n                onComplete?.(null);\r\n                return;\r\n            }\r\n\r\n            this.releaseAll(path.basename(bundle));\r\n            this.removeBundle(path.basename(bundle));\r\n\r\n            const ab = new AssetManager.Bundle();\r\n            const config = data.json as any;\r\n            config.base = baseUrl;\r\n            ab.init(config);\r\n            onComplete?.(ab);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 重载一个bundle(只重载资源列表)\r\n     * - 只有远程bundle支持重载\r\n     * @param params.bundle 默认为resources, 可以是项目中的bundle名，也可以是远程bundle的url(url末位作为bundle名)，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#%E5%8A%A0%E8%BD%BD-asset-bundle\r\n     * @param params.version 远程bundle的版本，参考https://docs.cocos.com/creator/manual/zh/asset/bundle.html#asset-bundle-%E7%9A%84%E7%89%88%E6%9C%AC\r\n     */\r\n    public reloadBundleAsync(params: { bundle?: string, version?: string }): Promise<AssetManager.Bundle | null> {\r\n        return new Promise((resolve) => {\r\n            this.reloadBundle({\r\n                ...params,\r\n                onComplete: resolve\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 加载远程资源\r\n     * @example\r\n     * loadRemote({url:'', ext:'.png', onComplete:(result){ }})\r\n     */\r\n    public loadRemote({ url, ext, onComplete }: { url: string, ext?: string, onComplete?: (result: Asset | null) => void }) {\r\n        if (ext) {\r\n            assetManager.loadRemote(url, { ext }, (error, res) => {\r\n                if (error) {\r\n                    this.error(`loadRemote ${url} fail`);\r\n                    return onComplete && onComplete(null);\r\n                }\r\n                onComplete && onComplete(res);\r\n            });\r\n        } else {\r\n            assetManager.loadRemote(url, (error, res) => {\r\n                if (error) {\r\n                    this.error(`loadRemote ${url} fail`);\r\n                    return onComplete && onComplete(null);\r\n                }\r\n                onComplete && onComplete(res);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 加载远程资源\r\n     * @example\r\n     * await loadRemoteAsync({url:'', ext:'.png'})\r\n     */\r\n    public loadRemoteAsync(params: { url: string, ext?: string }): Promise<Asset | null> {\r\n        return new Promise((resolve) => {\r\n            this.loadRemote({\r\n                ...params,\r\n                onComplete: resolve\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 设置字体资源\r\n     * @param params.bundle 默认为resources\r\n     * @param params.path bundle下的相对路径\r\n     * \r\n     * @example\r\n     * setFont({target:label, path:'font/num', bundle:'resources', onComplete:(succ)=>{}})\r\n     * setFont({target:label, url:'http://img/a/font',ext:'.ttf', onComplete:(succ)=>{}})\r\n     */\r\n    public setFont(params: { target: Label, url: string, ext?: string, onComplete?: (success: boolean) => any, onSuccess?: () => void, onFail?: () => void }): void;\r\n    public setFont(params: { target: Label, path: string, bundle?: string, onComplete?: (success: boolean) => any, onSuccess?: () => void, onFail?: () => void }): void;\r\n    public setFont(params: { target: Label, path?: string, bundle?: string, url?: string, ext?: string, onComplete?: (success: boolean) => any, onSuccess?: () => void, onFail?: () => void }) {\r\n        if (params.url) {\r\n            this.loadRemote({\r\n                url: params.url,\r\n                ext: params.ext,\r\n                onComplete: (font: Font) => {\r\n                    if (!font || !isValid(params.target)) {\r\n                        params.onFail && params.onFail();\r\n                        params.onComplete && params.onComplete(false);\r\n                        return;\r\n                    }\r\n                    params.target.font = font;\r\n                    params.onSuccess && params.onSuccess();\r\n                    params.onComplete && params.onComplete(true);\r\n                }\r\n            });\r\n        } else {\r\n            this.load({\r\n                path: params.path,\r\n                bundle: params.bundle,\r\n                type: Font,\r\n                onComplete: (font) => {\r\n                    if (!font || !isValid(params.target)) {\r\n                        params.onFail && params.onFail();\r\n                        params.onComplete && params.onComplete(false);\r\n                        return;\r\n                    }\r\n                    params.target.font = font;\r\n                    params.onSuccess && params.onSuccess();\r\n                    params.onComplete && params.onComplete(true);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 设置Spine资源\r\n     * @param params.bundle 默认为resources\r\n     * @param params.path bundle下的相对路径\r\n     * \r\n     * @example\r\n     * setSpine({target:spine, path:'spine/role', bundle:'resources', onComplete:(succ)=>{}})\r\n     */\r\n    public setSpine(params: { target: sp.Skeleton, path: string, bundle?: string, onComplete?: (success: boolean) => any, onSuccess?: () => void, onFail?: () => void }) {\r\n        this.load({\r\n            path: params.path,\r\n            bundle: params.bundle,\r\n            type: sp.SkeletonData,\r\n            onComplete: (skeletonData) => {\r\n                if (!skeletonData || !isValid(params.target)) {\r\n                    params.onFail && params.onFail();\r\n                    params.onComplete && params.onComplete(false);\r\n                    return;\r\n                }\r\n                params.target.skeletonData = skeletonData;\r\n                params.onSuccess && params.onSuccess();\r\n                params.onComplete && params.onComplete(true);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 设置图片资源\r\n     * @param params.bundle 默认为resources\r\n     * @param params.path bundle下的相对路径\r\n     * \r\n     * @example\r\n     * setSprite({target:sprite, path:'img/a/spriteFrame', bundle:'resources', onComplete:(succ)=>{}})\r\n     * setSprite({target:sprite, url:'http://img/a/avatar',ext:'.png', onComplete:(succ)=>{}})\r\n     */\r\n    public setSprite(params: { target: Sprite, url: string, ext?: string, onComplete?: (success: boolean) => any, onSuccess?: () => void, onFail?: () => void }): void;\r\n    public setSprite(params: { target: Sprite, path: string, bundle?: string, onComplete?: (success: boolean) => any, onSuccess?: () => void, onFail?: () => void }): void;\r\n    public setSprite(params: { target: Sprite, path?: string, bundle?: string, url?: string, ext?: string, onComplete?: (success: boolean) => any, onSuccess?: () => void, onFail?: () => void }) {\r\n        if (params.url) {\r\n            this.loadRemote({\r\n                url: params.url,\r\n                ext: params.ext,\r\n                onComplete: (imageAsset: ImageAsset) => {\r\n                    if (!imageAsset || !isValid(params.target)) {\r\n                        params.onFail && params.onFail();\r\n                        params.onComplete && params.onComplete(false);\r\n                        return;\r\n                    }\r\n                    const spriteFrame = SpriteFrame.createWithImage(imageAsset);\r\n                    params.target.spriteFrame = spriteFrame;\r\n                    params.onSuccess && params.onSuccess();\r\n                    params.onComplete && params.onComplete(true);\r\n                }\r\n            });\r\n        } else {\r\n            this.load({\r\n                path: params.path,\r\n                bundle: params.bundle,\r\n                type: SpriteFrame,\r\n                onComplete: (spriteFrame) => {\r\n                    if (!spriteFrame || !isValid(params.target)) {\r\n                        params.onFail && params.onFail();\r\n                        params.onComplete && params.onComplete(false);\r\n                        return;\r\n                    }\r\n                    params.target.spriteFrame = spriteFrame;\r\n                    params.onSuccess && params.onSuccess();\r\n                    params.onComplete && params.onComplete(true);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}","import { DEV } from 'cc/env';\r\n\r\ninterface ILog {\r\n    (title: string, ...args: any[]): void\r\n}\r\n\r\nfunction empty() { }\r\n\r\n/**\r\n * 日志管理类，用于统一日志输出格式\r\n */\r\nexport class Logger {\r\n    static setting: {\r\n        filter: Array<'log' | 'warn' | 'error'>\r\n    } = {\r\n            filter: ['error', 'log', 'warn']\r\n        };\r\n\r\n    /**\r\n     * 创建日志输出函数\r\n     */\r\n    static create(level: 'log' | 'warn' | 'error', styleColor: string, title: string, titleColor = '#fff') {\r\n        if (this.setting.filter.indexOf(level) == -1) {\r\n            return empty;\r\n        }\r\n\r\n        if (DEV) {\r\n            return window.console[level].bind(window.console,\r\n                '%c %s %c %s ',\r\n                `background:${styleColor}; padding: 2px; border-radius: 5px 0 0 5px; border: 1px solid ${styleColor}; color: ${titleColor}; font-weight: normal;`,\r\n                `${title} ${new Date().toLocaleString()}`,\r\n                `background:#ffffff ; padding: 2px; border-radius: 0 5px 5px 0; border: 1px solid ${styleColor}; color: ${styleColor}; font-weight: normal;`\r\n            );\r\n        }\r\n        return window.console[level].bind(window.console,\r\n            `${title} [${new Date().toLocaleString()}]`\r\n        );\r\n    }\r\n\r\n    /**\r\n     * 用于输出一般信息\r\n     */\r\n    get log() {\r\n        return Logger.create('log', '#6495ed', '[LOG]', '#000') as ILog;\r\n    }\r\n\r\n    /**\r\n     * 用于输出警告信息\r\n     */\r\n\r\n    get warn() {\r\n        return Logger.create('warn', '#ff7f50', '[WARN]', '#000') as ILog;\r\n    }\r\n\r\n    /**\r\n     * 用于输出错误信息\r\n     */\r\n    get error() {\r\n        return Logger.create('error', '#ff4757', '[ERROR]', '#000') as ILog;\r\n    }\r\n\r\n    /**\r\n     * 用于输出调试信息\r\n     */\r\n    get debug() {\r\n        return Logger.create('log', '#ff6347', '[DEBUG]', '#000') as ILog;\r\n    }\r\n\r\n    /**\r\n     * 用于输出成功信息\r\n     */\r\n    get success() {\r\n        return Logger.create('log', '#00ae9d', '[SUCC]', '#000') as ILog;\r\n    }\r\n}\r\n\r\nexport default new Logger();","export enum RefreshOrLoadState {\r\n    NONE,//未加载状态\r\n    READY_TO_REFRESH,//滑动超过阈值，准备加载\r\n    REFRESHING,//正在加载\r\n    COMPLETE,//加载完成\r\n    COMPLETING,//正在执行加载完成动画\r\n    EMPTY, //第一次加载完就没有数据，会直接显示空布局，这时就不要下拉刷新了，也不用显示COMPLETE的文案\r\n}","import SoundManager from '../../extensions/app/assets/manager/sound/SoundManager';\r\nimport UIManager from '../../extensions/app/assets/manager/ui/UIManager';\r\n\r\n// 预加载的UI(符合app.lib.task.createAny规则)\r\nUIManager.setting.preload = ['PageMain'];\r\n// 默认UI, 会在首屏流程后自动show\r\nUIManager.setting.defaultUI = 'PageMain';\r\n// 是否自动适配分辨率策略\r\nUIManager.setting.autoFit = true; // 开启后，会弃用项目设置中的适配策略，并自动根据设备分辨率与设计分辨率计算出新的适配策略\r\n// 弹窗默认遮罩展现动画配置\r\nUIManager.setting.shade = {\r\n    delay: 0,\r\n    begin: 100,\r\n    end: 200,\r\n    speed: 400,\r\n    blur: true\r\n};\r\n\r\n// 预加载的音频(按数组顺序依次预加载)\r\nSoundManager.setting.preload = [];\r\n// 默认音乐, 会在首屏流程后自动播放\r\nSoundManager.setting.defaultMusicName = '';\r\n// 默认音效, 会在Button被点击后播放\r\nSoundManager.setting.defaultEffectName = 'effect/button';","import { AssetManager, AudioClip, Button, Game, _decorator, game, isValid, sys } from 'cc';\r\nimport { IEffectName, IMusicName } from '../../../../../assets/app-builtin/app-admin/executor';\r\nimport Core from '../../Core';\r\nimport BaseManager from '../../base/BaseManager';\r\nimport AudioEngine from './AudioEngine';\r\nconst { ccclass } = _decorator;\r\n\r\ninterface playMusic<T> { name: T, volume?: number, force?: boolean, onPlay?: Function, onError?: Function }\r\ninterface playEffect<T> { name: T, volume?: number, loop?: boolean, interval?: number, onPlay?: (audioID: number) => any, onError?: Function, onEnded?: Function }\r\ninterface playMusicAsync<T> { name: T, volume?: number, force?: boolean }\r\ninterface playEffectAsync<T> { name: T, volume?: number, loop?: boolean, interval?: number, onEnded?: Function }\r\n\r\ninterface playMusicWidthBundle { name: string, bundle: string, volume?: number, force?: boolean, onPlay?: Function, onError?: Function }\r\ninterface playEffectWidthBundle { name: string, bundle: string, volume?: number, loop?: boolean, interval?: number, onPlay?: (audioID: number) => any, onError?: Function, onEnded?: Function }\r\ninterface playMusicWidthBundleAsync { name: string, bundle: string, volume?: number, force?: boolean }\r\ninterface playEffectWidthBundleAsync { name: string, bundle: string, volume?: number, loop?: boolean, interval?: number, onEnded?: Function }\r\n\r\nconst storage = {\r\n    set(key: string, value: any) {\r\n        sys.localStorage.setItem(key, JSON.stringify(value));\r\n    },\r\n    get(key: string) {\r\n        const data = sys.localStorage.getItem(key);\r\n        if (data && typeof data === 'string') {\r\n            return JSON.parse(data);\r\n        }\r\n        return undefined;\r\n    }\r\n};\r\n\r\n/**\r\n * 音乐名字枚举\r\n */\r\nconst MusicName: { [key in IMusicName]: key } = new Proxy({} as any, {\r\n    get: function (target, key) {\r\n        if (target[key]) return target[key];\r\n        target[key] = key;\r\n        return key;\r\n    }\r\n});\r\n\r\n/**\r\n * 音效名字枚举\r\n */\r\nconst EffectName: { [key in IEffectName]: key } = new Proxy({} as any, {\r\n    get: function (target, key) {\r\n        if (target[key]) return target[key];\r\n        target[key] = key;\r\n        return key;\r\n    }\r\n});\r\n\r\nconst BundleName = 'app-sound';\r\n@ccclass('SoundManager')\r\nexport default class SoundManager<E extends string, M extends string> extends BaseManager {\r\n    /**静态设置 */\r\n    static setting: {\r\n        /**预加载 */\r\n        preload?: (IMusicName | IEffectName)[],\r\n\r\n        /**默认播放的音乐名 */\r\n        defaultMusicName?: IMusicName | '',\r\n        /**默认音乐的音量 */\r\n        defaultMusicVolume?: number,\r\n\r\n        /**默认按钮的音效名 */\r\n        defaultEffectName?: IEffectName | '',\r\n        /**默认按钮音效的音量 */\r\n        defaultEffectVolume?: number\r\n    } = {};\r\n\r\n    /**音乐名字枚举 */\r\n    static MusicName = MusicName;\r\n    /**音效名字枚举 */\r\n    static EffectName = EffectName;\r\n\r\n    private musicMuteCacheKey = 'SoundManager:MusicMute';\r\n    private effectMuteCacheKey = 'SoundManager:EffectMute';\r\n    private musicVolumeScaleCacheKey = 'SoundManager:MusicVolumeScale';\r\n    private effectVolumeScaleCacheKey = 'SoundManager:EffectVolumeScale';\r\n\r\n    private defaultMusicName = '';\r\n    private defaultMusicVolume = 1;\r\n    private defaultEffectName = '';\r\n    private defaultEffectVolume = 1;\r\n\r\n    private audioCache = {};\r\n    private effectInterval: { [key in string]: number } = {};\r\n    private playingMusic = { uuid: '', id: -1, name: '', volume: 1, playing: false, paused: false };\r\n\r\n    protected init(finish: Function) {\r\n        const setting = SoundManager.setting;\r\n\r\n        // 默认音乐\r\n        if (setting.defaultMusicName) this.defaultMusicName = setting.defaultMusicName;\r\n        if (typeof setting.defaultMusicVolume === 'number') this.defaultMusicVolume = setting.defaultMusicVolume;\r\n\r\n        // 默认按钮音效\r\n        if (setting.defaultEffectName) this.defaultEffectName = setting.defaultEffectName;\r\n        if (typeof setting.defaultEffectVolume === 'number') this.defaultEffectVolume = setting.defaultEffectVolume;\r\n\r\n        if (this.musicMuteCacheKey) {\r\n            const musicMute = storage.get(this.musicMuteCacheKey) === true;\r\n            AudioEngine.inst.setMusicMute(musicMute);\r\n        } else {\r\n            this.warn('musicMuteCacheKey不能为空');\r\n        }\r\n        if (this.effectMuteCacheKey) {\r\n            const effectMute = storage.get(this.effectMuteCacheKey) === true;\r\n            AudioEngine.inst.setGlobalEffectsMute(effectMute);\r\n        } else {\r\n            this.warn('effectMuteCacheKey不能为空');\r\n        }\r\n        if (this.musicVolumeScaleCacheKey) {\r\n            const musicVolumeScale = storage.get(this.musicVolumeScaleCacheKey);\r\n            if (typeof musicVolumeScale === 'number') AudioEngine.inst.setMusicVolumeScale(musicVolumeScale);\r\n        } else {\r\n            this.warn('musicVolumeScaleCacheKey不能为空');\r\n        }\r\n        if (this.effectVolumeScaleCacheKey) {\r\n            const effectVolumeScale = storage.get(this.effectVolumeScaleCacheKey);\r\n            if (typeof effectVolumeScale === 'number') AudioEngine.inst.setGlobalEffectsVolumeScale(effectVolumeScale);\r\n        } else {\r\n            this.warn('effectVolumeScaleCacheKey不能为空');\r\n        }\r\n\r\n        super.init(finish);\r\n\r\n        // 预加载\r\n        setting.preload?.forEach((path: string) => {\r\n            Core.inst.manager.loader.preload({\r\n                bundle: BundleName,\r\n                type: AudioClip,\r\n                path: path\r\n            });\r\n        });\r\n    }\r\n\r\n    protected onLoad() {\r\n        game.on(Game.EVENT_HIDE, function () {\r\n            AudioEngine.inst.pauseAll();\r\n        });\r\n        game.on(Game.EVENT_SHOW, function () {\r\n            AudioEngine.inst.resumeAll();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 预加载声音资源\r\n     * @param name sound路径\r\n     * @param bundle Bundle名，默认为app-sound\r\n     */\r\n    public preload(name: string, bundle: string, complete?: (item: AssetManager.RequestItem[] | null) => any): void;\r\n    public preload(name: (E | M), complete?: (item: AssetManager.RequestItem[] | null) => any): void;\r\n    public preload(name: string, ...args: any[]) {\r\n        const bundleName = (args.length >= 1\r\n            && (typeof args[0] === 'string')\r\n            ? (args[0] || BundleName)\r\n            : BundleName\r\n        ) as string;\r\n        const complete = (args.length >= 1\r\n            && (args[args.length - 1] instanceof Function)\r\n            ? args[args.length - 1]\r\n            : null\r\n        ) as (item: AssetManager.RequestItem[] | null) => any;\r\n\r\n        if (!name) {\r\n            this.error('preload', 'fail');\r\n            complete && setTimeout(function () {\r\n                if (!isValid(this)) return;\r\n                complete(null);\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (name.indexOf('effect') !== 0 && name.indexOf('music') !== 0) {\r\n            this.error('preload', 'fail', name);\r\n            complete && setTimeout(function () {\r\n                if (!isValid(this)) return;\r\n                complete(null);\r\n            });\r\n            return;\r\n        }\r\n\r\n        // 远程加载\r\n        Core.inst.manager.loader.preload({\r\n            bundle: bundleName,\r\n            path: name,\r\n            type: AudioClip,\r\n            onComplete: complete\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 加载声音资源\r\n     * @param name sound路径\r\n     * @param bundle Bundle名，默认为app-sound\r\n     * @param progress 加载进度回调\r\n     * @param complete 加载完成回调\r\n     */\r\n    public load(name: string, bundle: string): void;\r\n    public load(name: string, bundle: string, complete: (result: AudioClip | null) => any): void;\r\n    public load(name: string, bundle: string, progress: (finish: number, total: number, item: AssetManager.RequestItem) => void, complete: (result: AudioClip | null) => any): void;\r\n    public load(name: (E | M)): void;\r\n    public load(name: (E | M), complete: (result: AudioClip | null) => any): void;\r\n    public load(name: (E | M), progress: (finish: number, total: number, item: AssetManager.RequestItem) => void, complete: (result: AudioClip | null) => any): void;\r\n    public load(name: string, ...args: any[]): void {\r\n        const bundleName = (args.length >= 1\r\n            && (typeof args[0] === 'string')\r\n            ? (args[0] || BundleName)\r\n            : BundleName\r\n        ) as string;\r\n        const progress = (args.length >= 2\r\n            && (args[args.length - 1] instanceof Function)\r\n            && (args[args.length - 2] instanceof Function)\r\n            ? args[args.length - 2]\r\n            : null\r\n        ) as (finish: number, total: number, item: AssetManager.RequestItem) => void;\r\n        const complete = (args.length >= 1\r\n            && (args[args.length - 1] instanceof Function)\r\n            ? args[args.length - 1]\r\n            : null\r\n        ) as (result: AudioClip | null) => any;\r\n\r\n        if (!name) {\r\n            this.error('load', 'fail');\r\n            complete && setTimeout(() => {\r\n                if (!isValid(this)) return;\r\n                complete(null);\r\n            });\r\n            return;\r\n        }\r\n\r\n        const soundName = `${bundleName}://${name}`;\r\n\r\n        // 判断有无缓存\r\n        const audio = this.audioCache[soundName];\r\n        if (audio) {\r\n            complete && setTimeout(() => {\r\n                if (!isValid(this)) return;\r\n                complete(audio);\r\n            });\r\n            return;\r\n        }\r\n\r\n        // 远程加载\r\n        Core.inst.manager.loader.load({\r\n            path: name,\r\n            bundle: bundleName,\r\n            type: AudioClip,\r\n            onProgress: progress,\r\n            onComplete: (audioClip) => {\r\n                if (!isValid(this)) return;\r\n                if (audioClip) {\r\n                    this.audioCache[soundName] = audioClip;\r\n                    complete && complete(audioClip);\r\n                } else {\r\n                    complete && complete(null);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 释放声音资源\r\n     * @param name 声音路径\r\n     * @param bundle Bundle名，默认为app-sound\r\n     */\r\n    public release(name: string, bundle: string): void;\r\n    public release(name: E | M): void;\r\n    public release(name: string, bundle?: string) {\r\n        const bundleName = bundle || BundleName;\r\n        const soundName = `${bundleName}://${name}`;\r\n\r\n        delete this.audioCache[soundName];\r\n        Core.inst.manager.loader.release({ bundle: bundleName, path: name, type: AudioClip });\r\n    }\r\n\r\n    /**\r\n     * 播放默认音乐\r\n     */\r\n    public playDefaultMusic(onPlay?: Function) {\r\n        if (this.defaultMusicName) {\r\n            this.playMusic({ name: <M>this.defaultMusicName, volume: this.defaultMusicVolume, onPlay });\r\n        } else {\r\n            this.warn('defaultMusicName 不存在');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 播放默认音效\r\n     */\r\n    public playDefaultEffect(onPlay?: (audioID: number) => void) {\r\n        if (this.defaultEffectName) {\r\n            this.playEffect({ name: <E>this.defaultEffectName, volume: this.defaultEffectVolume, onPlay });\r\n        } else {\r\n            this.warn('defaultEffectName 不存在');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 设置按钮点击播放的音效，优先级高于默认音效\r\n     * @param name 音效(如果为空，则使用默认音效)\r\n     * @param opts.volume 音量\r\n     * @param opts.interval 多少秒内不会重复播放\r\n     */\r\n    public setButtonEffect(target: Button, name?: E, opts?: {\r\n        volume: number,\r\n        interval: number\r\n    }) {\r\n        if (name) {\r\n            const { volume = 1, interval = 0 } = opts || {};\r\n            //@ts-ignore\r\n            target.node['useDefaultEffect'] = false;\r\n            target.node.targetOff(this);\r\n            target.node.on(Button.EventType.CLICK, function (this: SoundManager<E, M>) {\r\n                this.playEffect({ name, volume, interval });\r\n            }, this);\r\n        } else {\r\n            //@ts-ignore\r\n            target.node['useDefaultEffect'] = true;\r\n            target.node.targetOff(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 播放音效\r\n     * @param name 音效\r\n     * @param bundle Bundle名，默认为app-sound\r\n     * @param loop 循环播放\r\n     * @param volume 音量\r\n     * @param interval 多少秒内不会重复播放\r\n     */\r\n    public playEffect({ name, volume, loop, interval, onEnded, onPlay, onError }: playEffect<E>): void;\r\n    public playEffect({ name, bundle, volume, loop, interval, onEnded, onPlay, onError }: playEffectWidthBundle): void;\r\n    public playEffect({ name, bundle, volume = 1, loop = false, interval = 0, onEnded, onPlay, onError }) {\r\n        if (!name) {\r\n            onError && onError();\r\n            return;\r\n        }\r\n\r\n        const bundleName = bundle || BundleName;\r\n        const soundName = `${bundleName}://${name}`;\r\n\r\n        // 静音不允许播放\r\n        if (this.isEffectMute) {\r\n            onError && onError();\r\n            return;\r\n        }\r\n        // 正在播放中，不允许重复播放\r\n        if (this.effectInterval[soundName] && Date.now() < this.effectInterval[soundName]) {\r\n            onError && onError();\r\n            return;\r\n        }\r\n\r\n        // 加载音乐\r\n        this.load(name, bundleName, (audioClip) => {\r\n            if (!isValid(this)) {\r\n                onError && onError();\r\n                return;\r\n            }\r\n            // 静音不允许播放\r\n            if (this.isEffectMute) {\r\n                onError && onError();\r\n                return;\r\n            }\r\n            // 正在播放中，不允许重复播放\r\n            if (this.effectInterval[soundName] && Date.now() < this.effectInterval[soundName]) {\r\n                onError && onError();\r\n                return;\r\n            }\r\n            if (!audioClip) {\r\n                this.error(`playEffect ${name} 不存在或加载失败`);\r\n                onError && onError();\r\n                return;\r\n            }\r\n\r\n            if (interval > 0) {\r\n                this.effectInterval[soundName] = Date.now() + interval * 1000;\r\n            }\r\n\r\n            AudioEngine.inst.playEffect(audioClip, volume, loop, onPlay, onEnded);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 播放音效\r\n     * @param name 音效\r\n     * @param bundle Bundle名，默认为app-sound\r\n     * @param loop 循环播放\r\n     * @param volume 音量\r\n     * @param interval 多少秒内不会重复播放\r\n     * @returns 如果Promise返回值是null(非真)，则播放失败\r\n     */\r\n    public async playEffectAsync(params: playEffectAsync<E>): Promise<number>;\r\n    public async playEffectAsync(params: playEffectWidthBundleAsync): Promise<number>;\r\n    public async playEffectAsync(params: any): Promise<number> {\r\n        return new Promise((resolve) => {\r\n            this.playEffect({\r\n                ...params,\r\n                onPlay: (audioID) => {\r\n                    resolve(audioID);\r\n                },\r\n                onError: () => {\r\n                    resolve(null);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 暂停音效\r\n     * @param id \r\n     * @returns \r\n     */\r\n    public pauseEffect(id: number) {\r\n        return AudioEngine.inst.pauseEffect(id);\r\n    }\r\n\r\n    /**\r\n     * 暂停所有音效\r\n     * @returns \r\n     */\r\n    public pauseAllEffects() {\r\n        return AudioEngine.inst.pauseAllEffects();\r\n    }\r\n\r\n    /**\r\n     * 恢复音效\r\n     * @param id \r\n     * @returns \r\n     */\r\n    public resumeEffect(id: number) {\r\n        return AudioEngine.inst.resumeEffect(id);\r\n    }\r\n\r\n    /**\r\n     * 恢复所有音效\r\n     * @returns \r\n     */\r\n    public resumeAllEffects() {\r\n        return AudioEngine.inst.resumeAllEffects();\r\n    }\r\n\r\n    /**\r\n     * 停止音效\r\n     * @param id \r\n     * @returns \r\n     */\r\n    public stopEffect(id: number) {\r\n        return AudioEngine.inst.stopEffect(id);\r\n    }\r\n\r\n    /**\r\n     * 停止所有音效\r\n     * @returns \r\n     */\r\n    public stopAllEffects() {\r\n        return AudioEngine.inst.stopAllEffects();\r\n    }\r\n\r\n    /**\r\n     * 播放音乐\r\n     * @param volume 音量\r\n     * @param bundle Bundle名，默认为app-sound\r\n     * @param force 是否强制重新播放\r\n     */\r\n    public playMusic(params: playMusic<M>): void;\r\n    public playMusic(params: playMusicWidthBundle): void;\r\n    public playMusic({ name, bundle, volume = 1, force = false, onPlay, onError }): void {\r\n        if (!name) {\r\n            onError && onError();\r\n            return;\r\n        }\r\n\r\n        const bundleName = bundle || BundleName;\r\n        const soundName = `${bundleName}://${name}`;\r\n\r\n        // 该音乐正在播放中\r\n        if (!force && this.playingMusic.id !== -1 && this.playingMusic.name === soundName) {\r\n            AudioEngine.inst.setMusicVolume(volume);\r\n            onPlay && onPlay();\r\n            return;\r\n        }\r\n\r\n        // 先停止当前音乐\r\n        this.stopMusic();\r\n\r\n        // 播放操作uuid\r\n        const uuid = this.createUUID();\r\n        this.playingMusic.uuid = uuid;\r\n        // 记录要播放音乐的名字\r\n        this.playingMusic.name = soundName;\r\n        // 记录要播放音乐的音量\r\n        this.playingMusic.volume = volume;\r\n        // 记录音乐状态\r\n        this.playingMusic.playing = true;\r\n        this.playingMusic.paused = false;\r\n\r\n        // 静音\r\n        if (this.isMusicMute) {\r\n            onPlay && onPlay();\r\n            return;\r\n        }\r\n\r\n        // 加载音乐\r\n        this.load(name, bundleName, (audioClip) => {\r\n            if (!isValid(this)) {\r\n                onError && onError();\r\n                return;\r\n            }\r\n            // 不合法\r\n            if (this.playingMusic.id !== -1) {\r\n                onError && onError();\r\n                return;\r\n            }\r\n            if (this.playingMusic.name !== soundName) {\r\n                onError && onError();\r\n                return;\r\n            }\r\n            if (this.playingMusic.uuid !== this.playingMusic.uuid) {\r\n                onError && onError();\r\n                return;\r\n            }\r\n            // 不存在\r\n            if (!audioClip) {\r\n                this.error(`playMusic ${name} 不存在或加载失败`);\r\n                onError && onError();\r\n                return;\r\n            }\r\n            // 静音\r\n            if (this.isMusicMute) {\r\n                onPlay && onPlay();\r\n                return;\r\n            }\r\n\r\n            this.playingMusic.id = AudioEngine.inst.playMusic(audioClip, volume, onPlay);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 播放音乐\r\n     * @param volume 音量\r\n     * @param bundle Bundle名，默认为app-sound\r\n     * @param force 是否强制重新播放\r\n     * @returns 如果Promise返回值是false，则播放失败\r\n     */\r\n    public playMusicAsync(params: playMusicAsync<M>): Promise<boolean>;\r\n    public playMusicAsync(params: playMusicWidthBundleAsync): Promise<boolean>;\r\n    public playMusicAsync(params: any): Promise<boolean> {\r\n        return new Promise((resolve) => {\r\n            this.playMusic({\r\n                ...params,\r\n                onPlay: () => {\r\n                    resolve(true);\r\n                },\r\n                onError: () => {\r\n                    resolve(false);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 重新播放音乐\r\n     */\r\n    public replayMusic(onPlay?: Function) {\r\n        if (!this.playingMusic.playing) return;\r\n        if (!this.playingMusic.name) return;\r\n        if (this.playingMusic.name.indexOf('://') > 0) {\r\n            const [bundle, name] = this.playingMusic.name.split('://');\r\n            this.playMusic({\r\n                name,\r\n                bundle,\r\n                volume: this.playingMusic.volume,\r\n                force: true,\r\n                onPlay\r\n            });\r\n        } else {\r\n            this.playMusic({\r\n                name: this.playingMusic.name as any,\r\n                volume: this.playingMusic.volume,\r\n                force: true,\r\n                onPlay\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 暂停音乐\r\n     */\r\n    public pauseMusic() {\r\n        if (!this.playingMusic.playing) return false;\r\n        this.playingMusic.paused = true;\r\n        return AudioEngine.inst.pauseMusic();\r\n    }\r\n\r\n    /**\r\n     * 恢复音乐\r\n     */\r\n    public resumeMusic() {\r\n        if (!this.playingMusic.playing) return false;\r\n        this.playingMusic.paused = false;\r\n        return AudioEngine.inst.resumeMusic();\r\n    }\r\n\r\n    /**\r\n     * 停止音乐\r\n     */\r\n    public stopMusic() {\r\n        this.playingMusic.playing = false;\r\n        this.playingMusic.paused = false;\r\n        this.playingMusic.volume = 1;\r\n        this.playingMusic.name = '';\r\n        this.playingMusic.uuid = '';\r\n        this.playingMusic.id = -1;\r\n        return AudioEngine.inst.stopMusic();\r\n    }\r\n\r\n    /**\r\n     * 设置音乐静音\r\n     * @param mute 是否静音\r\n     * @param isCache 静音状态是否写入缓存(通过localstorage)\r\n     */\r\n    public setMusicMute(mute: boolean, isCache = false) {\r\n        isCache && storage.set(this.musicMuteCacheKey, mute);\r\n        AudioEngine.inst.setMusicMute(mute);\r\n        if (!mute && this.playingMusic.name) {\r\n            if (this.playingMusic.name.indexOf('://') > 0) {\r\n                const [bundle, name] = this.playingMusic.name.split('://');\r\n                this.playMusic({\r\n                    name,\r\n                    bundle,\r\n                    volume: this.playingMusic.volume,\r\n\r\n                });\r\n            } else {\r\n                this.playMusic({\r\n                    name: this.playingMusic.name as any,\r\n                    volume: this.playingMusic.volume\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 音乐是否正在播放\r\n     */\r\n    get isMusicPlaying() {\r\n        return this.playingMusic.playing;\r\n    }\r\n\r\n    /**\r\n     * 音乐是否暂停\r\n     */\r\n    get isMusicPaused() {\r\n        return this.playingMusic.paused;\r\n    }\r\n\r\n    /**\r\n     * 音乐是否静音\r\n     */\r\n    public get isMusicMute() {\r\n        return AudioEngine.inst.getMusicMute();\r\n    }\r\n\r\n    /**\r\n     * 设置音效静音\r\n     * @param mute 是否静音\r\n     * @param isCache 静音状态是否写入缓存(通过localstorage)\r\n     */\r\n    public setEffectMute(mute: boolean, isCache = false) {\r\n        AudioEngine.inst.setGlobalEffectsMute(mute);\r\n        isCache && storage.set(this.effectMuteCacheKey, mute);\r\n    }\r\n\r\n    /**\r\n     * 音效是否静音\r\n     */\r\n    public get isEffectMute() {\r\n        return AudioEngine.inst.getGlobalEffectsMute();\r\n    }\r\n\r\n    /**\r\n     * 设置音乐音量倍率\r\n     * @param scale \r\n     * @param isCache 音量倍率是否写入缓存(通过localstorage)\r\n     */\r\n    public setMusicVolumeScale(scale: number, isCache = false) {\r\n        AudioEngine.inst.setMusicVolumeScale(scale);\r\n        isCache && storage.set(this.musicVolumeScaleCacheKey, scale);\r\n    }\r\n\r\n    /**\r\n     * 音乐音量倍率\r\n     */\r\n    public get musicVolumeScale() {\r\n        return AudioEngine.inst.getMusicVolumeScale();\r\n    }\r\n\r\n    /**\r\n     * 设置音效音量倍率\r\n     * @param scale \r\n     * @param isCache 音量倍率是否写入缓存(通过localstorage)\r\n     */\r\n    public setEffectVolumeScale(scale: number, isCache = false) {\r\n        AudioEngine.inst.setGlobalEffectsVolumeScale(scale);\r\n        isCache && storage.set(this.effectVolumeScaleCacheKey, scale);\r\n    }\r\n\r\n    /**\r\n     * 音效音量倍率\r\n     */\r\n    public get effectVolumeScale() {\r\n        return AudioEngine.inst.getGlobalEffectsVolumeScale();\r\n    }\r\n}","import { error, js, log, sys } from 'cc';\r\n\r\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\r\n\r\nfunction encode(text: string, key: string) {\r\n    key = key || chars;\r\n    let encrypted = '';\r\n    for (let i = 0; i < text.length; i++) {\r\n        const charCode = text.charCodeAt(i) ^ key.charCodeAt(i % key.length);\r\n        encrypted += String.fromCharCode(charCode);\r\n    }\r\n    return encrypted;\r\n}\r\n\r\nfunction decode(encryptedText: string, key: string) {\r\n    key = key || chars;\r\n    let decrypted = '';\r\n    for (let i = 0; i < encryptedText.length; i++) {\r\n        const charCode = encryptedText.charCodeAt(i) ^ key.charCodeAt(i % key.length);\r\n        decrypted += String.fromCharCode(charCode);\r\n    }\r\n    return decrypted;\r\n}\r\n\r\nconst weekOfYear = function (curDate?: Date) {\r\n    /*\r\n     date1是当前日期\r\n     date2是当年第一天\r\n     d是当前日期是今年第多少天\r\n     用d + 当前年的第一天的周差距的和在除以7就是本年第几周\r\n     */\r\n    curDate = curDate || new Date();\r\n    let a = curDate.getFullYear();\r\n    let b = curDate.getMonth() + 1;\r\n    let c = curDate.getDate();\r\n\r\n    let date1 = new Date(a, b - 1, c), date2 = new Date(a, 0, 1),\r\n        d = Math.round((date1.valueOf() - date2.valueOf()) / 86400000);\r\n    return Math.ceil(\r\n        (d + ((date2.getDay() + 1) - 1)) / 7\r\n    );\r\n};\r\n\r\nconst getWeekUpdateTime = function () {\r\n    const date = new Date();\r\n    const year = date.getFullYear();\r\n    const week = weekOfYear(date);\r\n    return year + '' + week;\r\n};\r\n\r\nconst getDayUpdateTime = function (curDate?: Date) {\r\n    curDate = curDate || new Date();\r\n    return curDate.toLocaleDateString();\r\n};\r\n\r\nexport class Storage {\r\n    static setting: {\r\n        /**\r\n         * 加密密钥  \r\n         * - 如果需要加密内容，请设置密钥的值\r\n         */\r\n        secretKey: string\r\n    } = {\r\n            secretKey: ''\r\n        };\r\n\r\n    private _cache = {};\r\n\r\n    /**\r\n     * 返回值为false代表调用失败\r\n     */\r\n    set(key: string, value: unknown) {\r\n        if (typeof key === 'string' && typeof value !== 'undefined') {\r\n            try {\r\n                const data = JSON.stringify(value);\r\n                if (Storage.setting.secretKey) {\r\n                    sys.localStorage.setItem(key, encode(data, Storage.setting.secretKey));\r\n                } else {\r\n                    sys.localStorage.setItem(key, data);\r\n                }\r\n                // 设置缓存\r\n                this._cache[key] = data;\r\n                return true;\r\n            } catch (err) { log(err); }\r\n        } else {\r\n            error('storage set error');\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 返回值为undefined代表调用失败\r\n     */\r\n    get(key: string) {\r\n        // 先读取缓存\r\n        if (typeof this._cache[key] !== 'undefined') {\r\n            return JSON.parse(this._cache[key]);\r\n        }\r\n\r\n        let result = null;\r\n        try {\r\n            let data = sys.localStorage.getItem(key);\r\n            if (data && typeof data === 'string') {\r\n                if (Storage.setting.secretKey) data = decode(data, Storage.setting.secretKey);\r\n                // 设置缓存\r\n                this._cache[key] = data;\r\n                result = JSON.parse(data);\r\n            } else if (data !== '' && data !== null) {\r\n                result = undefined;\r\n            }\r\n        } catch (e) {\r\n            result = undefined;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 返回值为false代表调用失败\r\n     */\r\n    add(key: string, value: number = 1) {\r\n        let result = this.get(key);\r\n        if (result !== undefined) {\r\n            result = result || 0;\r\n            result += value;\r\n            if (this.set(key, result)) {\r\n                return result;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 返回值为false代表调用失败\r\n     */\r\n    remove(key: string) {\r\n        try {\r\n            sys.localStorage.removeItem(key);\r\n            delete this._cache[key];\r\n            return true;\r\n        } catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 返回值为false代表调用失败\r\n     */\r\n    clear() {\r\n        try {\r\n            sys.localStorage.clear();\r\n            js.clear(this._cache);\r\n            return true;\r\n        } catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 设置本周数据 [返回值为false代表调用失败]\r\n     * @param {Function} cb 当已存在本周的数据时，会根据cb的返回决定是否存储，true代表存储\r\n     */\r\n    setWeek(key: string, value: unknown, cb?: (oldValue: unknown, newValue: unknown) => boolean) {\r\n        const updateTime = getWeekUpdateTime();\r\n\r\n        if (cb) {\r\n            const data = this.getWeek(key);\r\n            if (data !== undefined) {\r\n                if (data === null || cb(data, value)) {\r\n                    return this.set(key, {\r\n                        data: value,\r\n                        updateTime: updateTime\r\n                    });\r\n                }\r\n            }\r\n        } else {\r\n            return this.set(key, {\r\n                data: value,\r\n                updateTime: updateTime\r\n            });\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 获取本周数据 [返回值为undefined代表调用失败]\r\n     */\r\n    getWeek(key: string) {\r\n        const data = this.get(key);\r\n        if (data && data.updateTime == getWeekUpdateTime()) {\r\n            return data.data;\r\n        }\r\n        return data && null;\r\n    }\r\n\r\n    /**\r\n     * 设置本天数据 [返回值为false代表调用失败]\r\n     * @param {Function} cb 当已存在本天的数据时，会根据cb的返回决定是否存储，true代表存储\r\n     */\r\n    setDay(key: string, value: unknown, cb?: (oldValue: unknown, newValue: unknown) => boolean) {\r\n        const updateTime = getDayUpdateTime();\r\n\r\n        if (cb) {\r\n            const data = this.getDay(key);\r\n            if (data !== undefined) {\r\n                if (data === null || cb(data, value)) {\r\n                    return this.set(key, {\r\n                        data: value,\r\n                        updateTime: updateTime\r\n                    });\r\n                }\r\n            }\r\n        } else {\r\n            return this.set(key, {\r\n                data: value,\r\n                updateTime: updateTime\r\n            });\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 获取本天数据 [返回值为undefined代表调用失败]\r\n     * @param {*} key \r\n     */\r\n    getDay(key: string) {\r\n        const data = this.get(key);\r\n        if (data && data.updateTime == getDayUpdateTime()) {\r\n            return data.data;\r\n        }\r\n        return data && null;\r\n    }\r\n}\r\n\r\nexport default new Storage();","interface IHandle {\r\n    (next: (data?: any) => boolean, retry: (timeout?: number) => Promise<boolean>, end: (data?: any) => boolean): void\r\n}\r\n\r\ninterface IFinish<T> {\r\n    (results?: T, success?: boolean): any\r\n}\r\n\r\nexport interface ITask<T extends Array<any> = any[]> {\r\n    readonly results: Readonly<T>;\r\n    size(): number;\r\n    add(handle: IHandle): this;\r\n    start(finish?: IFinish<T> | Function): this;\r\n    stop(): boolean;\r\n    isRunning(): boolean;\r\n}\r\n\r\n/**\r\n * 顺序执行\r\n */\r\nexport class Sync<T extends Array<any>> implements ITask<T> {\r\n    private running = false;\r\n    private index: number = -1;\r\n    private list: IHandle[] = [];\r\n    private finish: IFinish<T> | Function = null;\r\n\r\n    /**\r\n     * 每个handle的返回值，通过next或end存储\r\n     */\r\n    public results: T = [] as T;\r\n\r\n    /**\r\n     * 任务数量\r\n     * @returns \r\n     */\r\n    public size(): number {\r\n        return this.list.length;\r\n    }\r\n\r\n    /**\r\n     * 添加一个任务\r\n     * @param handle \r\n     * @returns \r\n     */\r\n    public add(handle: IHandle) {\r\n        this.list.push(handle);\r\n        this.results.push(undefined);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 开始执行所有任务\r\n     * @param finish 执行完毕回调\r\n     * @returns \r\n     */\r\n    public start(finish?: IFinish<T> | Function) {\r\n        if (this.running) {\r\n            return this;\r\n        }\r\n\r\n        this.running = true;\r\n        this.index = -1;\r\n        this.finish = finish;\r\n\r\n        this.next(this.index);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 停止所有任务\r\n     * @returns \r\n     */\r\n    public stop(): boolean {\r\n        if (!this.running) {\r\n            return false;\r\n        }\r\n\r\n        this.running = false;\r\n        if (this.finish) {\r\n            this.finish(this.results, false);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 是否正在执行\r\n     * @returns \r\n     */\r\n    public isRunning() {\r\n        return this.running;\r\n    }\r\n\r\n    /**\r\n     * @deprecated\r\n     * @returns \r\n     */\r\n    public isStop() {\r\n        return !this.running;\r\n    }\r\n\r\n    private end(data?: any): boolean {\r\n        if (!this.running) {\r\n            return false;\r\n        }\r\n\r\n        if (typeof data !== 'undefined') {\r\n            this.results[this.index] = data;\r\n        }\r\n\r\n        this.running = false;\r\n        if (this.finish) {\r\n            this.finish(this.results, true);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private next(index: number, data?: any): boolean {\r\n        if (!this.running) {\r\n            return false;\r\n        }\r\n\r\n        if (index !== this.index) return false;\r\n\r\n        if (typeof data !== 'undefined') {\r\n            this.results[this.index] = data;\r\n        }\r\n\r\n        if (++this.index < this.list.length) {\r\n            this.retry(this.index);\r\n        } else {\r\n            this.end();\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private retry(index: number): boolean {\r\n        if (!this.running) {\r\n            return false;\r\n        }\r\n\r\n        if (index !== this.index) return false;\r\n\r\n        const handle = this.list[index];\r\n        handle && handle(\r\n            (data?: any) => this.next(index, data),\r\n            (timeout = 0) => {\r\n                return new Promise(resolve => {\r\n                    if (timeout > 0) {\r\n                        setTimeout(() => {\r\n                            resolve(this.retry(index));\r\n                        }, timeout * 1000);\r\n                    } else {\r\n                        resolve(this.retry(index));\r\n                    }\r\n                });\r\n            },\r\n            (data?: any) => this.end(data)\r\n        );\r\n\r\n        return true;\r\n    }\r\n}\r\n\r\n/**\r\n * 同时执行\r\n */\r\nexport class ASync<T extends Array<any>> implements ITask<T> {\r\n    private running = false;\r\n    private count: number = 0;\r\n    private list: IHandle[] = [];\r\n    private finish: IFinish<T> | Function = null;\r\n\r\n    /**\r\n     * 每个handle的返回值，通过next或end存储\r\n     */\r\n    public results: T = [] as T;\r\n\r\n    /**\r\n     * 任务数量\r\n     * @returns \r\n     */\r\n    public size(): number {\r\n        return this.list.length;\r\n    }\r\n\r\n    /**\r\n     * 添加一个任务\r\n     * @param handle \r\n     * @returns \r\n     */\r\n    public add(handle: IHandle) {\r\n        this.list.push(handle);\r\n        this.results.push(undefined);\r\n\r\n        if (this.running) {\r\n            this.retry(this.list.length - 1);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 开始执行所有任务\r\n     * @param finish 执行完毕回调\r\n     * @returns \r\n     */\r\n    public start(finish?: IFinish<T> | Function) {\r\n        if (this.running) {\r\n            return this;\r\n        }\r\n\r\n        this.running = true;\r\n        this.count = 0;\r\n        this.finish = finish;\r\n\r\n        if (this.list.length) {\r\n            for (let index = 0; index < this.list.length; index++) {\r\n                this.retry(index);\r\n            }\r\n        } else {\r\n            this.end && this.end(this.count);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 停止所有任务\r\n     * @returns \r\n     */\r\n    public stop(): boolean {\r\n        if (!this.running) {\r\n            return false;\r\n        }\r\n        this.running = false;\r\n        if (this.finish) {\r\n            this.finish(this.results, false);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 是否正在执行\r\n     * @returns \r\n     */\r\n    public isRunning() {\r\n        return this.running;\r\n    }\r\n\r\n    /**\r\n     * @deprecated\r\n     * @returns \r\n     */\r\n    public isStop() {\r\n        return !this.running;\r\n    }\r\n\r\n    private end(index: number, data?: any): boolean {\r\n        if (!this.running) {\r\n            return false;\r\n        }\r\n\r\n        if (index >= 0 && index < this.results.length) {\r\n            if (this.results[index] || this.results[index] === null) return false;\r\n            this.results[index] = typeof data !== 'undefined' ? data : null;\r\n        }\r\n\r\n        this.running = false;\r\n        if (this.finish) {\r\n            this.finish(this.results, true);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private next(index: number, data?: any): boolean {\r\n        if (!this.running) {\r\n            return false;\r\n        }\r\n\r\n        if (index >= 0 && index < this.results.length) {\r\n            if (this.results[index] || this.results[index] === null) return false;\r\n            this.results[index] = typeof data !== 'undefined' ? data : null;\r\n        }\r\n\r\n        if (++this.count === this.list.length) {\r\n            this.end && this.end(this.count);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private retry(index: number): boolean {\r\n        if (!this.running) {\r\n            return false;\r\n        }\r\n\r\n        const handle = this.list[index];\r\n        handle && handle(\r\n            (data?: any) => this.next(index, data),\r\n            (timeout = 0) => {\r\n                return new Promise(resolve => {\r\n                    if (timeout > 0) {\r\n                        setTimeout(() => {\r\n                            resolve(this.retry(index));\r\n                        }, timeout * 1000);\r\n                    } else {\r\n                        resolve(this.retry(index));\r\n                    }\r\n                });\r\n            },\r\n            (data?: any) => this.end(index, data)\r\n        );\r\n\r\n        return true;\r\n    }\r\n}\r\n\r\nexport class Any<T extends Array<any>> implements ITask<T> {\r\n    private task = new Sync();\r\n\r\n    /**\r\n     * 每个handle的返回值，通过next或end存储\r\n     */\r\n    public get results(): T {\r\n        return this.task.results as T;\r\n    }\r\n\r\n    /**\r\n     * 任务数量\r\n     * @returns \r\n     */\r\n    public size() {\r\n        return this.task.size();\r\n    }\r\n\r\n    /**\r\n     * 添加一个任务\r\n     * @param handle \r\n     * @returns \r\n     */\r\n    public add(handles: IHandle | IHandle[]) {\r\n        if (handles instanceof Array) {\r\n            const async = new ASync();\r\n            handles.forEach(handle => async.add(handle));\r\n            this.task.add(async.start.bind(async));\r\n        } else {\r\n            this.task.add(handles);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 开始执行所有任务\r\n     * @param finish 执行完毕回调\r\n     * @returns \r\n     */\r\n    public start(finish?: IFinish<T> | Function) {\r\n        this.task.start(finish);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 停止所有任务\r\n     * @returns \r\n     */\r\n    public stop() {\r\n        return this.task.stop();\r\n    }\r\n\r\n    /**\r\n     * 是否正在执行\r\n     * @returns \r\n     */\r\n    public isRunning() {\r\n        return this.task.isRunning();\r\n    }\r\n\r\n    /**\r\n     * @deprecated\r\n     * @returns \r\n     */\r\n    public isStop() {\r\n        return this.task.isStop();\r\n    }\r\n}\r\n\r\ninterface IExecuteCallBack {\r\n    (retry: (timeout?: number) => void): void\r\n}\r\n\r\nconst task = {\r\n    /**\r\n     * 任务顺序执行\r\n     */\r\n    createSync<T extends Array<any>>(): Sync<T> {\r\n        return new Sync<T>();\r\n    },\r\n\r\n    /**\r\n     * 任务同时执行\r\n     */\r\n    createASync<T extends Array<any>>(): ASync<T> {\r\n        return new ASync<T>();\r\n    },\r\n\r\n    /**\r\n     * 根据参数指定执行顺序\r\n     * @example\r\n     * createAny()\r\n     * .add(1).add(2).add(3).add(4)\r\n     * .add([5,6,7])\r\n     * .add(8)\r\n     * 执行顺序，1，2，3，4依次执行，然后同时执行5，6，7，最后执行8\r\n     */\r\n    createAny<T extends Array<any>>() {\r\n        return new Any<T>();\r\n    },\r\n\r\n    /**\r\n     * 执行单个任务\r\n     */\r\n    execute(fun: IExecuteCallBack, retryMax = -1, retryFinish?: Function) {\r\n        fun(function retry(timeout = 0) {\r\n            if (retryMax === 0) return retryFinish && retryFinish();\r\n            retryMax = retryMax > 0 ? retryMax - 1 : retryMax;\r\n            if (timeout > 0) {\r\n                setTimeout(() => task.execute(fun, retryMax, retryFinish), timeout * 1000);\r\n            } else {\r\n                task.execute(fun, retryMax, retryFinish);\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nexport default task;","import { _decorator } from 'cc';\r\nimport BaseManager from '../../base/BaseManager';\r\nconst { ccclass } = _decorator;\r\n\r\ntype ICallback = (...args: any[]) => any;\r\n\r\nclass DailyTimer {\r\n    // 获取当前时间相对于当日零点的毫秒数\r\n    private static getDayTimeMs(date: Date): number {\r\n        return (\r\n            date.getHours() * 3600 +\r\n            date.getMinutes() * 60 +\r\n            date.getSeconds()\r\n        ) * 1000 + date.getMilliseconds();\r\n    }\r\n\r\n    // 静态方法解析时间为毫秒数\r\n    private static parseTimeToMs(h: number, m: number, s: number): number {\r\n        return ((h * 3600 + m * 60 + s) * 1000) % 86400000;\r\n    }\r\n\r\n    private readonly startMs: number;  // 起始时间毫秒数（相对于当日零点）\r\n    private readonly endMs: number;    // 结束时间毫秒数\r\n\r\n    // 用于检查当前时间是否可触发回调\r\n    private checkDay = 0;\r\n\r\n    constructor(\r\n        time: string,\r\n        public readonly callback: ICallback,\r\n        public readonly target?: unknown,\r\n        public readonly once: boolean = false\r\n    ) {\r\n        // 使用解构赋值提高可读性\r\n        const [startSegment, endSegment = startSegment] = time.split('-');\r\n\r\n        // 开始时间\r\n        const [startH = 0, startM = 0, startS = 0] = startSegment.split(':').map(\r\n            part => Math.max(0, parseInt(part, 10) || 0)\r\n        );\r\n        this.startMs = DailyTimer.parseTimeToMs(startH, startM, startS);\r\n\r\n        // 结束时间\r\n        const [endH = 0, endM = 0, endS = 0] = endSegment.split(':').map(\r\n            part => Math.max(0, parseInt(part, 10) || 0)\r\n        );\r\n        this.endMs = DailyTimer.parseTimeToMs(endH, endM, endS);\r\n        // 结束时间与开始时间不能相同\r\n        if (this.endMs === this.startMs) {\r\n            if (startM === 0 && startS === 0) {\r\n                this.endMs = DailyTimer.parseTimeToMs(startH + 1, startM, startS);\r\n            } else if (startS === 0) {\r\n                this.endMs = DailyTimer.parseTimeToMs(startH, startM + 1, startS);\r\n            } else {\r\n                this.endMs = DailyTimer.parseTimeToMs(startH, startM, startS + 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 获取当前时间是否在时间范围内\r\n    private isInRange(now: Date): boolean {\r\n        const currentMs = DailyTimer.getDayTimeMs(now);\r\n\r\n        // 处理跨天时间段（如 23:00-01:00）\r\n        return this.startMs <= this.endMs\r\n            ? currentMs >= this.startMs && currentMs < this.endMs\r\n            : currentMs >= this.startMs || currentMs < this.endMs;\r\n    }\r\n\r\n    update(now: Date): boolean {\r\n        const dateDay = now.getDay();\r\n\r\n        if (this.checkDay === dateDay) return false;\r\n        if (!this.isInRange(now)) return false;\r\n\r\n        this.checkDay = dateDay;\r\n        this.callback.call(this.target);\r\n\r\n        return this.once;\r\n    }\r\n}\r\n\r\nclass IntervalTimer {\r\n    private elapsed: number = 0;\r\n\r\n    constructor(\r\n        public readonly interval: number,\r\n        public readonly callback: ICallback,\r\n        public readonly target?: unknown,\r\n        public readonly once: boolean = false\r\n    ) { }\r\n\r\n    update(dt: number): boolean {\r\n        this.elapsed += dt;\r\n        let completed = false;\r\n\r\n        // 处理可能多次触发的情况（当dt > interval时）\r\n        while (this.elapsed >= this.interval) {\r\n            this.callback.call(this.target);\r\n            this.elapsed -= this.interval;\r\n\r\n            if (this.once) {\r\n                completed = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return completed;\r\n    }\r\n}\r\n\r\nclass Timer {\r\n    static update(timer: Timer, dt: number) {\r\n        return timer.update(dt);\r\n    }\r\n\r\n    private intervalTimer: IntervalTimer[] = [];\r\n\r\n    /**\r\n     * 注册定时器\r\n     * @param interval \r\n     * @param callback \r\n     * @param target \r\n     * @param once \r\n     */\r\n    register(\r\n        interval: number,\r\n        callback: ICallback,\r\n        target?: unknown,\r\n        once?: boolean\r\n    ): void {\r\n        const timer = new IntervalTimer(interval, callback, target, once || false);\r\n        this.intervalTimer.push(timer);\r\n    }\r\n\r\n    /**\r\n     * 取消定时器\r\n     * @param callback \r\n     * @param target \r\n     */\r\n    unregister(callback: ICallback, target?: unknown): void {\r\n        if (typeof target === 'undefined') {\r\n            this.intervalTimer = this.intervalTimer.filter(\r\n                timer => timer.callback !== callback\r\n            );\r\n        } else {\r\n            this.intervalTimer = this.intervalTimer.filter(\r\n                timer => !(timer.callback === callback && timer.target === target)\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 取消所有定时器\r\n     */\r\n    unregisterAll() {\r\n        this.intervalTimer = [];\r\n    }\r\n\r\n    private dailyTimers: DailyTimer[] = [];\r\n\r\n    /**\r\n     * 注册每日触发器\r\n     * @param time 24小时制,精确到秒\r\n     * \r\n     * @example\r\n     * registerDailyTrigger('16', ...) 等同于 registerDailyTrigger('16-17', ...)\r\n     * registerDailyTrigger('8-9:00', ...) 等同于 registerDailyTrigger('8', ...)\r\n     * registerDailyTrigger('8:00:01-24', ...)\r\n     */\r\n    registerDailyTrigger(\r\n        time: string,\r\n        callback: ICallback,\r\n        target?: unknown,\r\n        once?: boolean\r\n    ) {\r\n        const timer = new DailyTimer(time, callback, target, once || false);\r\n        this.dailyTimers.push(timer);\r\n    }\r\n\r\n    /**\r\n     * 取消每日触发器\r\n     */\r\n    unregisterDailyTrigger(callback: ICallback, target?: unknown) {\r\n        if (typeof target === 'undefined') {\r\n            this.dailyTimers = this.dailyTimers.filter(\r\n                timer => timer.callback !== callback\r\n            );\r\n        } else {\r\n            this.dailyTimers = this.dailyTimers.filter(\r\n                timer => !(timer.callback === callback && timer.target === target)\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 取消所有每日触发器\r\n     */\r\n    unregisterAllDailyTrigger() {\r\n        this.dailyTimers = [];\r\n    }\r\n\r\n    /**\r\n     * 清除所有定时器和触发器\r\n     */\r\n    clear() {\r\n        this.intervalTimer = [];\r\n        this.dailyTimers = [];\r\n    }\r\n\r\n    protected update(dt: number): void {\r\n        for (let index = 0; index < this.intervalTimer.length; index++) {\r\n            const timer = this.intervalTimer[index];\r\n            if (timer.update(dt)) {\r\n                this.intervalTimer.splice(index, 1);\r\n                index--;\r\n            }\r\n        }\r\n\r\n        const date = new Date();\r\n        for (let index = 0; index < this.dailyTimers.length; index++) {\r\n            const timer = this.dailyTimers[index];\r\n            if (timer.update(date)) {\r\n                this.dailyTimers.splice(index, 1);\r\n                index--;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@ccclass('TimerManager')\r\nexport default class TimerManager extends BaseManager {\r\n    private timers: Map<string | number, Timer> = new Map();\r\n\r\n    /**\r\n     * 清除所有定时器\r\n     */\r\n    clear() {\r\n        this.timers.forEach((timer) => {\r\n            timer.clear();\r\n        });\r\n        this.timers.clear();\r\n    }\r\n\r\n    /**\r\n     * 删除定时器\r\n     * @param key 定时器key\r\n     */\r\n    delete(key: string | number) {\r\n        const timer = this.timers.get(key);\r\n        if (!timer) return;\r\n\r\n        this.timers.delete(key);\r\n        timer.clear();\r\n    }\r\n\r\n    /**\r\n     * 获取定时器\r\n     * @param key 定时器key\r\n     */\r\n    get(key: string | number): Timer {\r\n        if (this.timers.has(key)) {\r\n            return this.timers.get(key);\r\n        }\r\n\r\n        const timer = new Timer();\r\n        this.timers.set(key, timer);\r\n        return timer;\r\n    }\r\n\r\n    protected update(dt: number): void {\r\n        this.timers.forEach((timer) => {\r\n            Timer.update(timer, dt);\r\n        });\r\n    }\r\n}\r\n","import { Asset, AssetManager, Camera, Canvas, Component, Event, Layers, Node, Prefab, RenderTexture, ResolutionPolicy, Scene, SceneAsset, Settings, UITransform, Widget, _decorator, director, instantiate, isValid, js, screen, settings, size, view } from 'cc';\r\nimport { DEV } from 'cc/env';\r\nimport { IMiniViewName, IViewName } from '../../../../../assets/app-builtin/app-admin/executor';\r\nimport Core from '../../Core';\r\nimport BaseManager from '../../base/BaseManager';\r\nimport BaseView, { IHideParamOnHide, IShade, IShowParamAttr, IShowParamOnHide, IShowParamOnShow, IViewType, ViewType } from '../../base/BaseView';\r\nimport UIMgrLoading from './comp/UIMgrLoading';\r\nimport UIMgrShade from './comp/UIMgrShade';\r\nimport UIMgrToast from './comp/UIMgrToast';\r\nimport UIMgrZOrder from './comp/UIMgrZOrder';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\ninterface IShowParams<T, IShow = any, IShowReturn = any, IHideReturn = any> {\r\n    /**UI名 */\r\n    name: T,\r\n    /**\r\n     * 数据\r\n     * - 被onShow接收\r\n     */\r\n    data?: IShow,\r\n    /**\r\n     * 是否将UI显示在最上 \r\n     * - 默认true\r\n     */\r\n    top?: boolean,\r\n    /**\r\n     * 队列模式，一个UI关闭后，是否展示下一个UI\r\n     * - join: 排队 \r\n     * - jump: 插队(到首位)\r\n     */\r\n    queue?: 'join' | 'jump',\r\n    /**静默 默认false(不显示加载loading，也不屏蔽触摸) */\r\n    silent?: boolean,\r\n    /**UI触发onShow后 */\r\n    onShow?: IShowParamOnShow<IShowReturn>,\r\n    /**UI触发onHide后 */\r\n    onHide?: IShowParamOnHide<IHideReturn>,\r\n    /**当code的值为ErrorCode.LogicError时，如果返回true，则自动重试 */\r\n    onError?: (result: string, code: ErrorCode) => true | void,\r\n    /**\r\n     * @private\r\n     * @deprecated\r\n     */\r\n    attr?: IShowParamAttr,\r\n}\r\n\r\ninterface IShowAsyncParams<T, IShow = any, IShowReturn = any> {\r\n    /**UI名 */\r\n    name: T,\r\n    /**\r\n     * 数据\r\n     * - 被onShow接收\r\n     */\r\n    data?: IShow,\r\n    /**\r\n     * 是否将UI显示在最上 \r\n     * - 默认true\r\n     */\r\n    top?: boolean,\r\n    /**\r\n     * 队列模式，一个UI关闭后，是否展示下一个UI\r\n     * - join: 排队 \r\n     * - jump: 插队(到首位)\r\n     */\r\n    queue?: 'join' | 'jump',\r\n    /**静默 默认false(不显示加载loading，也不屏蔽触摸) */\r\n    silent?: boolean,\r\n    /**UI触发onShow后 */\r\n    onShow?: IShowParamOnShow<IShowReturn>,\r\n    /**当code的值为ErrorCode.LogicError时，如果返回true，则自动重试 */\r\n    onError?: (result: string, code: ErrorCode) => true | void,\r\n    /**\r\n     * @private\r\n     * @deprecated\r\n     */\r\n    attr?: IShowParamAttr,\r\n}\r\n\r\ninterface IHideParams<T, IHide = any, IHideReturn = any> {\r\n    name: T,\r\n    data?: IHide,\r\n    onHide?: IHideParamOnHide<IHideReturn>\r\n}\r\n\r\nconst UIScene = 'UIScene';\r\nconst UserInterfacePath = 'UserInterface';\r\nconst ViewTypes = [ViewType.Page, ViewType.Paper, ViewType.Pop, ViewType.Top];\r\n\r\nconst BlockEvents = [\r\n    Node.EventType.TOUCH_START, Node.EventType.TOUCH_MOVE, Node.EventType.TOUCH_END, Node.EventType.TOUCH_CANCEL,\r\n    Node.EventType.MOUSE_DOWN, Node.EventType.MOUSE_MOVE, Node.EventType.MOUSE_UP,\r\n    Node.EventType.MOUSE_ENTER, Node.EventType.MOUSE_LEAVE, Node.EventType.MOUSE_WHEEL\r\n];\r\n\r\n/**\r\n * 错误码\r\n */\r\nenum ErrorCode {\r\n    /**加载失败 */\r\n    LoadError,\r\n    /**beforeShow返回错误 */\r\n    LogicError,\r\n    /**UI无效(UI的isViewValid返回false) */\r\n    InvalidError,\r\n}\r\n\r\n/**\r\n * 界面名字枚举\r\n */\r\nconst ViewName: { [key in IViewName]: key } = new Proxy({} as any, {\r\n    get: function (target, key) {\r\n        if (target[key]) return target[key];\r\n        target[key] = key;\r\n        return key;\r\n    }\r\n});\r\n\r\n/**\r\n * 子界面名字枚举\r\n */\r\nconst MiniViewName: { [key in IMiniViewName]: key } = new Proxy({} as any, {\r\n    get: function (target, key) {\r\n        if (target[key]) return target[key];\r\n        target[key] = key;\r\n        return key;\r\n    }\r\n});\r\n\r\n/**\r\n * 将串式命名转成驼峰命名\r\n * @param str 串式字符串\r\n * @param lower 首字母是否小写(默认大写)\r\n * @returns \r\n */\r\nfunction stringCase(str: string, lower = false) {\r\n    str = str.replace(/-/g, '_');\r\n    const arr = str.split('_');\r\n\r\n    return arr.map(function (str, index) {\r\n        if (index === 0 && lower) {\r\n            return str.charAt(0).toLocaleLowerCase() + str.slice(1);\r\n        }\r\n        return str.charAt(0).toLocaleUpperCase() + str.slice(1);\r\n    }).join('');\r\n}\r\n\r\n/**\r\n * 将驼峰命名转成串式命名\r\n * @param str 驼峰字符串\r\n * @returns \r\n */\r\nfunction stringCaseNegate(str: string) {\r\n    return str.replace(/[A-Z]/g, (searchStr, startIndex) => {\r\n        if (startIndex === 0) {\r\n            return searchStr.toLocaleLowerCase();\r\n        } else {\r\n            return '-' + searchStr.toLocaleLowerCase();\r\n        }\r\n    });\r\n}\r\n\r\n@ccclass('UIManager')\r\nexport default class UIManager<UIName extends string, MiniName extends string> extends BaseManager {\r\n    /**静态设置 */\r\n    static setting: {\r\n        /**预加载列表，会在UI初始化阶段进行 */\r\n        preload?: (IViewName | IMiniViewName | Array<IViewName | IMiniViewName>)[],\r\n        /**默认UI，框架初始化完毕后会自动加载 */\r\n        defaultUI?: IViewName,\r\n        /**给默认UI传递的数据 */\r\n        defaultData?: any,\r\n        /**弹窗背景遮罩的参数 */\r\n        shade?: IShade,\r\n        /**\r\n         * 是否自动适配分辨率策略\r\n         * - 开启后会弃用当前的适配策略，并根据实际设备分辨率与设计分辨率的比值，计算出新的适配策略(宽适配或高适配)，保证游戏区域不会被裁减只会扩边\r\n         *   - 当实际设备分辨率「高/宽」>= 设计分辨率「高/宽」时，为宽适配\r\n         *   - 当实际设备分辨率「高/宽」< 设计分辨率「高/宽」时，为高适配\r\n         */\r\n        autoFit?: boolean,\r\n    } = {};\r\n\r\n    /**错误码 */\r\n    static ErrorCode = ErrorCode;\r\n\r\n    /**界面名字枚举 */\r\n    static ViewName = ViewName;\r\n\r\n    /**子界面名字枚举 */\r\n    static MiniViewName = MiniViewName;\r\n\r\n    @property({\r\n        type: Prefab,\r\n        tooltip: '位置: app://manager/ui/prefab/UIMgrLoading'\r\n    })\r\n    private loadingPre: Prefab = null;\r\n\r\n    @property({\r\n        type: Prefab,\r\n        tooltip: '位置: app://manager/ui/prefab/UIMgrShade'\r\n    })\r\n    private shadePre: Prefab = null;\r\n\r\n    @property({\r\n        type: Prefab,\r\n        tooltip: '位置: app://manager/ui/prefab/UIMgrToast'\r\n    })\r\n    private toastPre: Prefab = null;\r\n\r\n    // UI根节点\r\n    private UserInterface: Node = null;\r\n\r\n    // 加载和遮罩节点\r\n    private loading: Node = null;\r\n    private shade: Node = null;\r\n    private toast: Node = null;\r\n\r\n    private defaultUI: UIName = null;\r\n    private defaultData: string = '';\r\n\r\n    private currScene: string = '';\r\n    private currPage: BaseView = null;\r\n    private currFocus: BaseView = null;\r\n\r\n    // 预制体缓存\r\n    private prefabCache: { [name in string]: Prefab } = {};\r\n    private sceneCache: { [name in string]: SceneAsset } = {};\r\n\r\n    // 全局触摸有效\r\n    private touchEnabled: boolean = true;\r\n\r\n    // 记录触摸屏蔽\r\n    private touchMaskMap = new Map<string, boolean>();\r\n    // 记录展示加载\r\n    private showLoadingMap = new Map<string, boolean>();\r\n\r\n    // 记录正在加载中的有效的ui\r\n    private uiLoadingMap: Map<UIName, string[]> = new Map();\r\n    // 记录正在展示中的有效的ui\r\n    private uiShowingMap: Map<BaseView, UIName> = new Map();\r\n\r\n    private showQueue: IShowParams<UIName>[] = [];\r\n\r\n    /**UI根节点 */\r\n    public get root() {\r\n        return this.node.parent.parent;\r\n    }\r\n\r\n    /**相机 */\r\n    public get camera() {\r\n        return this.canvas.cameraComponent;\r\n    }\r\n\r\n    /**画布*/\r\n    public get canvas() {\r\n        return this.root.getComponent(Canvas);\r\n    }\r\n\r\n    protected init(finish: Function) {\r\n        const setting = UIManager.setting;\r\n\r\n        this.defaultUI = setting.defaultUI as UIName;\r\n        this.defaultData = setting.defaultData;\r\n\r\n        super.init(finish);\r\n\r\n        // 预加载,符合AnyTask规则\r\n        if (setting.preload?.length) {\r\n            const task = Core.inst.lib.task.createAny();\r\n            setting.preload.forEach((preload) => {\r\n                if (preload instanceof Array) {\r\n                    task.add(preload.map(name => {\r\n                        return next => this.preload(name as any, next);\r\n                    }));\r\n                } else {\r\n                    task.add(next => this.preload(preload as any, next));\r\n                }\r\n            });\r\n            task.start();\r\n        }\r\n    }\r\n\r\n    protected onLoad() {\r\n        this.UserInterface = this.root.getChildByName(UserInterfacePath);\r\n\r\n        this.root.getComponentsInChildren(Camera).forEach(camera => {\r\n            // 避免camera.priority<0的情况，否则会造成渲染异常\r\n            if (camera.priority < 0) camera.priority = 0;\r\n            // 避免camera.far<=camera.near的情况，否则会造成渲染异常\r\n            if (camera.far <= camera.near) camera.far = camera.near + 1;\r\n        });\r\n        director.addPersistRootNode(this.root);\r\n\r\n        this.createTypeRoot();\r\n\r\n        this.shade = instantiate(this.shadePre);\r\n        this.shade.parent = this.UserInterface;\r\n        this.shade.active = false;\r\n        this.shade.getComponent(Widget).target = this.root;\r\n\r\n        this.loading = instantiate(this.loadingPre);\r\n        this.loading.parent = this.node;\r\n        this.loading.active = false;\r\n\r\n        // toast是后面加的，需要做容错\r\n        if (this.toastPre) {\r\n            this.toast = instantiate(this.toastPre);\r\n            this.toast.parent = this.node;\r\n        }\r\n\r\n        // 自动适配分辨率策略\r\n        if (UIManager.setting.autoFit) {\r\n            const designResolution = settings.querySettings(Settings.Category.SCREEN, 'designResolution') as { width: number, height: number, policy: number };\r\n            const windowSize = size(screen.windowSize);\r\n            let resolutionPolicy = designResolution.policy;\r\n            const autoFitResolutionPolicy = function () {\r\n                if (windowSize.width / windowSize.height > designResolution.width / designResolution.height) {\r\n                    if (resolutionPolicy === ResolutionPolicy.FIXED_HEIGHT) return;\r\n                    view.setResolutionPolicy(ResolutionPolicy.FIXED_HEIGHT);\r\n                    resolutionPolicy = ResolutionPolicy.FIXED_HEIGHT;\r\n                } else {\r\n                    if (resolutionPolicy === ResolutionPolicy.FIXED_WIDTH) return;\r\n                    view.setResolutionPolicy(ResolutionPolicy.FIXED_WIDTH);\r\n                    resolutionPolicy = ResolutionPolicy.FIXED_WIDTH;\r\n                }\r\n            };\r\n            autoFitResolutionPolicy();\r\n            this.schedule(() => {\r\n                if (windowSize.equals(screen.windowSize)) return;\r\n                windowSize.set(screen.windowSize);\r\n                autoFitResolutionPolicy();\r\n            }, 0.5);\r\n        }\r\n    }\r\n\r\n    private createTypeRoot() {\r\n        ViewTypes.forEach((type) => {\r\n            const d2 = new Node(type);\r\n            d2.layer = Layers.Enum.UI_2D;\r\n            d2.addComponent(UIMgrZOrder);\r\n            d2.parent = this.UserInterface;\r\n            d2.addComponent(UITransform);\r\n            const widget = d2.addComponent(Widget);\r\n            widget.isAlignBottom = true;\r\n            widget.isAlignLeft = true;\r\n            widget.isAlignRight = true;\r\n            widget.isAlignTop = true;\r\n            widget.top = 0;\r\n            widget.left = 0;\r\n            widget.right = 0;\r\n            widget.bottom = 0;\r\n            widget.alignMode = Widget.AlignMode.ON_WINDOW_RESIZE;\r\n\r\n            if (DEV) {\r\n                d2.on(Node.EventType.CHILD_ADDED, (child: Node) => {\r\n                    if (!child) return;\r\n                    if (child === this.shade) return;\r\n                    if (this.getBaseView(child)) return;\r\n                    this.warn(`${UserInterfacePath}/${type}下非必要请不要添加非UI节点:`, child?.name);\r\n                }, this);\r\n            }\r\n        });\r\n    }\r\n\r\n    private addTouchMaskListener() {\r\n        if (!this.touchEnabled) return;\r\n        if (this.touchMaskMap.size > 0) return;\r\n\r\n        for (let i = 0; i < BlockEvents.length; i++) {\r\n            this.root.on(BlockEvents[i], this.stopPropagation, this, true);\r\n        }\r\n    }\r\n\r\n    private removeTouchMaskListener() {\r\n        if (!this.touchEnabled) return;\r\n        if (this.touchMaskMap.size > 0) return;\r\n\r\n        for (let i = 0; i < BlockEvents.length; i++) {\r\n            this.root.off(BlockEvents[i], this.stopPropagation, this, true);\r\n        }\r\n    }\r\n\r\n    private stopPropagation(event: Event) {\r\n        if (!this.touchEnabled || this.touchMaskMap.size > 0) {\r\n            event.propagationStopped = true;\r\n            if (event.type !== Node.EventType.MOUSE_MOVE) {\r\n                this.log('屏蔽触摸');\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取一个节点上的BaseView组件, 获取不到返回null\r\n     */\r\n    private getBaseView(node: Node): BaseView {\r\n        if (!node) return null;\r\n        return node.components.find(component => component instanceof BaseView) as BaseView;\r\n    }\r\n\r\n    /**\r\n     * 在所有父节点中找到一个最近的view组件\r\n     * @param target \r\n     * @returns \r\n     */\r\n    private getViewInParents(target: Node) {\r\n        let node = target;\r\n        let com: BaseView = null;\r\n\r\n        while (node.parent && !(node.parent instanceof Scene)) {\r\n            com = this.getBaseView(node.parent);\r\n            if (!com) {\r\n                node = node.parent;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n        return com;\r\n    }\r\n\r\n    /**\r\n     * 在子节点中找到一个最近的view组件\r\n     * @param target \r\n     * @returns \r\n     */\r\n    private getViewInChildren(target: Node) {\r\n        for (let index = 0; index < target.children.length; index++) {\r\n            const node = target.children[index];\r\n            const com = this.getBaseView(node);\r\n            if (com) return com;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * 根据UI名字获取它的脚本类\r\n     */\r\n    private getUIClass(name: string): typeof BaseView {\r\n        return js.getClassByName(name) as (typeof BaseView);\r\n    }\r\n\r\n    /**\r\n     * 根据UI名字获取UI路径\r\n     * @param name ui名字\r\n     * @returns \r\n     */\r\n    private getUIPath(name: string) {\r\n        return name;\r\n    }\r\n\r\n    /**\r\n     * 获取前缀\r\n     * @param name    ui名字\r\n     */\r\n    private getUIPrefix(name: string): ViewType {\r\n        for (let index = 0; index < ViewTypes.length; index++) {\r\n            const typeName = ViewTypes[index];\r\n            if (name.indexOf(typeName) === 0) {\r\n                return typeName;\r\n            }\r\n        }\r\n        this.error('getUIPrefix', `${name}`);\r\n    }\r\n\r\n    /**\r\n     * 根据UI名字查询父节点\r\n     * @param name    ui名字\r\n     */\r\n    private getUIParent(name: string): Node {\r\n        if (this.currScene === name) {\r\n            return director.getScene();\r\n        }\r\n\r\n        const prefix = this.getUIPrefix(name);\r\n        for (let index = 0; index < ViewTypes.length; index++) {\r\n            const viewType = ViewTypes[index];\r\n            if (viewType === prefix) {\r\n                return this.UserInterface.getChildByName(viewType);\r\n            }\r\n        }\r\n\r\n        this.error('getUIParent', `找不到${name}对应的Parent`);\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * 根据UI名字获取场景内的节点\r\n     * @param name    ui名字\r\n     */\r\n    private getUIInScene(name: string): Node;\r\n    private getUIInScene(name: string, multiple: false): Node;\r\n    private getUIInScene(name: string, multiple: true): Node[];\r\n    private getUIInScene(name: string, multiple = false) {\r\n        const parent = this.getUIParent(name);\r\n\r\n        if (multiple) {\r\n            const result = parent.children.filter(node => node.name === name);\r\n            if (result.length) return result.filter(node => isValid(node, true));\r\n        } else {\r\n            const result = parent.children.find(node => node.name === name);\r\n            if (result) return isValid(result, true) ? result : null;\r\n        }\r\n\r\n        return multiple ? [] : null;\r\n    }\r\n\r\n    /**\r\n     * 根据UI名字获取展示中的节点\r\n     * @param name    ui名字\r\n     */\r\n    private getUIInShowing(name: string): Node;\r\n    private getUIInShowing(name: string, multiple: false): Node;\r\n    private getUIInShowing(name: string, multiple: true): Node[];\r\n    private getUIInShowing(name: string, multiple = false) {\r\n        if (multiple) {\r\n            const result: Node[] = [];\r\n            this.uiShowingMap.forEach((_name, com) => {\r\n                if (_name === name) result.push(com.node);\r\n            });\r\n            return result;\r\n        } else {\r\n            let result: Node = null;\r\n            this.uiShowingMap.forEach((_name, com) => {\r\n                if (!result && _name === name) result = com.node;\r\n            });\r\n            return result;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取UI骨架Bundle名字\r\n     * @deprecated 将会移除，请改为其它方案\r\n     */\r\n    public getNativeBundleName(uiName: UIName | MiniName) {\r\n        // 兼容旧版本\r\n        const oldBundleName = `app-view_${uiName}`;\r\n        const projectBundles = settings.querySettings(Settings.Category.ASSETS, 'projectBundles') as string[];\r\n        if (projectBundles && projectBundles.indexOf(oldBundleName) >= 0) {\r\n            return oldBundleName;\r\n        }\r\n\r\n        return stringCaseNegate(uiName);\r\n    }\r\n\r\n    /**\r\n     * 获取UI资源Bundle名字\r\n     * @deprecated 将会移除，请改为其它方案\r\n     */\r\n    public getResBundleName(uiName: UIName | MiniName) {\r\n        // 兼容旧版本\r\n        const oldBundleName = `app-view_${uiName}_Res`;\r\n        const projectBundles = settings.querySettings(Settings.Category.ASSETS, 'projectBundles') as string[];\r\n        if (projectBundles && projectBundles.indexOf(oldBundleName) >= 0) {\r\n            return oldBundleName;\r\n        }\r\n\r\n        return `${stringCaseNegate(uiName)}-res`;\r\n    }\r\n\r\n    /**\r\n     * 初始化Bundle\r\n     */\r\n    private initBundle(name: UIName | MiniName, onFinish: (result: [AssetManager.Bundle, AssetManager.Bundle]) => any) {\r\n        Core.inst.lib.task.createASync<[AssetManager.Bundle, AssetManager.Bundle]>()\r\n            .add((next) => {\r\n                Core.inst.manager.loader.loadBundle({\r\n                    bundle: this.getNativeBundleName(name),\r\n                    onComplete: next\r\n                });\r\n            })\r\n            .add((next) => {\r\n                Core.inst.manager.loader.loadBundle({\r\n                    bundle: this.getResBundleName(name),\r\n                    onComplete: next\r\n                });\r\n            })\r\n            .start(onFinish);\r\n    }\r\n\r\n    /**\r\n     * 安装UI\r\n     */\r\n    private installUI(name: UIName | MiniName, complete?: (result: Prefab | SceneAsset | null) => any, progress?: (finish: number, total: number, item: AssetManager.RequestItem) => void) {\r\n        if (this.sceneCache[name]) {\r\n            complete && setTimeout(() => {\r\n                if (!isValid(this)) return;\r\n                complete(this.sceneCache[name]);\r\n            });\r\n            return;\r\n        } else if (this.prefabCache[name]) {\r\n            complete && setTimeout(() => {\r\n                if (!isValid(this)) return;\r\n                complete(this.prefabCache[name]);\r\n            });\r\n            return;\r\n        }\r\n\r\n        const task = Core.inst.lib.task.createSync<[[AssetManager.Bundle, AssetManager.Bundle], Prefab | SceneAsset]>()\r\n            .add(next => {\r\n                this.initBundle(name, next);\r\n            })\r\n            .add((next) => {\r\n                // 失败\r\n                const uiBundles = task.results[0];\r\n                if (!uiBundles || !uiBundles[0] || !uiBundles[1]) return next(null);\r\n\r\n                const isScene = uiBundles[0].getSceneInfo(name);\r\n                Core.inst.manager.loader.load({\r\n                    bundle: this.getNativeBundleName(name),\r\n                    path: this.getUIPath(name),\r\n                    type: isScene ? SceneAsset : Prefab,\r\n                    onProgress: progress,\r\n                    onComplete: next\r\n                });\r\n            })\r\n            .start((results) => {\r\n                if (!isValid(this)) return;\r\n                // 验证缓存\r\n                const cache = this.sceneCache[name] || this.prefabCache[name];\r\n                if (cache) {\r\n                    return complete && complete(cache);\r\n                }\r\n                // 验证有效\r\n                const asset = results[1];\r\n                if (!asset) {\r\n                    return complete && complete(null);\r\n                }\r\n                // 添加引用计数\r\n                asset.addRef();\r\n                // 添加缓存\r\n                if (asset instanceof Prefab) {\r\n                    this.prefabCache[name] = asset;\r\n                } else {\r\n                    this.sceneCache[name] = asset;\r\n                }\r\n                this.log(`加载: ${name}`);\r\n                return complete && complete(asset);\r\n            });\r\n    }\r\n\r\n    /**\r\n     * 卸载UI\r\n     */\r\n    private uninstallUI(name: UIName | MiniName) {\r\n        if (this.sceneCache[name]) {\r\n            // 释放引用计数\r\n            this.sceneCache[name].decRef();\r\n            // 删除缓存\r\n            delete this.sceneCache[name];\r\n        } else if (this.prefabCache[name]) {\r\n            // 释放引用计数\r\n            this.prefabCache[name].decRef();\r\n            // 删除缓存\r\n            delete this.prefabCache[name];\r\n        }\r\n\r\n        const resBundle = this.getResBundleName(name);\r\n        const naBundle = this.getNativeBundleName(name);\r\n        Core.inst.manager.loader.releaseAll(resBundle);\r\n        Core.inst.manager.loader.releaseAll(naBundle);\r\n        Core.inst.manager.loader.removeBundle(resBundle);\r\n        Core.inst.manager.loader.removeBundle(naBundle);\r\n        this.log(`卸载: ${name}`);\r\n    }\r\n\r\n    /**\r\n     * 加载ui内部资源\r\n     */\r\n    public loadRes<T extends typeof Asset>(target: Component, path: string, type: T, callback?: (item: InstanceType<T> | null) => any) {\r\n        if (typeof target === 'string') {\r\n            Core.inst.manager.loader.load({\r\n                bundle: this.getResBundleName(target),\r\n                path: path,\r\n                type: type,\r\n                onComplete: callback\r\n            });\r\n        } else {\r\n            const view = this.getBaseView(target.node) || this.getViewInParents(target.node) || this.getViewInChildren(director.getScene());\r\n            if (view) {\r\n                Core.inst.manager.loader.load({\r\n                    bundle: this.getResBundleName(view.viewName as UIName | MiniName),\r\n                    path: path,\r\n                    type: type,\r\n                    onComplete: callback\r\n                });\r\n            } else {\r\n                this.error('loadRes', target.name, path);\r\n                callback && callback(null);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 预加载ui内部资源\r\n     */\r\n    public preloadRes<T extends typeof Asset>(target: Component | UIName | MiniName, path: string, type: T, complete?: (item: AssetManager.RequestItem[] | null) => any) {\r\n        if (typeof target === 'string') {\r\n            Core.inst.manager.loader.preload({\r\n                bundle: this.getResBundleName(target),\r\n                path: path,\r\n                type: type,\r\n                onComplete: complete\r\n            });\r\n        } else {\r\n            const view = this.getBaseView(target.node) || this.getViewInParents(target.node) || this.getViewInChildren(director.getScene());\r\n            if (view) {\r\n                Core.inst.manager.loader.preload({\r\n                    bundle: this.getResBundleName(view.viewName as UIName | MiniName),\r\n                    path: path,\r\n                    type: type,\r\n                    onComplete: complete\r\n                });\r\n            } else {\r\n                this.error('preloadRes', target.name, path);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 加载ui内部资源\r\n     */\r\n    public loadResDir<T extends typeof Asset>(target: Component, path: string, type: T, callback?: (items: InstanceType<T>[] | null) => any) {\r\n        if (typeof target === 'string') {\r\n            Core.inst.manager.loader.loadDir({\r\n                bundle: this.getResBundleName(target),\r\n                path: path,\r\n                type: type,\r\n                onComplete: callback\r\n            });\r\n        } else {\r\n            const view = this.getBaseView(target.node) || this.getViewInParents(target.node) || this.getViewInChildren(director.getScene());\r\n            if (view) {\r\n                Core.inst.manager.loader.loadDir({\r\n                    bundle: this.getResBundleName(view.viewName as UIName | MiniName),\r\n                    path: path,\r\n                    type: type,\r\n                    onComplete: callback\r\n                });\r\n            } else {\r\n                this.error('loadResDir', target.name, path);\r\n                callback && callback([]);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 预加载ui内部资源\r\n     */\r\n    public preloadResDir<T extends typeof Asset>(target: Component | UIName | MiniName, path: string, type: T, complete?: (item: AssetManager.RequestItem[] | null) => any) {\r\n        if (typeof target === 'string') {\r\n            Core.inst.manager.loader.preloadDir({\r\n                bundle: this.getResBundleName(target),\r\n                path: path,\r\n                type: type,\r\n                onComplete: complete\r\n            });\r\n        } else {\r\n            const view = this.getBaseView(target.node) || this.getViewInParents(target.node) || this.getViewInChildren(director.getScene());\r\n            if (view) {\r\n                Core.inst.manager.loader.preloadDir({\r\n                    bundle: this.getResBundleName(view.viewName as UIName | MiniName),\r\n                    path: path,\r\n                    type: type,\r\n                    onComplete: complete\r\n                });\r\n            } else {\r\n                this.error('preloadResDir', target.name, path);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 预加载UI\r\n     */\r\n    public preload(name: UIName | MiniName, complete?: (item: AssetManager.RequestItem[] | null) => any) {\r\n        // 验证name是否为真\r\n        if (!name) {\r\n            this.error('preload', 'fail');\r\n            complete && setTimeout(function () {\r\n                if (!isValid(this)) return;\r\n                complete(null);\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.initBundle(name, ([naBundle]) => {\r\n            const isScene = naBundle.getSceneInfo(name);\r\n            Core.inst.manager.loader.preload({\r\n                bundle: this.getNativeBundleName(name),\r\n                path: this.getUIPath(name),\r\n                type: isScene ? SceneAsset : Prefab,\r\n                onComplete: complete\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 加载UI\r\n     */\r\n    public load(name: UIName | MiniName): void;\r\n    public load(name: UIName | MiniName, complete: (result: Prefab | SceneAsset | null) => any): void;\r\n    public load(name: UIName | MiniName, progress: (finish: number, total: number, item: AssetManager.RequestItem) => void, complete: (result: Prefab | SceneAsset | null) => any): void;\r\n    public load(name: UIName | MiniName, ...args: Function[]): void {\r\n        const progress = (args[1] && args[0]) as (finish: number, total: number, item: AssetManager.RequestItem) => void;\r\n        const complete = (args[1] || args[0]) as (result: any) => any;\r\n\r\n        // 验证name是否为真\r\n        if (!name) {\r\n            this.error('load', 'fail');\r\n            complete && setTimeout(function () {\r\n                if (!isValid(this)) return;\r\n                complete(null);\r\n            });\r\n            return;\r\n        }\r\n\r\n        // 异步加载\r\n        this.installUI(name, (result) => {\r\n            if (!result) return complete && complete(null);\r\n            return complete && complete(result);\r\n        }, progress);\r\n    }\r\n\r\n    /**\r\n     * 销毁UI，释放资源\r\n     * - 直接销毁，不管是否是show状态\r\n     * - 此流程一定是同步的\r\n     */\r\n    public release(nameOrCom: UIName | MiniName | BaseView) {\r\n        const uiName = typeof nameOrCom === 'string' ? nameOrCom : nameOrCom.viewName;\r\n\r\n        if (!uiName) {\r\n            this.error('release', `${nameOrCom} fail`);\r\n            return;\r\n        }\r\n\r\n        // 传入字符串是释放所有\r\n        if (typeof nameOrCom === 'string') {\r\n            this.getUIInScene(uiName, true).forEach((node) => {\r\n                const com = this.getBaseView(node);\r\n                if (!com) {\r\n                    this.error('release', `${uiName}不存在BaseView组件`);\r\n                    return;\r\n                }\r\n\r\n                if (com.isShow) {\r\n                    this.warn('release', `${uiName}正处于show状态, 此处将直接销毁`);\r\n                }\r\n                if (com === this.currPage) {\r\n                    this.currPage = null;\r\n                }\r\n                if (com === this.currFocus) {\r\n                    this.currFocus = null;\r\n                }\r\n\r\n                this.uiShowingMap.delete(com);\r\n\r\n                if (node && isValid(node, true)) {\r\n                    node.parent = null;\r\n                    node.destroy();\r\n                }\r\n            });\r\n        }\r\n        // 传入组件是释放单个\r\n        else {\r\n            if (nameOrCom.isShow) {\r\n                this.warn('release', `${uiName}正处于show状态, 此处将直接销毁`);\r\n            }\r\n            if (nameOrCom === this.currPage) {\r\n                this.currPage = null;\r\n            }\r\n            if (nameOrCom === this.currFocus) {\r\n                this.currFocus = null;\r\n            }\r\n\r\n            this.uiShowingMap.delete(nameOrCom);\r\n\r\n            const node = nameOrCom.node;\r\n            if (node && isValid(node, true)) {\r\n                node.parent = null;\r\n                node.destroy();\r\n            }\r\n        }\r\n\r\n        // 当全部释放时才清除缓存\r\n        const nodes = this.getUIInScene(uiName, true);\r\n        if (nodes.length === 0 || nodes.every(node => !isValid(node, true))) {\r\n            this.uninstallUI(uiName as UIName | MiniName);\r\n            this.log(`释放资源: ${uiName}`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 销毁全部UI，释放资源\r\n     * - 直接销毁，不管是否是show状态\r\n     * - 此流程一定是同步的\r\n     */\r\n    public releaseAll(exclude?: UIName[]) {\r\n        Object.keys(this.prefabCache).forEach((name: UIName) => {\r\n            if (exclude && exclude.indexOf(name) !== -1) return;\r\n            this.release(name);\r\n        });\r\n        Object.keys(this.sceneCache).forEach((name: UIName) => {\r\n            if (exclude && exclude.indexOf(name) !== -1) return;\r\n            this.release(name);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 检查UI是否有效\r\n     * - -1: 加载失败\r\n     * - 0: UI无效\r\n     * - 1: UI有效\r\n     */\r\n    private checkUIValid(name: UIName | MiniName, data: any, callback: (valid: -1 | 0 | 1) => any) {\r\n        this.installUI(name, (result) => {\r\n            if (!result) return callback(-1);\r\n            const View = this.getUIClass(name);\r\n            if (!View) return callback(0);\r\n            if (!View.isViewValid) return callback(1);\r\n            View.isViewValid((valid: boolean) => {\r\n                callback(valid ? 1 : 0);\r\n            }, data);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 更新阴影的层级及显示\r\n     */\r\n    public refreshShade() {\r\n        // 借助refreshShade实现onFocus、onLostFocus(onFocus不会被每次都触发，只有产生变化时才触发)\r\n        let onFocus = false;\r\n        // 倒序遍历uiRoots\r\n        let uiRoots = this.UserInterface.children;\r\n        for (let index = uiRoots.length - 1; index >= 0; index--) {\r\n            const uiRoot = uiRoots[index];\r\n            if (uiRoot !== this.shade && uiRoot !== this.loading) {\r\n                // 倒序遍历uiRoot\r\n                let children = uiRoot.children;\r\n                for (let i = children.length - 1; i >= 0; i--) {\r\n                    const node = children[i];\r\n                    if (node === this.shade) continue;\r\n\r\n                    const com = this.getBaseView(node);\r\n                    if (!com) continue;\r\n\r\n                    // 触发onFocus\r\n                    if (!onFocus && com.isCaptureFocus && com.isShow) {\r\n                        onFocus = true;\r\n                        if (this.currFocus !== com) {\r\n                            isValid(this.currFocus, true) && this.currFocus.constructor.prototype.focus.call(this.currFocus, false);\r\n                            this.currFocus = com;\r\n                            this.currFocus.constructor.prototype.focus.call(this.currFocus, true);\r\n                        }\r\n                    }\r\n                    // 添加遮罩\r\n                    if (com.isNeedShade && com.isShow) {\r\n                        const shadeSetting = Object.assign({}, UIManager.setting.shade, com.constructor.prototype.onShade.call(com));\r\n                        if (shadeSetting.blur) {\r\n                            this.shade.getComponent(UIMgrShade).init(0, 255, 255, 0, true);\r\n                        } else {\r\n                            this.shade.getComponent(UIMgrShade).init(\r\n                                typeof shadeSetting.delay !== 'number' ? 0 : shadeSetting.delay,\r\n                                typeof shadeSetting.begin !== 'number' ? 60 : shadeSetting.begin,\r\n                                typeof shadeSetting.end !== 'number' ? 180 : shadeSetting.end,\r\n                                typeof shadeSetting.speed !== 'number' ? 100 : shadeSetting.speed,\r\n                                false,\r\n                            );\r\n                        }\r\n                        this.shade.layer = node.layer;\r\n                        this.shade.parent = uiRoot;\r\n                        this.shade.active = true;\r\n                        // 以z坐标来代替2.x时代的zIndex\r\n                        this.shade.setPosition(this.shade.position.x, this.shade.position.y, node.position.z);\r\n\r\n                        let shadeIndex = this.shade.getSiblingIndex();\r\n                        let nodeIndex = node.getSiblingIndex();\r\n                        if (shadeIndex > nodeIndex) {\r\n                            this.shade.setSiblingIndex(nodeIndex);\r\n                        } else {\r\n                            this.shade.setSiblingIndex(nodeIndex - 1);\r\n                        }\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        this.shade.active = false;\r\n        this.shade.getComponent(UIMgrShade).clear();\r\n        if (!onFocus) {\r\n            isValid(this.currFocus, true) && this.currFocus.constructor.prototype.focus.call(this.currFocus, false);\r\n            this.currFocus = null;\r\n        }\r\n    }\r\n\r\n    // 解析prefab\r\n    private parsingPrefab(prefab: Prefab, name: string) {\r\n        if (!prefab) return null;\r\n\r\n        const node = instantiate(prefab);\r\n\r\n        node.active = false;\r\n        if (node.name !== name) {\r\n            this.warn('parsingPrefab', `节点名与UI名不一致, 已重置为UI名: ${this.getUIPath(name)}`);\r\n            node.name = name;\r\n        }\r\n\r\n        node.parent = this.getUIParent(name);\r\n        node.getComponent(Widget)?.updateAlignment();\r\n        return node;\r\n    }\r\n\r\n    // 解析scene\r\n    private parsingScene(asset: SceneAsset, name: string) {\r\n        if (!asset || !asset.scene) return null;\r\n\r\n        if (asset.scene.name !== name) {\r\n            this.warn('parsingScene', `场景名与UI名不一致, 已重置为UI名: ${this.getUIPath(name)}`);\r\n            asset.scene.name = name;\r\n        }\r\n\r\n        const view = this.getViewInChildren(asset.scene);\r\n        if (!view) {\r\n            this.error('parsingScene', `解析场景时未查询到根节点存在BaseView: ${this.getUIPath(name)}`);\r\n            return null;\r\n        }\r\n\r\n        view.node.active = false;\r\n        if (view.node.name !== name) {\r\n            this.warn('parsingScene', `节点名与UI名不一致, 已重置为UI名: ${this.getUIPath(name)}`);\r\n            view.node.name = name;\r\n        }\r\n        return view.node;\r\n    }\r\n\r\n    private addUILoadingUuid(name: UIName, loadingUuid?: string) {\r\n        const uuid = loadingUuid || this.createUUID();\r\n        if (!this.uiLoadingMap.has(name)) {\r\n            this.uiLoadingMap.set(name, [uuid]);\r\n        } else {\r\n            this.uiLoadingMap.get(name).push(uuid);\r\n        }\r\n        return uuid;\r\n    }\r\n\r\n    private removeUILoadingUuid(name: UIName, uuid: string) {\r\n        if (!this.uiLoadingMap.has(name)) return false;\r\n        const index = this.uiLoadingMap.get(name).indexOf(uuid);\r\n        if (index === -1) return false;\r\n        this.uiLoadingMap.get(name).splice(index, 1);\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 创建UI\r\n     */\r\n    private createUI(name: UIName, silent: boolean, callback: (node: Node, scene?: Scene) => any) {\r\n        // 生成一个UI加载的UUID\r\n        const loadingUuid = silent ? '' : this.showLoading();\r\n        const uiLoadingUuid = this.addUILoadingUuid(name, loadingUuid);\r\n\r\n        // 验证name\r\n        if (!name) {\r\n            setTimeout(() => {\r\n                if (!isValid(this)) return;\r\n                // 验证本次加载是否有效\r\n                if (this.removeUILoadingUuid(name, uiLoadingUuid) === false) {\r\n                    return this.hideLoading(loadingUuid);\r\n                }\r\n                callback(null);\r\n                this.hideLoading(loadingUuid);\r\n            });\r\n            return;\r\n        }\r\n\r\n        // 判断是否已经存在节点并且是单例模式\r\n        const node = this.getUIInScene(name);\r\n        if (isValid(node, true) && this.getBaseView(node).isSingleton === true) {\r\n            setTimeout(() => {\r\n                if (!isValid(this)) return;\r\n\r\n                // 验证本次加载是否有效\r\n                if (this.removeUILoadingUuid(name, uiLoadingUuid) === false) {\r\n                    return this.hideLoading(loadingUuid);\r\n                }\r\n\r\n                // 验证节点是否有效\r\n                if (isValid(node, true)) {\r\n                    if (this.currScene === name) {\r\n                        callback(node, director.getScene());\r\n                    } else {\r\n                        callback(node);\r\n                    }\r\n                    this.hideLoading(loadingUuid);\r\n                } else {\r\n                    this.createUI(name, silent, callback);\r\n                    this.hideLoading(loadingUuid);\r\n                }\r\n            });\r\n            return;\r\n        }\r\n\r\n        // 加载UI\r\n        this.load(name, (asset) => {\r\n            if (!isValid(this)) return;\r\n\r\n            // 验证本次加载是否有效\r\n            if (this.removeUILoadingUuid(name, uiLoadingUuid) === false) {\r\n                return this.hideLoading(loadingUuid);\r\n            }\r\n\r\n            // 是场景\r\n            if (asset instanceof SceneAsset) {\r\n                callback(this.parsingScene(asset, name), asset.scene);\r\n                this.hideLoading(loadingUuid);\r\n                return;\r\n            }\r\n\r\n            // 验证是否是单例(一个单例会有被同时load多次的情况，因为判断一个ui是否是单例，必须要至少实例化一个后才能获取)\r\n            const node = this.getUIInScene(name);\r\n            if (!isValid(node, true) || this.getBaseView(node).isSingleton === false) {\r\n                callback(this.parsingPrefab(asset, name));\r\n                this.hideLoading(loadingUuid);\r\n            } else {\r\n                callback(node);\r\n                this.hideLoading(loadingUuid);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 展示默认View\r\n     */\r\n    public showDefault(onShow?: (result?: any) => any) {\r\n        if (this.defaultUI) {\r\n            this.show({\r\n                name: this.defaultUI,\r\n                data: this.defaultData,\r\n                onShow\r\n            });\r\n        } else {\r\n            Core.inst.manager.ui.showToast('请先设置首界面\\n在setting.ts中修改defaultUI', 100);\r\n            onShow && onShow();\r\n            this.warn('defaultUI不存在，请在setting.ts中修改');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 是否展示了(包括加载中和队列中)\r\n     */\r\n    public isShow(name: UIName) {\r\n        return !!this.getUIInShowing(name) ||\r\n            this.isInQueue(name) ||\r\n            this.isLoading(name);\r\n    }\r\n\r\n    /**\r\n     * 是否在队列中\r\n     */\r\n    public isInQueue(name: UIName) {\r\n        return !!this.showQueue.find((v) => { return v.name == name; });\r\n    }\r\n\r\n    /**\r\n     * 是否在加载中\r\n     */\r\n    public isLoading(name: UIName) {\r\n        return this.uiLoadingMap.has(name) && this.uiLoadingMap.get(name).length > 0;\r\n    }\r\n\r\n    /**\r\n     * 放入队列\r\n     */\r\n    private putInShowQueue(data: IShowParams<UIName>) {\r\n        if (data.queue === 'join' || this.showQueue.length === 0) {\r\n            this.showQueue.push(data);\r\n        } else {\r\n            this.showQueue.splice(1, 0, data);\r\n        }\r\n        if (this.showQueue.length === 1) {\r\n            this.consumeShowQueue();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 消耗队列\r\n     */\r\n    private consumeShowQueue() {\r\n        if (this.showQueue.length === 0) return;\r\n        const data = this.showQueue[0];\r\n        this.show({\r\n            name: data.name,\r\n            data: data.data,\r\n            onShow: data.onShow,\r\n            onHide: (result: any) => {\r\n                data.onHide && data.onHide(result);\r\n                this.showQueue.shift();\r\n                this.consumeShowQueue();\r\n            },\r\n            onError: data.onError ? (error: string, code: 0 | 1) => {\r\n                const ret = data.onError(error, code);\r\n                this.showQueue.shift();\r\n                this.consumeShowQueue();\r\n                return ret;\r\n            } : undefined,\r\n            top: data.top,\r\n            attr: data.attr,\r\n            silent: data.silent\r\n        });\r\n    }\r\n\r\n    private showUI(params: IShowParams<UIName>) {\r\n        const { name, data, onShow, onHide, onError, top = true, attr = null, silent = false } = params;\r\n\r\n        this.createUI(name, silent, (node, scene) => {\r\n            if (!node) {\r\n                this.error('show', `${name} 不存在或加载失败`);\r\n                // 「没有指定onError」或「onError返回true」会自动发起重试\r\n                if (onError && onError(`${name} 不存在或加载失败`, UIManager.ErrorCode.LoadError) !== true) {\r\n                    return;\r\n                }\r\n                this.scheduleOnce(() => this.showUI(params), 1);\r\n                if (!silent) this.showLoading(1);\r\n                return;\r\n            }\r\n\r\n            !scene && top && node.setSiblingIndex(-1);\r\n\r\n            const com = this.getBaseView(node);\r\n            this.uiShowingMap.set(com, name);\r\n            com.constructor.prototype.show.call(com, data, attr,\r\n                // onShow\r\n                (result: any) => {\r\n                    this.uiShowingMap.set(com, name);\r\n                    onShow && onShow(result);\r\n                },\r\n                // onHide\r\n                (result: any) => {\r\n                    this.uiShowingMap.delete(com);\r\n                    onHide && onHide(result);\r\n                },\r\n                // beforeShow\r\n                (error: string) => {\r\n                    if (error) {\r\n                        this.uiShowingMap.delete(com);\r\n                        onError && onError(error, UIManager.ErrorCode.LogicError);\r\n                    } else if (BaseView.isPage(name)) {\r\n                        this.uiShowingMap.set(com, name);\r\n                        const oldCom = this.currPage;\r\n                        this.currPage = com;\r\n                        if (isValid(oldCom, true) && oldCom !== com && oldCom.isShow) {\r\n                            oldCom.constructor.prototype.hide.call(oldCom, { name });\r\n                        }\r\n                        if (scene) {\r\n                            if (oldCom !== com) {\r\n                                this.currScene = name;\r\n                                director.runSceneImmediate(scene, null, () => {\r\n                                    this.log(`切换场景: ${name}`);\r\n                                });\r\n                            }\r\n                        } else if (this.currScene !== UIScene) {\r\n                            this.currScene = UIScene;\r\n                            const scene = new Scene(UIScene);\r\n                            scene.autoReleaseAssets = true;\r\n                            director.runSceneImmediate(scene, null, () => {\r\n                                this.log(`切换场景: ${UIScene}`);\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            );\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 展示一个UI\r\n     * - 此流程一定是异步的\r\n     */\r\n    public show<UI extends BaseView>(params\r\n        // @ts-ignore\r\n        : IShowParams<UIName, Parameters<UI['onShow']>[0], ReturnType<UI['onShow']>, ReturnType<UI['onHide']>>) {\r\n        const { name, data, queue, onError, silent = false } = params;\r\n\r\n        // 加入队列中\r\n        if (queue) {\r\n            this.putInShowQueue(params);\r\n            return;\r\n        }\r\n\r\n        this.log(`show: ${name}`);\r\n\r\n        // 生成一个UI加载的UUID\r\n        const loadingUuid = silent ? '' : this.showLoading();\r\n        const uiLoadingUuid = this.addUILoadingUuid(name, loadingUuid);\r\n        // 判断ui是否有效\r\n        Core.inst.lib.task.execute((retry) => {\r\n            this.checkUIValid(name, data, (valid) => {\r\n                // 验证本次加载是否有效\r\n                if (this.removeUILoadingUuid(name, uiLoadingUuid) === false) {\r\n                    this.hideLoading(loadingUuid);\r\n                    return;\r\n                }\r\n\r\n                // 加载失败\r\n                if (valid === -1) {\r\n                    this.error('show', `${name} 不存在或加载失败`);\r\n                    // 「没有指定onError」或「onError返回true」会自动发起重试\r\n                    if (onError && onError(`${name} 不存在或加载失败`, UIManager.ErrorCode.LoadError) !== true) {\r\n                        return this.hideLoading(loadingUuid);\r\n                    }\r\n                    return retry(1);\r\n                }\r\n\r\n                // ui无效\r\n                if (valid === 0) {\r\n                    this.warn('show', `${name} 无效`);\r\n                    this.uninstallUI(name);\r\n                    onError && onError(`${name} 无效`, UIManager.ErrorCode.InvalidError);\r\n                    this.hideLoading(loadingUuid);\r\n                    return;\r\n                }\r\n\r\n                this.showUI(params);\r\n                this.hideLoading(loadingUuid);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 展示一个UI\r\n     * - 此流程一定是异步的\r\n     */\r\n    public showAsync<UI extends BaseView>(params\r\n        // @ts-ignore\r\n        : IShowAsyncParams<UIName, Parameters<UI['onShow']>[0], ReturnType<UI['onShow']>>): Promise<ReturnType<UI['onHide']>> {\r\n        return new Promise((resolve) => {\r\n            this.show({\r\n                ...params,\r\n                onHide(result) {\r\n                    resolve(result);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 关闭View\r\n     * - 此流程一定是同步的\r\n     */\r\n    public hide<UI extends BaseView>({ name, data, onHide }\r\n        // @ts-ignore\r\n        : IHideParams<UIName, Parameters<UI['onHide']>[0], ReturnType<UI['onHide']>>) {\r\n        const nodes = this.getUIInShowing(name, true);\r\n\r\n        this.log(`hide: ${name}`);\r\n\r\n        if (nodes.length === 0) {\r\n            if (!this.uiLoadingMap.has(name) || this.uiLoadingMap.get(name).length === 0) {\r\n                return this.warn('hide', `${name} 不存在`);\r\n            }\r\n        }\r\n\r\n        if (this.uiLoadingMap.has(name)) {\r\n            this.uiLoadingMap.get(name).forEach((loadingUuid) => this.hideLoading(loadingUuid));\r\n            this.uiLoadingMap.get(name).length = 0;\r\n        }\r\n\r\n        for (let index = nodes.length - 1; index >= 0; index--) {\r\n            const node = nodes[index];\r\n            const com = this.getBaseView(node);\r\n\r\n            if (this.currPage === com) {\r\n                this.currPage = null;\r\n            }\r\n\r\n            com.constructor.prototype.hide.call(com, data, onHide);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 从顶部关闭一个View(不会重复关闭节点)\r\n     * - 此流程一定是同步的\r\n     */\r\n    public pop<UI extends BaseView>({ name, data, onHide }\r\n        // @ts-ignore\r\n        : IHideParams<UIName, Parameters<UI['onHide']>[0], ReturnType<UI['onHide']>>) {\r\n        const nodes = this.getUIInShowing(name, true);\r\n\r\n        if (this.uiLoadingMap.has(name) && this.uiLoadingMap.get(name).length) {\r\n            const loadingUuid = this.uiLoadingMap.get(name).pop();\r\n            this.hideLoading(loadingUuid);\r\n            this.log(`pop: ${name}`);\r\n            return;\r\n        }\r\n\r\n        if (nodes.length) {\r\n            const node = nodes.pop();\r\n            const com = this.getBaseView(node);\r\n\r\n            if (this.currPage === com) {\r\n                this.currPage = null;\r\n            }\r\n\r\n            com.constructor.prototype.hide.call(com, data, onHide);\r\n            this.log(`pop: ${name}`);\r\n            return;\r\n        }\r\n\r\n        this.warn('pop', `${name} 不存在`);\r\n    }\r\n\r\n    /**\r\n     * 从底部关闭一个View(不会重复关闭节点)\r\n     * - 此流程一定是同步的\r\n     */\r\n    public shift<UI extends BaseView>({ name, data, onHide }\r\n        // @ts-ignore\r\n        : IHideParams<UIName, Parameters<UI['onHide']>[0], ReturnType<UI['onHide']>>) {\r\n        const nodes = this.getUIInShowing(name, true);\r\n\r\n        if (nodes.length) {\r\n            const node = nodes[0];\r\n            const com = this.getBaseView(node);\r\n\r\n            if (this.currPage === com) {\r\n                this.currPage = null;\r\n            }\r\n\r\n            com.constructor.prototype.hide.call(com, data, onHide);\r\n            this.log(`shift: ${name}`);\r\n            return;\r\n        }\r\n\r\n        if (this.uiLoadingMap.has(name) && this.uiLoadingMap.get(name).length) {\r\n            const loadingUuid = this.uiLoadingMap.get(name).shift();\r\n            this.hideLoading(loadingUuid);\r\n            this.log(`shift: ${name}`);\r\n            return;\r\n        }\r\n\r\n        this.warn('shift', `${name} 不存在`);\r\n    }\r\n\r\n    /**\r\n     * 关闭全部View\r\n     * - 不关闭展示中的Page(加载中的会停止)\r\n     * - 此流程一定是同步的\r\n     */\r\n    public hideAll({ data, exclude }: { data?: any, exclude?: UIName[] } = {}): void {\r\n        this.log('hideAll');\r\n        // 展示中的\r\n        this.uiShowingMap.forEach((name, com) => {\r\n            if (BaseView.isPaper(name)) return;\r\n            if (exclude && exclude.indexOf(name) !== -1) return;\r\n            if (com === this.currPage) return;\r\n            com.constructor.prototype.hide.call(com, data);\r\n        });\r\n        // 加载中的\r\n        this.uiLoadingMap.forEach((value, name) => {\r\n            if (BaseView.isPaper(name)) return;\r\n            if (exclude && exclude.indexOf(name) !== -1) return;\r\n            value.forEach((loadingUuid) => this.hideLoading(loadingUuid));\r\n            value.length = 0;\r\n        });\r\n    }\r\n\r\n    public showLoading(timeout = 0) {\r\n        this.loading.active = true;\r\n        this.loading.setSiblingIndex(-1);\r\n        if (this.loading.getComponent(UIMgrLoading)) {\r\n            this.loading.getComponent(UIMgrLoading).init();\r\n        } else {\r\n            // 兼容旧版本\r\n            this.loading.getComponentInChildren(UIMgrLoading)?.init();\r\n        }\r\n        const uuid = this.createUUID();\r\n        this.showLoadingMap.set(uuid, true);\r\n        if (timeout > 0) this.scheduleOnce(() => {\r\n            this.hideLoading(uuid);\r\n        }, timeout);\r\n        return uuid;\r\n    }\r\n\r\n    public hideLoading(uuid: string) {\r\n        if (!uuid) return;\r\n        this.showLoadingMap.delete(uuid);\r\n        if (this.showLoadingMap.size === 0) {\r\n            if (this.loading.getComponent(UIMgrLoading)) {\r\n                this.loading.getComponent(UIMgrLoading).clear();\r\n            } else {\r\n                // 兼容旧版本\r\n                this.loading.getComponentInChildren(UIMgrLoading)?.clear();\r\n            }\r\n            this.loading.active = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 添加触摸屏蔽\r\n     */\r\n    public addTouchMask(timeout = 0) {\r\n        this.addTouchMaskListener();\r\n        const uuid = this.createUUID();\r\n        this.touchMaskMap.set(uuid, true);\r\n        if (timeout > 0) this.scheduleOnce(() => {\r\n            this.removeTouchMask(uuid);\r\n        }, timeout);\r\n        return uuid;\r\n    }\r\n\r\n    /**\r\n     * 移除触摸屏蔽\r\n     * @param uuid addTouchMask的返回值\r\n     */\r\n    public removeTouchMask(uuid: string) {\r\n        if (!uuid) return;\r\n        this.touchMaskMap.delete(uuid);\r\n        this.removeTouchMaskListener();\r\n    }\r\n\r\n    /**\r\n     * 显示Toast\r\n     * @param message 文本\r\n     * @param timeout 持续时间(秒)，默认2秒\r\n     */\r\n    public showToast(message: string, timeout?: number) {\r\n        if (!this.toast) {\r\n            return this.error('showToast', '请确认首场景中「Canvas/Manager/UIManager」的「Toast Pre」属性存在');\r\n        }\r\n        this.toast.setSiblingIndex(-1);\r\n        this.toast.getComponent(UIMgrToast).add({\r\n            message, timeout\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 清理Toast\r\n     */\r\n    public clearToast() {\r\n        if (!this.toast) return;\r\n        this.toast.getComponent(UIMgrToast).clear();\r\n    }\r\n\r\n    /**\r\n     * 设置触摸是否启用\r\n     * @param enabled 是否启用\r\n     */\r\n    public setTouchEnabled(enabled: boolean) {\r\n        if (enabled) {\r\n            this.touchEnabled = true;\r\n            this.removeTouchMaskListener();\r\n        } else {\r\n            this.addTouchMaskListener();\r\n            this.touchEnabled = false;\r\n        }\r\n        this.warn('setTouchEnabled', this.touchEnabled);\r\n    }\r\n\r\n    /**\r\n     * 在2DUI根节点上处理事件\r\n     */\r\n    public onUserInterface(...args: Parameters<Node['on']>) {\r\n        Node.prototype.on.apply(this.UserInterface, args);\r\n    }\r\n\r\n    /**\r\n     * 在2DUI根节点上处理事件\r\n     */\r\n    public onceUserInterface(...args: Parameters<Node['once']>) {\r\n        Node.prototype.once.apply(this.UserInterface, args);\r\n    }\r\n\r\n    /**\r\n     * 在2DUI根节点上处理事件\r\n     */\r\n    public offUserInterface(...args: Parameters<Node['off']>) {\r\n        Node.prototype.off.apply(this.UserInterface, args);\r\n    }\r\n\r\n    /**\r\n     * 在2DUI根节点上处理事件\r\n     */\r\n    public targetOffUserInterface(...args: Parameters<Node['targetOff']>) {\r\n        Node.prototype.targetOff.apply(this.UserInterface, args);\r\n    }\r\n\r\n    /**\r\n     * 立即给2DUI的子节点排序\r\n     */\r\n    public sortUserInterface(name: IViewType) {\r\n        this.UserInterface\r\n            ?.getChildByName(name)\r\n            ?.getComponent(UIMgrZOrder)\r\n            ?.updateZOrder();\r\n    }\r\n\r\n    /**\r\n     * 屏幕截图\r\n     * - 需要在Director.EVENT_BEFORE_RENDER事件中调用\r\n     * @example\r\n     * director.once(Director.EVENT_BEFORE_RENDER, () => {\r\n     *   const renderTexture = new RenderTexture();\r\n     *   const size = view.getVisibleSize();\r\n     *   renderTexture.reset({ width: size.width, height: size.height });\r\n     *   app.manager.ui.screenshot(renderTexture);\r\n     * });\r\n     */\r\n    public screenshot(renderTexture: RenderTexture, opts?: {\r\n        /**摄像机筛选 */\r\n        cameraFilter?: (camera: Camera) => boolean;\r\n        /**摄像机列表 */\r\n        cameraList?: Camera[];\r\n    }) {\r\n        const cameras = opts?.cameraList || director.getScene().getComponentsInChildren(Camera);\r\n\r\n        const cameraList = cameras.sort((a, b) => a.priority - b.priority)\r\n            .filter(camera => {\r\n                if (!camera.enabledInHierarchy) return false;\r\n                if (camera.targetTexture) return false;\r\n                return opts?.cameraFilter ? opts.cameraFilter(camera) : true;\r\n            });\r\n        const cameraList2 = cameraList.map(camera => camera.camera);\r\n\r\n        cameraList.forEach(camera => {\r\n            camera.targetTexture = renderTexture;\r\n        });\r\n        director.root.pipeline.render(cameraList2);\r\n        cameraList.forEach(camera => {\r\n            camera.targetTexture = null;\r\n        });\r\n\r\n        return renderTexture;\r\n    }\r\n}","import { Component, Graphics, Node, Size, UITransform, _decorator } from 'cc';\r\nconst { ccclass, property, requireComponent } = _decorator;\r\n\r\n@ccclass('UIMgrLoading')\r\n@requireComponent(UITransform)\r\nexport default class UIMgrLoading extends Component {\r\n    @property(Node)\r\n    private loading: Node;\r\n\r\n    @property({ tooltip: '动画的尺寸' })\r\n    private size: Size = new Size(60, 60);\r\n\r\n    @property({ tooltip: '等待几秒后开始动画' })\r\n    private delay = 0;\r\n\r\n    private progress = 0;\r\n    private ringScale = 1;\r\n    private reverse = false;\r\n\r\n    private angleSpeed = 120;\r\n    private ringSpeed = 0.02;\r\n\r\n    private inited = false;\r\n    private drawing = false;\r\n    private timedown = 0;\r\n\r\n    init() {\r\n        if (this.inited) return;\r\n        this.inited = true;\r\n\r\n        this.progress = 0;\r\n        this.ringScale = 1;\r\n        this.loading.angle = 0;\r\n        this.reverse = false;\r\n\r\n        this.drawing = false;\r\n        this.timedown = this.delay;\r\n        this.loading.getComponent(Graphics).clear();\r\n    }\r\n\r\n    clear() {\r\n        this.inited = false;\r\n        this.drawing = false;\r\n    }\r\n\r\n    /**\r\n     * 需要重写\r\n     */\r\n    private onDraw() {\r\n        const graphics = this.loading.getComponent(Graphics);\r\n        const uiTransform = this.loading.getComponent(UITransform);\r\n\r\n        const centerX = this.size.width * (0.5 - uiTransform.anchorX);\r\n        const centerY = this.size.height * (0.5 - uiTransform.anchorY);\r\n\r\n        const r = Math.min(this.size.width / 2, this.size.height / 2);\r\n\r\n        const allPI = Math.PI;\r\n        const offst = 0;\r\n\r\n        graphics.clear();\r\n        if (this.reverse) {\r\n            const start = 0.5 * Math.PI + offst;\r\n            const end = 0.5 * Math.PI + this.progress * 2 * allPI + offst;\r\n            graphics.arc(centerX, centerY, r, start, end, true);\r\n        } else {\r\n            const start = 0.5 * Math.PI - offst;\r\n            const end = 0.5 * Math.PI - this.progress * 2 * allPI - offst;\r\n            graphics.arc(centerX, centerY, r, start, end, false);\r\n        }\r\n        graphics.stroke();\r\n    }\r\n\r\n    protected update(dt: number): void {\r\n        if (!this.inited) return;\r\n\r\n        // 倒计时\r\n        if (!this.drawing) {\r\n            if (this.timedown > 0) {\r\n                this.timedown -= dt;\r\n            }\r\n            if (this.timedown <= 0) {\r\n                this.drawing = true;\r\n            } else {\r\n                return;\r\n            }\r\n        }\r\n\r\n        // 旋转\r\n        this.loading.angle -= this.angleSpeed * dt;\r\n        if (this.loading.angle >= 360 || this.loading.angle <= -360) {\r\n            this.loading.angle = this.loading.angle % 360;\r\n        }\r\n\r\n        // 进度\r\n        if (this.ringScale > 0) {\r\n            this.progress = Math.min(1, this.progress + this.ringSpeed * this.ringScale);\r\n\r\n            if (this.progress == 1) {\r\n                this.ringScale = -1;\r\n                this.reverse = !this.reverse;\r\n            }\r\n        } else {\r\n            this.progress = Math.max(0, this.progress + this.ringSpeed * this.ringScale);\r\n\r\n            if (this.progress == 0) {\r\n                this.ringScale = 1;\r\n                this.reverse = !this.reverse;\r\n            }\r\n        }\r\n\r\n        this.onDraw();\r\n    }\r\n}\r\n","import { Camera, Color, Component, Director, Material, RenderTexture, Sprite, SpriteFrame, UIOpacity, UITransform, _decorator, director } from 'cc';\r\nimport Core from '../../../Core';\r\nconst { ccclass, property, requireComponent } = _decorator;\r\n\r\n@ccclass('UIMgrShade')\r\n@requireComponent(Sprite)\r\n@requireComponent(UIOpacity)\r\nexport default class UIMgrShade extends Component {\r\n    @property(Material)\r\n    private blurMaterial: Material = null;\r\n\r\n    @property(SpriteFrame)\r\n    private shadeFrame: SpriteFrame = null;\r\n\r\n    @property\r\n    private _delay = 0;\r\n    @property\r\n    get delay() { return this._delay; }\r\n    set delay(v) { this._delay = Math.max(v, 0); }\r\n\r\n    @property\r\n    private _begin = 0;\r\n    @property\r\n    get begin() { return this._begin; }\r\n    set begin(v) { if (v >= 0 && v <= 255) this._begin = v; }\r\n\r\n    @property\r\n    private _end = 255;\r\n    @property\r\n    get end() { return this._end; }\r\n    set end(v) { if (v >= 0 && v <= 255) this._end = v; }\r\n\r\n    @property\r\n    private _speed = 10;\r\n    @property\r\n    get speed() {\r\n        if (this.begin == this.end) {\r\n            return 0;\r\n        } else if (this.begin > this.end) {\r\n            return this._speed > 0 ? -this._speed : this._speed;\r\n        } else {\r\n            return this._speed >= 0 ? this._speed : -this._speed;\r\n        }\r\n    }\r\n    set speed(v) { this._speed = v; }\r\n\r\n    private get sprite() {\r\n        return this.node.getComponent(Sprite);\r\n    }\r\n    private get opacity() {\r\n        return this.node.getComponent(UIOpacity);\r\n    }\r\n\r\n    private inited = false;\r\n    private drawing = false;\r\n    private timedown = 0;\r\n\r\n    private blurFrame: SpriteFrame = null;\r\n\r\n    init(delay: number, begin: number, end: number, speed: number, blur: boolean) {\r\n        if (blur) {\r\n            director.targetOff(this);\r\n            this.inited = false;\r\n            this.drawing = false;\r\n\r\n            this.sprite.color = Color.WHITE;\r\n            this.sprite.customMaterial = null;\r\n            this.sprite.spriteFrame = this.blurFrame;\r\n            if (this.blurFrame) this.blurFrame.flipUVY = false;\r\n\r\n            let count = 0;\r\n            const cameras = director.getScene().getComponentsInChildren(Camera);\r\n            director.on(Director.EVENT_BEFORE_RENDER, () => {\r\n                count++;\r\n\r\n                const renderTexture = new RenderTexture();\r\n                const size = this.node.getComponent(UITransform);\r\n                renderTexture.reset({ width: size.width / 2, height: size.height / 2 });\r\n                renderTexture.addRef();\r\n\r\n                Core.inst.manager.ui.screenshot(renderTexture, {\r\n                    cameraList: cameras\r\n                });\r\n\r\n                if (count === 1) {\r\n                    this.blurFrame = new SpriteFrame();\r\n                    this.blurFrame?.texture?.decRef();\r\n                    this.blurFrame.texture = renderTexture;\r\n                    this.blurFrame.flipUVY = true;\r\n                    this.sprite.spriteFrame = this.blurFrame;\r\n                    this.sprite.customMaterial = this.blurMaterial;\r\n                    this.blurMaterial.setProperty('blurLevel', 2);\r\n                    return;\r\n                }\r\n\r\n                if (count === 5) {\r\n                    director.targetOff(this);\r\n                    this.sprite.spriteFrame.flipUVY = false;\r\n                    this.sprite.customMaterial = null;\r\n                    return;\r\n                }\r\n\r\n                this.blurFrame?.texture?.decRef();\r\n                this.blurFrame.texture = renderTexture;\r\n                this.blurFrame.flipUVY = true;\r\n                this.sprite.spriteFrame = this.blurFrame;\r\n                this.sprite.customMaterial = this.blurMaterial;\r\n                this.blurMaterial.setProperty('blurLevel', count === 2 ? 3 : 1);\r\n            }, this);\r\n        } else {\r\n            director.targetOff(this);\r\n            this.sprite.spriteFrame = this.shadeFrame;\r\n            this.sprite.color = Color.BLACK;\r\n            this.sprite.customMaterial = null;\r\n        }\r\n\r\n        this.delay = delay;\r\n        this.begin = begin;\r\n        this.end = end;\r\n        this.speed = speed;\r\n        this.drawing = true;\r\n\r\n        if (this.inited) return;\r\n        this.inited = true;\r\n        this.timedown = this.delay;\r\n        // 初始透明度\r\n        this.opacity.opacity = this.timedown > 0 ? 0 : this.begin;\r\n    }\r\n\r\n    clear() {\r\n        this.inited = false;\r\n        this.drawing = false;\r\n        director.targetOff(this);\r\n        this.blurFrame?.texture?.decRef();\r\n        this.blurFrame?.destroy();\r\n        this.blurFrame = null;\r\n        this.sprite.spriteFrame = null;\r\n    }\r\n\r\n    protected update(dt: number) {\r\n        if (!this.inited) return;\r\n        if (!this.drawing) return;\r\n\r\n        if (this.timedown > 0) {\r\n            this.timedown -= dt;\r\n            if (this.timedown > 0) return;\r\n            // 初始透明度\r\n            this.opacity.opacity = this.begin;\r\n        }\r\n\r\n        const uiOpacity = this.opacity;\r\n        if (this.speed > 0) {\r\n            uiOpacity.opacity += this.speed * dt;\r\n            if (uiOpacity.opacity > this.end) {\r\n                uiOpacity.opacity = this.end;\r\n            }\r\n        } else if (this.speed < 0) {\r\n            uiOpacity.opacity += this.speed * dt;\r\n            if (uiOpacity.opacity < this.end) {\r\n                uiOpacity.opacity = this.end;\r\n            }\r\n        }\r\n        if (uiOpacity.opacity == this.end) {\r\n            this.drawing = false;\r\n        }\r\n    }\r\n}\r\n","import { Component, NodePool, Prefab, Tween, UIOpacity, UITransform, _decorator, instantiate, tween, view } from 'cc';\r\nimport UIMgrToastCell from './UIMgrToastCell';\r\nconst { property, ccclass, requireComponent } = _decorator;\r\n\r\n@ccclass('UIMgrToast')\r\n@requireComponent(UITransform)\r\nexport default class UIMgrToast extends Component {\r\n    @property(Prefab)\r\n    private cell: Prefab = null;\r\n\r\n    /**每条信息显示几秒 */\r\n    private lifeTime = 2;\r\n\r\n    /**消失时花费几秒渐隐 */\r\n    private outTime = 0.2;\r\n\r\n    /**挤压基础速度 */\r\n    private squeezeSpeed = 200;\r\n\r\n    /**节点缓存池子 */\r\n    private pool = new NodePool();\r\n\r\n    add(data: {\r\n        message: string,\r\n        timeout?: number\r\n    }) {\r\n        const cell = this.pool.get() || instantiate(this.cell);\r\n        cell.setPosition(0, 0, 0);\r\n        cell.parent = this.node;\r\n        cell.active = true;\r\n\r\n        cell.getComponent(UIMgrToastCell).init(data.message);\r\n\r\n        cell.getComponent(UIOpacity).opacity = 255;\r\n        tween(cell.getComponent(UIOpacity))\r\n            .delay(data.timeout || this.lifeTime)\r\n            .to(this.outTime, { opacity: 0 })\r\n            .call(() => {\r\n                this.pool.put(cell);\r\n            })\r\n            .start();\r\n    }\r\n\r\n    clear() {\r\n        const children = this.node.children;\r\n        for (let index = children.length - 1; index >= 0; index--) {\r\n            Tween.stopAllByTarget(children[index].getComponent(UIOpacity));\r\n            children[index].destroy();\r\n        }\r\n    }\r\n\r\n    get size() {\r\n        return this.node.children.length;\r\n    }\r\n\r\n    protected onDestroy() {\r\n        this.pool.clear();\r\n    }\r\n\r\n    protected update(dt: number) {\r\n        const children = this.node.children;\r\n        for (let index = children.length - 1, recovery = false; index >= 0; index--) {\r\n            const zero = index === children.length - 1;\r\n            const curr = children[index];\r\n\r\n            // 直接触发回收逻辑\r\n            if (recovery) {\r\n                Tween.stopAllByTarget(curr.getComponent(UIOpacity));\r\n                this.pool.put(curr);\r\n                continue;\r\n            }\r\n\r\n            if (zero) {\r\n                const currUT = curr.getComponent(UITransform);\r\n\r\n                const lastMaxY = 0 - currUT.height / 2;\r\n                const currMinY = curr.position.y + lastMaxY;\r\n\r\n                if (currMinY > lastMaxY) {\r\n                    // 存在空隙\r\n                    const addLen = Math.max(-this.squeezeSpeed * dt * (children.length - index), lastMaxY - currMinY);\r\n                    curr.setPosition(curr.position.x, curr.position.y + addLen, curr.position.z);\r\n                }\r\n            } else {\r\n                const last = children[index + 1];\r\n                const currUT = curr.getComponent(UITransform);\r\n                const lastUT = last.getComponent(UITransform);\r\n\r\n                const currMinY = curr.position.y - currUT.height / 2 - 6;//6像素的间隔\r\n                const lastMaxY = last.position.y + lastUT.height / 2;\r\n\r\n                if (currMinY < lastMaxY) {\r\n                    // 存在重叠\r\n                    const addLen = Math.min(this.squeezeSpeed * dt * (children.length - index - 1), lastMaxY - currMinY);\r\n                    curr.setPosition(curr.position.x, curr.position.y + addLen, curr.position.z);\r\n                    const winSize = view.getVisibleSize();\r\n                    if (currMinY > winSize.height / 2) {\r\n                        // 触发回收逻辑\r\n                        recovery = true;\r\n                        Tween.stopAllByTarget(curr.getComponent(UIOpacity));\r\n                        this.pool.put(curr);\r\n                    }\r\n                } else if (currMinY > lastMaxY) {\r\n                    // 存在空隙\r\n                    const addLen = Math.max(-this.squeezeSpeed * dt * (children.length - index), lastMaxY - currMinY);\r\n                    curr.setPosition(curr.position.x, curr.position.y + addLen, curr.position.z);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","import { Component, Label, UIOpacity, UITransform, _decorator } from 'cc';\r\nconst { ccclass, property, requireComponent } = _decorator;\r\n\r\n@ccclass('UIMgrToastCell')\r\n@requireComponent(UIOpacity)\r\n@requireComponent(UITransform)\r\nexport default class UIMgrToastCell extends Component {\r\n    @property(Label)\r\n    private title: Label = null;\r\n\r\n    init(title: string) {\r\n        if (title.split('\\n').find((v) => v.length > 30)) {\r\n            this.title.overflow = Label.Overflow.RESIZE_HEIGHT;\r\n            this.title.getComponent(UITransform).width = 600;\r\n        } else {\r\n            this.title.overflow = Label.Overflow.NONE;\r\n        }\r\n        this.title.string = title;\r\n        this.title.updateRenderData(true);\r\n    }\r\n\r\n    unuse() {\r\n        this.title.string = '';\r\n    }\r\n}\r\n\r\n","import { _decorator, Component, Director, director, Node } from 'cc';\r\nconst { ccclass } = _decorator;\r\n\r\n@ccclass('UIMgrZOrder')\r\nexport default class UIMgrZOrder extends Component {\r\n    private zOrder = false;\r\n    private tempArr: Node[] = [];\r\n\r\n    protected onLoad() {\r\n        this.checkUpdateZOrder();\r\n        this.node.on(Node.EventType.CHILD_ADDED, this.onChildAdded, this);\r\n        this.node.on(Node.EventType.CHILD_REMOVED, this.onChildRemoveed, this);\r\n        if (Node.EventType.CHILDREN_ORDER_CHANGED) {\r\n            this.node.on(Node.EventType.CHILDREN_ORDER_CHANGED, this.checkUpdateZOrder, this);\r\n        } else {\r\n            this.node.on(Node.EventType.SIBLING_ORDER_CHANGED, this.checkUpdateZOrder, this);\r\n        }\r\n    }\r\n\r\n    protected onDestroy() {\r\n        director.off(Director.EVENT_AFTER_UPDATE, this.updateZOrder, this);\r\n        this.node.off(Node.EventType.CHILD_ADDED, this.onChildAdded, this);\r\n        this.node.off(Node.EventType.CHILD_REMOVED, this.onChildRemoveed, this);\r\n        if (Node.EventType.CHILDREN_ORDER_CHANGED) {\r\n            this.node.off(Node.EventType.CHILDREN_ORDER_CHANGED, this.checkUpdateZOrder, this);\r\n        } else {\r\n            this.node.off(Node.EventType.SIBLING_ORDER_CHANGED, this.checkUpdateZOrder, this);\r\n        }\r\n    }\r\n\r\n    private onChildAdded(child: Node) {\r\n        this.checkUpdateZOrder();\r\n        child.on(Node.EventType.TRANSFORM_CHANGED, this.checkUpdateZOrder, this);\r\n    }\r\n\r\n    private onChildRemoveed(child: Node) {\r\n        child.off(Node.EventType.TRANSFORM_CHANGED, this.checkUpdateZOrder, this);\r\n    }\r\n\r\n    private checkUpdateZOrder() {\r\n        if (this.zOrder) return;\r\n        this.zOrder = true;\r\n        director.once(Director.EVENT_AFTER_UPDATE, this.updateZOrder, this);\r\n    }\r\n\r\n    /**\r\n     * 更新节点树排序\r\n     */\r\n    public updateZOrder() {\r\n        if (!this.zOrder) return;\r\n        Array.prototype.push.apply(this.tempArr, this.node.children);\r\n        this.tempArr\r\n            .sort((a, b) => {\r\n                return (a.position.z - b.position.z)\r\n                    || (a.getSiblingIndex() - b.getSiblingIndex());\r\n            })\r\n            .forEach((child, index) => {\r\n                child.setSiblingIndex(index);\r\n            });\r\n\r\n        // 一定要放到最后再设置false，\r\n        // 避免更新过程中设置siblingIndex，\r\n        // 导致无限重复调用\r\n        this.zOrder = false;\r\n        this.tempArr.length = 0;\r\n    }\r\n}\r\n\r\n"]}