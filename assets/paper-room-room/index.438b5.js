System.register("chunks:///_virtual/JmIdentityCell.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JmListViewItem.ts","./JmNodePoolMgr.ts","./JmIdentityItem.ts"],(function(t){var e,n,i,r,o,l,a,c,s,u,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,a=t.Layout,c=t.isValid},function(t){s=t.default},function(t){u=t.default},function(t){d=t.default}],execute:function(){var p,h,f,y;o._RF.push({},"14b469mCv5BK5BE5hpNFxI/","JmIdentityCell",void 0);var m=l.ccclass,v=l.property;t("default",(p=v(a),m((y=e((f=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,i(e,"container",y,r(e)),e.children=new Array,e}n(e,t);var o=e.prototype;return o.updateItem=function(e,n,i){t.prototype.updateItem.call(this,e,n,i);for(var r=0;r<4;r++)if(n[r]){var o=this.children[r];o||((o=u.GetCell(u.IdentityCellPool)).parent=this.container.node,this.children[r]=o),o.getComponent(d).init(n[r],4*e+r+1)}else{var l=this.children[r];l&&(l.removeFromParent(),l.destroy(),this.children[r]=null)}},o.onDisable=function(){t.prototype.onDisable.call(this)},o.onDestroy=function(){for(var t,e=this.children,n=0,i=e.length;n<i;n++)t=e[n],c(t,!0)&&(t.active=!1,t.destroy());this.children=[]},e}(s)).prototype,"container",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/JmIdentityItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./app.ts","./JmRoomDataMgr.ts","./JmClickComponent.ts"],(function(t){var e,i,n,o,a,r,l,c,u,s,p,d,m,f,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Node,c=t.Label,u=t.SpriteFrame,s=t.Sprite,p=t.Texture2D,d=t.Color},function(t){m=t.app},function(t){f=t.default},function(t){h=t.JmClickComponent}],execute:function(){var y,g,b,v,C,I,w,D,N,k,F,z,J,E,_,S;a._RF.push({},"ffa38Dt7fFKS7ezuhUX6PJg","JmIdentityItem",void 0);var x=r.ccclass,L=r.property;t("default",(y=L(l),g=L(l),b=L(l),v=L(c),C=L(l),I=L(l),w=L(l),x((k=e((N=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"seat",k,o(e)),n(e,"icon",F,o(e)),n(e,"pic",z,o(e)),n(e,"nickName",J,o(e)),n(e,"dayNode",E,o(e)),n(e,"nightNode",_,o(e)),n(e,"out",S,o(e)),e.data=null,e.id=0,e}i(e,t);var a=e.prototype;return a.onLoad=function(){},a.start=function(){},a.onEnable=function(){t.prototype.onEnable.call(this)},a.onDisable=function(){t.prototype.onEnable.call(this)},a.onDestroy=function(){},a.init=function(t,e){console.log("JmIdentityItem"),this.id=e,this.data=t,this.nickName.string=t.userId?m.Manager.Util.strClamp(t.nickName,5,"..."):"点击邀请";var i="pic_seat_"+e+"/spriteFrame",n=this;if(m.manager.loader.load({bundle:"identitybig",path:i,type:u,onComplete:function(t){n.seat.getComponent(s).spriteFrame=t}}),this.updateDay(f.getGameDay()),f.isOwner()&&!f.getGameDay()&&this.updateIdentity(),t.headerThumb){var o=this;o.icon.active=!0;var a=t.headerThumb;m.manager.loader.loadRemote({url:a,ext:".png",onComplete:function(t){var e=new u,i=new p;i.image=t,e.texture=i,o.icon.getComponent(s).spriteFrame=e}})}else this.icon.active=!1},a.updateDay=function(t){this.dayNode.active=t,this.nightNode.active=!t,t?(this.nickName.color=(new d).fromHEX("#E7F0FD"),this.pic.getComponent(s).spriteFrame=null,this.pic.active=!1,this.out.active=!1):this.nickName.color=(new d).fromHEX("#C0C4D8")},a.updateIdentity=function(){console.log("updateIdentity=",this.data.identity);var t=m.config.const.AllotIdentityCfg;if(t[this.data.identity])t[this.data.identity].pic;else this.pic.active=!1,this.pic.getComponent(s).spriteFrame=null},a.onItemClick=function(t){this.onClickItem(t)},a.onClickItem=function(t){console.log("邀请 id=",this.id),0==f.getGameState()&&f.isOwner()&&0!=this.data.identity&&(this.out.active=!this.out.active)},e}(h)).prototype,"seat",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(N.prototype,"icon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(N.prototype,"pic",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(N.prototype,"nickName",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(N.prototype,"dayNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(N.prototype,"nightNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(N.prototype,"out",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=N))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/paper-room-room",["./JmIdentityCell.ts","./JmIdentityItem.ts","./PaperRoomRoom.ts"],(function(){return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PaperRoomRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseView.ts","./app.ts","./JmListView.ts","./JmNodePoolMgr.ts","./JmRoomDataMgr.ts","./RoomController.ts"],(function(t){var e,i,n,o,a,r,s,l,u,d,c,g,h,m,p,y,f,b,C,w,I,B,T,N;return{setters:[function(t){e=t.inheritsLoose,i=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Prefab,l=t.Node,u=t.Label,d=t.RichText,c=t.Layout,g=t.find,h=t.Widget,m=t.UITransform,p=t.ScrollView,y=t.SpriteFrame,f=t.Sprite,b=t.Color},function(t){C=t.default},function(t){w=t.app},function(t){I=t.default},function(t){B=t.default},function(t){T=t.default},function(t){N=t.RoomController}],execute:function(){var R,D,v,x,S,A,V,q,E,z,P,F,k,M,H,L,U,O,_,G,J,X,j,K,W,Y,Q,Z,$,tt,et;a._RF.push({},"1a3f6w1IuBPP4sW08ofP1bY","PaperRoomRoom",void 0);var it=r.ccclass,nt=r.property;t("PaperRoomRoom",(R=it("PaperRoomRoom"),D=nt(I),v=nt(s),x=nt(l),S=nt(l),A=nt(l),V=nt(u),q=nt(d),E=nt(l),z=nt(c),P=nt(u),F=nt(l),k=nt(l),M=nt(l),H=nt(u),R((U=function(t){function i(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"listView",O,o(e)),n(e,"identityItem",_,o(e)),n(e,"bg",G,o(e)),n(e,"godNode",J,o(e)),n(e,"tagNode",X,o(e)),n(e,"roomNum",j,o(e)),n(e,"cfgText",K,o(e)),n(e,"txtBg",W,o(e)),n(e,"identityNode",Y,o(e)),n(e,"identityTxt",Q,o(e)),n(e,"identityIcon",Z,o(e)),n(e,"layoutBg",$,o(e)),n(e,"identityBg",tt,o(e)),n(e,"identityLabel",et,o(e)),e.identityType=0,e.gameRoomSeatsInfoData=null,e._roomKey=null,e.gameState=0,e.txt="",e.cardNode=null,e.allotIdentityCfg=null,e.type=1,e.testType=1,e}e(i,t);var a=i.prototype;return a.onLoad=function(){this.init(),this.initData(),this.controller.on(N.Event.UPDATE_GAME_IDENTITY,this.updateIdentity,this)},a.onShow=function(t){},a.onHide=function(t){this.controller.targetOff(this)},a.onClickBack=function(){w.manager.ui.show({name:"PageHome"})},a.init=function(){var t=this,e={recordId:49,roomNum:1036,status:0,players:24,curPlayers:2,judge:!0,seats:[{userId:100022,headerThumb:"https://thirdqq.qlogo.cn/qqapp/1110879879/0BBA8D3211B54E6C6BC9B15C8E7CF8F3/100",nickName:"易乐乐",status:1,identity:15},{userId:100023,headerThumb:"https://thirdqq.qlogo.cn/qqapp/1110879879/7C90B13F53B0B0A84346A317724EF6EF/100",nickName:"DH",status:1,identity:15},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0}],identities:'{"11":1,"12":1,"1":1,"13":1,"2":1,"14":1,"3":4,"15":12,"9":1,"10":1}'};T.InitCurrentRoom(e),w.Manager.Util.IsIpad()&&(g("top",this.node).setScale(.5,.5,.5),g("centre",this.node).setScale(.7,.7),g("bottom",this.node).setScale(.7,.7),g("top/back",this.node).getComponent(h).top=10,g("top/back",this.node).getComponent(h).updateAlignment()),this.roomNum.string="1001",this.gameRoomSeatsInfoData=null;this.updateUI(),B.InitNodePool(B.IdentityCellPool,this.identityItem,"JmIdentityItem"),this.log("JmRoomDataMgr.getRoomCfg()=",T.getRoomCfg());var i=T.getRoomCfg(),n="";this.allotIdentityCfg=w.config.const.AllotIdentityCfg;var o=Array.from(i.entries()).sort((function(t,e){return Number(t[0])-Number(e[0])}));o.forEach((function(e,i){var a=e[0],r=e[1];t.log("k=",a),t.log("v=",r),n+=t.allotIdentityCfg[a].name+"x"+r,i<o.length-1&&(n+="，")})),this.txt=n,this.cfgText.string="<color=#848EA3>【本局配置】</c><color=#4A5979>"+n+"</color>",this.log("this.cfgText.node.getContentSize().height=",this.cfgText.node.getComponent(m).height),this.cfgText.node.getComponent(m).height<120?this.txtBg.getComponent(m).height=200:this.txtBg.getComponent(m).height=this.cfgText.node.getComponent(m).height+79;var a=[];if(T.GetRoomSeats())a=T.GetRoomSeats();else for(var r=0;r<T.getRoomCount();r++)a.push({userId:null,name:"",icon:"",identity:0,headerThumb:""});this.listView.setComponentName("JmIdentityCell"),this.listView.setData(this.sliceData(a)),this.scheduleOnce((function(){t.listView.notifyChange(),t.tagNode.active=T.isOwner(),t.listView.bottomMargin=T.isOwner()?80:0,t.tagNode.setPosition(0,30-t.listView.getContentHeight()),(T.isOwner()?t.listView.getContentHeight()+50:t.listView.getContentHeight())>t.listView.node.getComponent(m).height?t.listView.getComponent(p).elastic=!0:t.listView.getComponent(p).elastic=!1}),.1)},a.initData=function(){this._roomKey=T.GetCurrentRoomKey()},a.updateUI=function(){var t=T.isOwner();this.updateBtn();var e=this.gameState=1;if(t){this.identityTxt.string="法官";var i=this;w.manager.loader.load({bundle:"identitybig",path:"card_judge/spriteFrame",type:y,onComplete:function(t){console.log("加载资源完成",t),i.identityIcon.getComponent(f).spriteFrame=t}})}else 1!=e&&2!=e||(this.identityTxt.string="等待发牌");this.updateDay(2==e)},a.updateDay=function(t){var e=this;t?(w.Manager.Util.IsIphoneX()||w.Manager.Util.IsIpad(),this.identityLabel.color=(new b).fromHEX("#6E7C99"),this.cfgText.string="<color=#848EA3>【本局配置】</c><color=#4A5979>"+this.txt+"</color>",this.identityNode.getComponent(h).bottom=170):(w.Manager.Util.IsIphoneX()||w.Manager.Util.IsIpad(),this.identityLabel.color=(new b).fromHEX("#8474A4"),this.cfgText.string="<color=#8474A4>【本局配置】</c><color=#2A1658>"+this.txt+"</color>",T.isOwner()||(this.identityNode.getComponent(h).bottom=0)),T.isOwner()||(this.identityNode.getComponent(h).updateAlignment(),this.listView.node.getComponent(h).updateAlignment(),this.listView.node.getChildByName("view").getComponent(h).updateAlignment(),this.listView.node.getChildByName("view").getChildByName("content").getComponent(h).updateAlignment());var i=[{userId:100022,headerThumb:"https://thirdqq.qlogo.cn/qqapp/1110879879/0BBA8D3211B54E6C6BC9B15C8E7CF8F3/100",nickName:"易乐乐",status:1,identity:15},{userId:100023,headerThumb:"https://thirdqq.qlogo.cn/qqapp/1110879879/7C90B13F53B0B0A84346A317724EF6EF/100",nickName:"DH",status:1,identity:15},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0},{status:0,identity:0}];i&&(this.listView.setData(this.sliceData(i)),this.scheduleOnce((function(){e.listView.notifyChange()}),.1))},a.restoreData=function(t){for(var e=[],i=0,n=t.length;i<n;i++)e=e.concat(t[i]);return e},a.sliceData=function(t){for(var e=[],i=0,n=t.length;i<n;i+=4)e.push(t.slice(i,i+4));return e},a.onClickStart=function(){w.controller.room.updateGameIdentity(this.testType++);for(var t=this.restoreData(this.listView.getData()),e=0;e<t.length-3;e++)t[e].identity=this.testType++,this.testType>16&&(this.testType=1);this.listView.setData(this.sliceData(t))},a.updateIdentity=function(t){this.log("type=",t),this.identityType=t,this.identityTxt.string=this.allotIdentityCfg[t].name},a.updateBtn=function(){},a.onClickTestRes=function(){},a.onClickTestRes1=function(){},a.updateRoomSeats=function(t){if(this.gameRoomSeatsInfoData=T.GetRoomSeats(),this.gameState!=T.getGameState())this.gameState=T.getGameState(),this.updateUI();else{var e=0!=this.gameState;this.updateDay(e)}},i}(C.BindController(N)),O=i(U.prototype,"listView",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(U.prototype,"identityItem",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(U.prototype,"bg",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(U.prototype,"godNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(U.prototype,"tagNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(U.prototype,"roomNum",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(U.prototype,"cfgText",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(U.prototype,"txtBg",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(U.prototype,"identityNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(U.prototype,"identityTxt",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(U.prototype,"identityIcon",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(U.prototype,"layoutBg",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=i(U.prototype,"identityBg",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=i(U.prototype,"identityLabel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=U))||L));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/paper-room-room', 'chunks:///_virtual/paper-room-room'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=index.js.map