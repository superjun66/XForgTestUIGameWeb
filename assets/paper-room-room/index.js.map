{"version":3,"sources":["../file:/D:/XForgTestUIGame/assets/app-bundle/app-view/paper/room/room/native/file:/D:/XForgTestUIGame/assets/app-bundle/app-view/paper/room/room/native/JmIdentityCell.ts","../file:/D:/XForgTestUIGame/assets/app-bundle/app-view/paper/room/room/native/file:/D:/XForgTestUIGame/assets/app-bundle/app-view/paper/room/room/native/JmIdentityItem.ts","../file:/D:/XForgTestUIGame/assets/app-bundle/app-view/paper/room/room/native/file:/D:/XForgTestUIGame/assets/app-bundle/app-view/paper/room/room/native/PaperRoomRoom.ts"],"names":["ccclass","_decorator","property","JmIdentityCell","_dec","Layout","_class","_class2","_JmListViewItem","_inheritsLoose","_this","_len","arguments","length","args","Array","_key","call","apply","concat","_initializerDefineProperty","_descriptor","_assertThisInitialized","children","_proto","prototype","updateItem","id","data","listView","i","ins","removeFromParent","destroy","JmNodePoolMgr","GetCell","IdentityCellPool","parent","container","node","roomCell","getComponent","JmIdentityItem","init","onDisable","onDestroy","child","len","isValid","active","JmListViewItem","_applyDecoratedDescriptor","configurable","enumerable","writable","initializer","_RF","pop","Node","_dec2","_dec3","_dec4","Label","_dec5","_dec6","_dec7","_JmClickComponent","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","onLoad","start","onEnable","console","log","nickName","string","userId","app","Manager","Util","strClamp","url","self","manager","loader","load","bundle","path","type","SpriteFrame","onComplete","asset","seat","Sprite","spriteFrame","updateDay","JmRoomDataMgr","getGameDay","isOwner","updateIdentity","headerThumb","icon","loadRemote","ext","sp","texture","Texture2D","image","isDay","dayNode","nightNode","color","Color","fromHEX","pic","out","identity","AllotIdentityCfg","config","picUrl","onItemClick","target","onClickItem","getGameState","JmClickComponent","PaperRoomRoom","JmListView","Prefab","_dec8","RichText","_dec9","_dec10","_dec11","_dec12","_dec13","_dec14","_dec15","_BaseView$BindControl","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","identityType","gameRoomSeatsInfoData","_roomKey","gameState","txt","cardNode","allotIdentityCfg","testType","initData","controller","on","RoomController","Event","UPDATE_GAME_IDENTITY","onShow","params","onHide","result","targetOff","onClickBack","ui","show","name","_this2","rsp1","rsp","InitCurrentRoom","IsIpad","find","setScale","Widget","top","updateAlignment","roomNum","updateUI","InitNodePool","identityItem","getRoomCfg","cfg","sortedArray","from","entries","sort","a","b","Number","forEach","_ref","index","k","v","cfgText","UITransform","height","txtBg","GetRoomSeats","getRoomCount","push","setComponentName","setData","sliceData","scheduleOnce","notifyChange","tagNode","bottomMargin","setPosition","getContentHeight","ScrollView","elastic","GetCurrentRoomKey","updateBtn","identityTxt","identityIcon","_this3","IsIphoneX","identityLabel","identityNode","bottom","getChildByName","restoreData","slicedData","slice","onClickStart","room","updateGameIdentity","getData","onClickTestRes","onClickTestRes1","updateRoomSeats","day","BaseView","BindController"],"mappings":"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","file":"all.js","sourcesContent":["import { _decorator, isValid, Layout, Node } from \"cc\";\r\nimport JmListView from \"db://assets/res-native/tool/JmListView\";\r\nimport JmListViewItem from \"db://assets/res-native/tool/JmListViewItem\";\r\nimport JmNodePoolMgr from \"db://assets/res-native/tool/JmNodePoolMgr\";\r\nimport JmIdentityItem from \"./JmIdentityItem\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass\r\nexport default class JmIdentityCell extends JmListViewItem {\r\n    @property(Layout)\r\n    container: Layout = null\r\n\r\n    private children = new Array<Node>();\r\n\r\n    updateItem(id: number, data: any, listView: JmListView) {\r\n        super.updateItem(id, data, listView);\r\n        for (let i = 0; i < 4; i++) {\r\n            if (!data[i]) {\r\n                let ins = this.children[i]\r\n                if (ins) {\r\n                    ins.removeFromParent()\r\n                    ins.destroy()\r\n                    this.children[i] = null\r\n                }\r\n            } else {\r\n                let ins = this.children[i]\r\n                if (!ins) {\r\n                    ins = JmNodePoolMgr.GetCell(JmNodePoolMgr.IdentityCellPool);\r\n                    ins.parent = this.container.node\r\n                    this.children[i] = ins\r\n                }\r\n                let roomCell = ins.getComponent(JmIdentityItem);\r\n                roomCell.init(data[i], (id * 4) + i + 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    protected onDisable() {\r\n        super.onDisable();\r\n    }\r\n\r\n    protected onDestroy() {\r\n        // super.onDestroy();\r\n        let child, children = this.children;\r\n        for (let i = 0, len = children.length; i < len; i++) {\r\n            child = children[i];\r\n            if (isValid(child, true)) {\r\n                child.active = false;\r\n                child.destroy();\r\n            }\r\n        }\r\n        this.children = [];\r\n    }\r\n}\r\n","// import { AllotIdentityCfg } from \"../../config/JmConst\";\r\n// import { JmClickComponent } from \"../../extension/JmClickComponent\";\r\n// import JmResourceMgr from \"../../jmManager/JmResourceMgr\";\r\n// import JmRoomDataMgr from \"../../jmManager/JmRoomDataMgr\";\r\n// import JmUserDataMgr from \"../../jmManager/JmUserDataMgr\";\r\n// import JmHttpSender from \"../../network/netManager/JmHttpSender\";\r\n// import { JmPlatformUtils } from \"../../platformUtil/JmPlatformUtils\";\r\n// import Log from \"../../util/Log\";\r\n// import Util from \"../../util/Util\";\r\n\r\nimport { _decorator, Asset, Color, ImageAsset, Label, Node, Sprite, SpriteFrame, Texture2D } from \"cc\";\r\nimport { app } from \"db://assets/app/app\";\r\nimport JmRoomDataMgr from \"db://assets/res-native/manager/JmRoomDataMgr\";\r\nimport { JmClickComponent } from \"db://assets/res-native/tool/JmClickComponent\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n// const qq = window['qq'];\r\n\r\n@ccclass\r\nexport default class JmIdentityItem extends JmClickComponent {\r\n  @property(Node)\r\n  seat: Node = null;\r\n  @property(Node)\r\n  icon: Node = null;\r\n  @property(Node)\r\n  pic: Node = null;\r\n  @property(Label)\r\n  nickName: Label = null;\r\n  @property(Node)\r\n  dayNode: Node = null;\r\n  @property(Node)\r\n  nightNode: Node = null;\r\n  @property(Node)\r\n  out: Node = null;\r\n\r\n  data:any = null\r\n  id = 0\r\n  onLoad() {\r\n  }\r\n\r\n  start() {\r\n  }\r\n\r\n  onEnable() {\r\n    super.onEnable()\r\n  }\r\n\r\n  onDisable() {\r\n    super.onEnable()\r\n  }\r\n\r\n  onDestroy() {\r\n  }\r\n\r\n  init(data:any, id:number) {\r\n    console.log('JmIdentityItem');\r\n    this.id = id\r\n    this.data = data\r\n    this.nickName.string = data.userId ? app.Manager.Util.strClamp(data.nickName, 5, \"...\") : '点击邀请'\r\n\r\n    let url = `pic_seat_${id}/spriteFrame`\r\n    // if (data.userId == JmUserDataMgr.GetCurrentUserId()) {\r\n    //   url = `identityBig/pic_myseat_${id}/spriteFrame`\r\n    // }\r\n    let self = this\r\n    app.manager.loader.load({\r\n        bundle: 'identitybig', // 不传入bundle，默认为resources\r\n        path: url,\r\n        type: SpriteFrame,\r\n        onComplete(asset) {\r\n            self.seat.getComponent(Sprite).spriteFrame = asset;\r\n        }\r\n    })\r\n    this.updateDay(JmRoomDataMgr.getGameDay())\r\n    if (JmRoomDataMgr.isOwner() && !JmRoomDataMgr.getGameDay()) {\r\n      this.updateIdentity()\r\n    }\r\n    if (data.headerThumb) {\r\n      let self = this\r\n      self.icon.active = true\r\n      let headerThumb = data.headerThumb\r\n      app.manager.loader.loadRemote({\r\n        url: headerThumb,\r\n        ext: '.png', // 指定图片扩展名\r\n        onComplete(data: any) {\r\n          let sp: SpriteFrame = new SpriteFrame();\r\n          let texture = new Texture2D();\r\n          texture.image = data;\r\n          sp.texture = texture;\r\n          self.icon.getComponent(Sprite).spriteFrame = sp;\r\n        }\r\n      })\r\n    }\r\n    else {\r\n      this.icon.active = false\r\n    }\r\n\r\n    // this.out.active = data.status == 2\r\n  }\r\n\r\n  updateDay(isDay: boolean) {\r\n    this.dayNode.active = isDay;\r\n    this.nightNode.active = !isDay;\r\n    if (isDay) {\r\n      this.nickName.color = new Color().fromHEX(\"#E7F0FD\");\r\n      this.pic.getComponent(Sprite).spriteFrame = null;\r\n      this.pic.active = false;\r\n      this.out.active = false\r\n    } else {\r\n      this.nickName.color = new Color().fromHEX(\"#C0C4D8\");\r\n    }\r\n  }\r\n\r\n  updateIdentity() {\r\n    console.log('updateIdentity=', this.data.identity);\r\n    let AllotIdentityCfg = app.config.const.AllotIdentityCfg;\r\n    if (AllotIdentityCfg[this.data.identity]) {\r\n      let picUrl = AllotIdentityCfg[this.data.identity].pic;\r\n      let self = this\r\n      // let bundle = assetManager.getBundle('assetsRes');\r\n      // bundle.load(picUrl, SpriteFrame, function (err, spFrame: SpriteFrame) {\r\n      //   if (err) {\r\n      //     log(err.message || err);\r\n      //     return;\r\n      //   }\r\n      //   self.pic.getComponent(Sprite).spriteFrame = spFrame;\r\n      //   self.pic.active = true;\r\n      // });\r\n    }\r\n    else {\r\n      this.pic.active = false;\r\n      this.pic.getComponent(Sprite).spriteFrame = null;\r\n    }\r\n  }\r\n\r\n  protected onItemClick(target:any) {\r\n    this.onClickItem(target)\r\n  }\r\n\r\n  onClickItem(target: any) {\r\n    console.log('邀请 id=', this.id);\r\n    if (JmRoomDataMgr.getGameState() == 0 && JmRoomDataMgr.isOwner() && this.data.identity != 0) {\r\n      this.out.active = !this.out.active\r\n    }\r\n  }\r\n}\r\n","import { _decorator, Asset, Color, find, ImageAsset, Label, Layout, Node, Prefab, RichText, ScrollView, Sprite, SpriteFrame, Texture2D, UITransform, v2, Widget } from 'cc';\r\nimport BaseView from '../../../../../../../extensions/app/assets/base/BaseView';\r\nimport { app } from 'db://assets/app/app';\r\nimport JmListView from 'db://assets/res-native/tool/JmListView';\r\nimport JmNodePoolMgr from 'db://assets/res-native/tool/JmNodePoolMgr';\r\nimport JmRoomDataMgr from 'db://assets/res-native/manager/JmRoomDataMgr';\r\nimport { RoomController } from 'db://assets/app-builtin/app-controller/RoomController';\r\nconst { ccclass, property } = _decorator;\r\n@ccclass('PaperRoomRoom')\r\nexport class PaperRoomRoom extends BaseView.BindController(RoomController) {\r\n  @property(JmListView)\r\n  listView: JmListView = null\r\n  @property(Prefab)\r\n  identityItem: Prefab = null\r\n  @property(Node)\r\n  bg: Node = null;\r\n  @property(Node)\r\n  godNode: Node = null;\r\n  @property(Node)\r\n  tagNode: Node = null;\r\n  @property(Label)\r\n  roomNum: Label = null;\r\n  @property(RichText)\r\n  cfgText: RichText = null;\r\n  @property(Node)\r\n  txtBg: Node = null;\r\n  @property(Layout)\r\n  identityNode: Layout = null;\r\n  @property(Label)\r\n  identityTxt: Label = null;\r\n  @property(Node)\r\n  identityIcon: Node = null;\r\n  @property(Node)\r\n  layoutBg: Node = null;\r\n  @property(Node)\r\n  identityBg: Node = null;\r\n  @property(Label)\r\n  identityLabel: Label = null;\r\n\r\n  identityType = 0\r\n  gameRoomSeatsInfoData: any = null;\r\n  _roomKey: any = null;\r\n  gameState = 0\r\n  txt = ''\r\n  cardNode: any = null\r\n  allotIdentityCfg: any = null\r\n\r\n  // 初始化的相关逻辑写在这\r\n  onLoad() {\r\n    this.init()\r\n    this.initData()\r\n    //监听\r\n    this.controller.on(RoomController.Event.UPDATE_GAME_IDENTITY, this.updateIdentity, this);\r\n  }\r\n\r\n  // 界面打开时的相关逻辑写在这(onShow可被多次调用-它与onHide不成对)\r\n  onShow(params: any) {\r\n\r\n  }\r\n\r\n  // 界面关闭时的相关逻辑写在这(已经关闭的界面不会触发onHide)\r\n  onHide(result: undefined) {\r\n    this.controller.targetOff(this);\r\n  }\r\n\r\n  onClickBack() {\r\n    app.manager.ui.show({\r\n      name: 'PageHome',\r\n    });\r\n  }\r\n\r\n  init() {\r\n    let rsp1 =\r\n    {\r\n      \"recordId\": 49, \"roomNum\": 1036, \"status\": 0, \"players\": 24, \"curPlayers\": 2, \"judge\": true,\r\n      \"seats\": [\r\n        { \"userId\": 100022, \"headerThumb\": \"https://thirdqq.qlogo.cn/qqapp/1110879879/0BBA8D3211B54E6C6BC9B15C8E7CF8F3/100\", \"nickName\": \"易乐乐\", \"status\": 1, \"identity\": 15 },\r\n        { \"userId\": 100023, \"headerThumb\": \"https://thirdqq.qlogo.cn/qqapp/1110879879/7C90B13F53B0B0A84346A317724EF6EF/100\", \"nickName\": \"DH\", \"status\": 1, \"identity\": 15 },\r\n        { \"status\": 0, \"identity\": 0 },\r\n        { \"status\": 0, \"identity\": 0 },\r\n        { \"status\": 0, \"identity\": 0 },\r\n        { \"status\": 0, \"identity\": 0 }\r\n      ],\r\n      \"identities\": \"{\\\"11\\\":1,\\\"12\\\":1,\\\"1\\\":1,\\\"13\\\":1,\\\"2\\\":1,\\\"14\\\":1,\\\"3\\\":4,\\\"15\\\":12,\\\"9\\\":1,\\\"10\\\":1}\"\r\n    }\r\n    let rsp2 =\r\n    {\r\n      \"recordId\": 49, \"roomNum\": 1036, \"status\": 0, \"players\": 24, \"curPlayers\": 2, \"judge\": false,\r\n      \"seats\": [\r\n        { \"userId\": 100022, \"headerThumb\": \"https://thirdqq.qlogo.cn/qqapp/1110879879/0BBA8D3211B54E6C6BC9B15C8E7CF8F3/100\", \"nickName\": \"易乐乐\", \"status\": 1, \"identity\": 15 },\r\n        { \"userId\": 100023, \"headerThumb\": \"https://thirdqq.qlogo.cn/qqapp/1110879879/7C90B13F53B0B0A84346A317724EF6EF/100\", \"nickName\": \"DH\", \"status\": 1, \"identity\": 15 },\r\n        { \"status\": 0, \"identity\": 0 },\r\n        { \"status\": 0, \"identity\": 0 },\r\n        { \"status\": 0, \"identity\": 0 },\r\n        { \"status\": 0, \"identity\": 0 }\r\n      ],\r\n      \"identities\": \"{\\\"11\\\":1,\\\"12\\\":1,\\\"1\\\":1,\\\"13\\\":1,\\\"2\\\":1,\\\"14\\\":1,\\\"3\\\":4,\\\"15\\\":12,\\\"9\\\":1,\\\"10\\\":1}\"\r\n    }\r\n\r\n    let rsp = true ? rsp1 : rsp2\r\n    JmRoomDataMgr.InitCurrentRoom(rsp);\r\n\r\n    if (app.Manager.Util.IsIpad()) {\r\n      find('top', this.node).setScale(0.5, 0.5, 0.5)\r\n      find('centre', this.node).setScale(0.7, 0.7)\r\n      find('bottom', this.node).setScale(0.7, 0.7)\r\n      find('top/back', this.node).getComponent(Widget).top = 10\r\n      find('top/back', this.node).getComponent(Widget).updateAlignment();\r\n    }\r\n    this.roomNum.string = '1001'//JmRoomDataMgr.GetRoomNum();\r\n    this.gameRoomSeatsInfoData = null\r\n\r\n    let self = this\r\n    // JmHttpSender.RequestAdvertisingConfig().then((result: any) => {\r\n    //   this.log(`RequestGameStart Success ${JSON.stringify(result)}`);\r\n    //   //显示广告\r\n    //   self.advertisementNode.active = result.display\r\n    //   self.identityNode.getComponent(Widget).top = self.advertisementNode.active ? 360 : 180\r\n    self.updateUI()\r\n    // }, (err) => {\r\n    //   this.log(`RequestGameStart Failed! ${err}`);\r\n    // });\r\n    JmNodePoolMgr.InitNodePool(JmNodePoolMgr.IdentityCellPool, this.identityItem, \"JmIdentityItem\");\r\n    this.log('JmRoomDataMgr.getRoomCfg()=', JmRoomDataMgr.getRoomCfg());\r\n    let cfg = JmRoomDataMgr.getRoomCfg()\r\n    let txt = ''\r\n    this.allotIdentityCfg = app.config.const.AllotIdentityCfg\r\n    const sortedArray = Array.from(cfg.entries()).sort((a, b) => Number(a[0]) - Number(b[0]));\r\n    sortedArray.forEach(([k, v], index) => {\r\n      this.log('k=', k);\r\n      this.log('v=', v);\r\n      txt += this.allotIdentityCfg[k].name + 'x' + v;\r\n      if (index < sortedArray.length - 1) {\r\n        txt += '，';\r\n      }\r\n    });\r\n    this.txt = txt\r\n    this.cfgText.string = `<color=#848EA3>【本局配置】</c><color=#4A5979>${txt}</color>`\r\n    this.log('this.cfgText.node.getContentSize().height=', this.cfgText.node.getComponent(UITransform).height);\r\n    if (this.cfgText.node.getComponent(UITransform).height < 120)\r\n      this.txtBg.getComponent(UITransform).height = 200\r\n    else\r\n      this.txtBg.getComponent(UITransform).height = this.cfgText.node.getComponent(UITransform).height + 79\r\n\r\n    let data = []\r\n    if (JmRoomDataMgr.GetRoomSeats())\r\n      data = JmRoomDataMgr.GetRoomSeats();\r\n    else {\r\n      for (let i = 0; i < JmRoomDataMgr.getRoomCount(); i++) {\r\n        data.push({\r\n          userId: null,\r\n          name: '',\r\n          icon: '',\r\n          identity: 0,\r\n          headerThumb: '',\r\n        },)\r\n      }\r\n    }\r\n    // for (let i = 0; i < JmRoomDataMgr.getRoomCount(); i++) {\r\n    //   data.push({\r\n    //     userId: null,\r\n    //     name: '点击邀请',//'邬菲' + i,\r\n    //     icon: '',\r\n    //     identity: 0,\r\n    //     headerThumb: '',\r\n    //   },)\r\n    // }\r\n    this.listView.setComponentName('JmIdentityCell');\r\n    this.listView.setData(this.sliceData(data));\r\n    this.scheduleOnce(() => {\r\n      this.listView.notifyChange()\r\n      this.tagNode.active = JmRoomDataMgr.isOwner()\r\n      this.listView.bottomMargin = JmRoomDataMgr.isOwner() ? 80 : 0\r\n      this.tagNode.setPosition(0, -this.listView.getContentHeight() + 30)\r\n      let height = JmRoomDataMgr.isOwner() ? this.listView.getContentHeight() + 50 : this.listView.getContentHeight()\r\n      if (height > this.listView.node.getComponent(UITransform).height) {\r\n        this.listView.getComponent(ScrollView).elastic = true\r\n      }\r\n      else {\r\n        this.listView.getComponent(ScrollView).elastic = false\r\n      }\r\n    }, 0.1)\r\n  }\r\n\r\n  initData() {\r\n    this._roomKey = JmRoomDataMgr.GetCurrentRoomKey();\r\n    // this.gameRoomSeatsInfoData = JmRoomDataMgr.GetRoomSeats();\r\n  }\r\n\r\n  updateUI() {\r\n    // this.log('JmRoomDataMgr.isOwner()=', JmRoomDataMgr.isOwner())\r\n    let isOwner = JmRoomDataMgr.isOwner()\r\n    // this.otherNode.active = !isOwner\r\n    this.updateBtn()\r\n    let gameState = this.gameState = 1//JmRoomDataMgr.getGameState()\r\n    if (isOwner) {\r\n      this.identityTxt.string = '法官'\r\n      // JmResourceMgr.LoadBundleSpriteRes('identityBig/card_judge', this.identityIcon);\r\n      let self = this\r\n      app.manager.loader.load({\r\n        bundle: 'identitybig', // 不传入bundle，默认为resources\r\n        path: 'card_judge/spriteFrame',\r\n        type: SpriteFrame,\r\n        onComplete(asset) {\r\n          console.log('加载资源完成', asset);\r\n          self.identityIcon.getComponent(Sprite).spriteFrame = asset;\r\n        }\r\n      })\r\n    }\r\n    else {\r\n      if (gameState == 1 || gameState == 2) {\r\n        this.identityTxt.string = '等待发牌'\r\n        // JmResourceMgr.LoadBundleSpriteRes('identity/card_myrole__', this.identityIcon);\r\n      } else if (gameState == 0) {\r\n        // this.gameRoomSeatsInfoData.forEach(data => {\r\n        //   if (data.userId == JmUserDataMgr.GetCurrentUserId()) {\r\n        //     if (data.identity == 0)\r\n        //       this.identityTxt.string = '等待发牌'\r\n        //     else\r\n        //       EventManager.Send(JmDataEvent.UPDATE_GAME_IDENTITY, data.identity);\r\n        //   }\r\n        // });\r\n      }\r\n    }\r\n    this.updateDay(gameState == 2)\r\n  }\r\n\r\n  updateDay(isDay: boolean) {\r\n    let url = ''\r\n    // JmRoomDataMgr.setGameDay(isDay)\r\n    if (isDay) {\r\n      url = 'room/bg_day'\r\n      if (app.Manager.Util.IsIphoneX()) {\r\n        url = 'room/bg_day_x'\r\n      }\r\n      else if (app.Manager.Util.IsIpad()) {\r\n        url = 'room/bg_day_iPad'\r\n      }\r\n      // JmResourceMgr.LoadBundleSpriteRes('room/bg_myrole_day', this.layoutBg);\r\n      // JmResourceMgr.LoadBundleSpriteRes('room/bg_myrole1_day', this.identityBg);\r\n      this.identityLabel.color = new Color().fromHEX(\"#6E7C99\");\r\n      this.cfgText.string = `<color=#848EA3>【本局配置】</c><color=#4A5979>${this.txt}</color>`\r\n\r\n      this.identityNode.getComponent(Widget).bottom = 170\r\n    } else {\r\n      url = 'room/bg_night'\r\n      if (app.Manager.Util.IsIphoneX()) {\r\n        url = 'room/bg_night_x'\r\n      }\r\n      else if (app.Manager.Util.IsIpad()) {\r\n        url = 'room/bg_night_iPad'\r\n      }\r\n      // JmResourceMgr.LoadBundleSpriteRes('room/bg_myrole_night', this.layoutBg);\r\n      // JmResourceMgr.LoadBundleSpriteRes('room/bg_myrole1_night', this.identityBg);\r\n      this.identityLabel.color = new Color().fromHEX(\"#8474A4\");\r\n      this.cfgText.string = `<color=#8474A4>【本局配置】</c><color=#2A1658>${this.txt}</color>`\r\n      if (!JmRoomDataMgr.isOwner()) {\r\n        this.identityNode.getComponent(Widget).bottom = 0\r\n      }\r\n    }\r\n    if (!JmRoomDataMgr.isOwner()) {//|| this.advertisementNode.active) {\r\n      this.identityNode.getComponent(Widget).updateAlignment();\r\n      this.listView.node.getComponent(Widget).updateAlignment();\r\n      this.listView.node.getChildByName('view').getComponent(Widget).updateAlignment();\r\n      this.listView.node.getChildByName('view').getChildByName('content').getComponent(Widget).updateAlignment();\r\n    }\r\n    // JmResourceMgr.LoadBundleSpriteRes(url, this.bg);\r\n    let data = [\r\n      { \"userId\": 100022, \"headerThumb\": \"https://thirdqq.qlogo.cn/qqapp/1110879879/0BBA8D3211B54E6C6BC9B15C8E7CF8F3/100\", \"nickName\": \"易乐乐\", \"status\": 1, \"identity\": 15 },\r\n      { \"userId\": 100023, \"headerThumb\": \"https://thirdqq.qlogo.cn/qqapp/1110879879/7C90B13F53B0B0A84346A317724EF6EF/100\", \"nickName\": \"DH\", \"status\": 1, \"identity\": 15 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }]\r\n\r\n\r\n    // let data = JmRoomDataMgr.GetRoomSeats()\r\n    if (data) {\r\n      this.listView.setData(this.sliceData(data));\r\n      this.scheduleOnce(() => {\r\n        this.listView.notifyChange()\r\n      }, 0.1)\r\n    }\r\n  }\r\n\r\n\r\n  private restoreData(slicedData: Array<Array<any>>): Array<any> {\r\n    let result: any = [];\r\n    for (let i = 0, len = slicedData.length; i < len; i++) {\r\n      result = result.concat(slicedData[i]);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private sliceData(data: Array<any>) {\r\n    let result = []\r\n    for (let i = 0, len = data.length; i < len; i += 4) {\r\n      result.push(data.slice(i, i + 4));\r\n    }\r\n    return result\r\n  }\r\n\r\n\r\n  type = 1\r\n  testType = 1\r\n  onClickStart() {\r\n    // // JmRoomDataMgr.setGameState(true)\r\n    // this.updateBtn()\r\n    // if (this.type > 16)\r\n    //   this.type = 1;\r\n    // // EventManager.Send(JmDataEvent.UPDATE_GAME_IDENTITY, this.type++);\r\n\r\n    app.controller.room.updateGameIdentity(this.testType++);\r\n    let data = this.restoreData(this.listView.getData())\r\n    for (let i = 0; i < data.length - 3; i++) {\r\n      data[i].identity = this.testType++;\r\n      if (this.testType > 16)\r\n        this.testType = 1\r\n    }\r\n    this.listView.setData(this.sliceData(data));\r\n  }\r\n\r\n\r\n  updateIdentity(type: number) {\r\n    // if (JmRoomDataMgr.isOwner()) return\r\n    let self = this\r\n    this.log('type=', type);\r\n    this.identityType = type\r\n    this.identityTxt.string = this.allotIdentityCfg[type].name\r\n    // JmResourceMgr.LoadBundleSpriteRes(AllotIdentityCfg[type].icon, this.identityIcon);\r\n    // JmResourceMgr.LoadBundlePrefab('prefab/JmIdentityCard', function (err, prefab) {\r\n    //   if (err) {\r\n    //     Log.Log(err.message || err);\r\n    //     return;\r\n    //   }\r\n    //   let cardNode = self.cardNode;\r\n    //   if (cardNode && cc.isValid(cardNode)) {\r\n    //     cardNode.active = false;\r\n    //     cardNode.removeFromParent();\r\n    //     cardNode.destroy();\r\n    //   }\r\n    //   self.cardNode = null;\r\n    //   Log.Log(\"LoadPerfab>>>success\")\r\n    //   let node = cc.instantiate(prefab);\r\n    //   self.cardNode = node\r\n    //   node.active = true;\r\n    //   node.getComponent(\"JmIdentityCard\").init(type);\r\n    //   self.node.addChild(self.cardNode);\r\n    // })\r\n  }\r\n\r\n  updateBtn() {\r\n    // // this.log(`JmRoomDataMgr.getGameState()= ${JmRoomDataMgr.getGameState()}`);\r\n    // let isGameing = JmRoomDataMgr.getGameState() == 0 || JmRoomDataMgr.getGameState() == 1\r\n    // this.godNode.active = !isGameing && JmRoomDataMgr.isOwner()\r\n    // this.btnAgain.active = isGameing && JmRoomDataMgr.isOwner()\r\n    // if (JmRoomDataMgr.getGameState() == this.gameState) {\r\n    //     this.btnAgain.getComponent(Button).interactable = true\r\n    // }\r\n    // else {\r\n    //     if (!this.btnAgain.getComponent(Button).interactable) {\r\n    //         this.scheduleOnce(() => {\r\n    //             this.btnAgain.getComponent(Button).interactable = true\r\n    //         }, 3)\r\n    //     }\r\n    // }\r\n  }\r\n\r\n\r\n  onClickTestRes() {\r\n    // let rsp1 =\r\n    //   { \"recordId\": 49, \"roomNum\": 1036, \"status\": 0, \"players\": 24, \"curPlayers\": 2, \"judge\": true, \r\n    //     \"seats\": [\r\n    //       { \"userId\": 100022, \"headerThumb\": \"https://thirdqq.qlogo.cn/qqapp/1110879879/0BBA8D3211B54E6C6BC9B15C8E7CF8F3/100\", \"nickName\": \"易乐乐\", \"status\": 1, \"identity\": 15 }, \r\n    //       { \"userId\": 100023, \"headerThumb\": \"https://thirdqq.qlogo.cn/qqapp/1110879879/7C90B13F53B0B0A84346A317724EF6EF/100\", \"nickName\": \"DH\", \"status\": 1, \"identity\": 15 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }], \"identities\": \"{\\\"11\\\":1,\\\"12\\\":1,\\\"1\\\":1,\\\"13\\\":1,\\\"2\\\":1,\\\"14\\\":1,\\\"3\\\":4,\\\"15\\\":12,\\\"9\\\":1,\\\"10\\\":1}\" }\r\n    // let rsp2 =\r\n    //   { \"recordId\": 49, \"roomNum\": 1036, \"status\": 0, \"players\": 24, \"curPlayers\": 2, \"judge\": false, \"seats\": [{ \"userId\": 100022, \"headerThumb\": \"https://thirdqq.qlogo.cn/qqapp/1110879879/0BBA8D3211B54E6C6BC9B15C8E7CF8F3/100\", \"nickName\": \"易乐乐\", \"status\": 1, \"identity\": 15 }, { \"userId\": 100023, \"headerThumb\": \"https://thirdqq.qlogo.cn/qqapp/1110879879/7C90B13F53B0B0A84346A317724EF6EF/100\", \"nickName\": \"DH\", \"status\": 1, \"identity\": 15 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }], \"identities\": \"{\\\"11\\\":1,\\\"12\\\":1,\\\"1\\\":1,\\\"13\\\":1,\\\"2\\\":1,\\\"14\\\":1,\\\"3\\\":4,\\\"15\\\":12,\\\"9\\\":1,\\\"10\\\":1}\" }\r\n\r\n    // let rsp = JmRoomDataMgr.isOwner() ? rsp1 : rsp2\r\n    // JmRoomDataMgr.InitCurrentRoom(rsp);\r\n    // EventManager.SendImmediately(JmDataEvent.UDPATE_ROOM_SEATS, rsp);\r\n    // this.updateRoomSeats(rsp.seats);\r\n  }\r\n  onClickTestRes1() {\r\n    // let rsp1 =\r\n    //   { \"recordId\": 49, \"roomNum\": 1036, \"status\": 2, \"players\": 24, \"curPlayers\": 2, \"judge\": true, \"seats\": [{ \"userId\": 100022, \"headerThumb\": \"https://thirdqq.qlogo.cn/qqapp/1110879879/0BBA8D3211B54E6C6BC9B15C8E7CF8F3/100\", \"nickName\": \"易乐乐\", \"status\": 1, \"identity\": 15 }, { \"userId\": 100023, \"headerThumb\": \"https://thirdqq.qlogo.cn/qqapp/1110879879/7C90B13F53B0B0A84346A317724EF6EF/100\", \"nickName\": \"DH\", \"status\": 1, \"identity\": 15 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }], \"identities\": \"{\\\"11\\\":1,\\\"12\\\":1,\\\"1\\\":1,\\\"13\\\":1,\\\"2\\\":1,\\\"14\\\":1,\\\"3\\\":4,\\\"15\\\":12,\\\"9\\\":1,\\\"10\\\":1}\" }\r\n    // let rsp2 =\r\n    //   { \"recordId\": 49, \"roomNum\": 1036, \"status\": 2, \"players\": 24, \"curPlayers\": 2, \"judge\": false, \"seats\": [{ \"userId\": 100022, \"headerThumb\": \"https://thirdqq.qlogo.cn/qqapp/1110879879/0BBA8D3211B54E6C6BC9B15C8E7CF8F3/100\", \"nickName\": \"易乐乐\", \"status\": 1, \"identity\": 15 }, { \"userId\": 100023, \"headerThumb\": \"https://thirdqq.qlogo.cn/qqapp/1110879879/7C90B13F53B0B0A84346A317724EF6EF/100\", \"nickName\": \"DH\", \"status\": 1, \"identity\": 15 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }, { \"status\": 0, \"identity\": 0 }], \"identities\": \"{\\\"11\\\":1,\\\"12\\\":1,\\\"1\\\":1,\\\"13\\\":1,\\\"2\\\":1,\\\"14\\\":1,\\\"3\\\":4,\\\"15\\\":12,\\\"9\\\":1,\\\"10\\\":1}\" }\r\n\r\n    // let rsp = JmRoomDataMgr.isOwner() ? rsp1 : rsp2\r\n    // JmRoomDataMgr.InitCurrentRoom(rsp);\r\n    // // EventManager.SendImmediately(JmDataEvent.UDPATE_ROOM_SEATS, rsp);\r\n    // let self = this;\r\n    //   let headerThumb ='https://thirdqq.qlogo.cn/qqapp/1110879879/1F341E6B680513E1095DBDF19AF223D8/100' \r\n    //   app.manager.loader.loadRemote({\r\n    //       url: headerThumb,\r\n    //       onComplete(data: any) {\r\n    //           let sp: SpriteFrame = new SpriteFrame();\r\n    //           let texture = new Texture2D();\r\n    //           texture = data;\r\n    //           sp.texture = texture;\r\n    //           sp.packable = false;\r\n    //         // if (self.icon) {\r\n    //         //   self.icon.getComponent(Sprite).spriteFrame = sp;\r\n    //         // }\r\n\r\n    //           self.identityIcon.getComponent(Sprite).spriteFrame = sp;\r\n    //       }\r\n    //   })=\r\n  }\r\n\r\n  updateRoomSeats(data: any) {\r\n    this.gameRoomSeatsInfoData = JmRoomDataMgr.GetRoomSeats();\r\n    if (this.gameState != JmRoomDataMgr.getGameState()) {\r\n      this.gameState = JmRoomDataMgr.getGameState()\r\n      this.updateUI()\r\n    }\r\n    else {\r\n      let day = this.gameState == 0 ? false : true\r\n      this.updateDay(day)\r\n    }\r\n  }\r\n}"]}